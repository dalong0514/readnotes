## 记忆时间

##  目录

0201 分析方法

0301 用数据分析解决问题

## 0201. 分析方法

这一章介绍常用的分析方法。为什么要学习分析方法？首先来看以下几个症状。

症状一：没有数据分析意识。

症状表现：经常会说「我觉得」「我感觉」「我认为」（图 2-1）。

这类人一切工作靠拍脑袋定，而不是靠数据分析来支持決策。这就导致写了 100 篇文章也不知道什么类型的文章用户会喜欢推广了 10 个付费渠道，却不知道钱花得有没有效果；上线了无数个产品功能，却不知道什么功能对用户更有价值。他们靠感觉来做事情，而不是用数据分析来做決策。这也是为什么他们浑浑噩噩工作了多年以后，却依然徘徊在基础岗位。

症状二：统计式的数据分析。

症状表现：做了很多图表，却发现不了业务中存在的问题（图 2-2）。

这类人每天也按时上班，也用数据做了很多图表，但是只是統计、分析之前已经知道的现象。例如分析结论只是「这个月销售有所下降」，却不会深入分析现象背后发生的原因，从而也得不出什么具有价值的结论。他们最害怕老板问这样的问题：为什么这个数据会下降？采取什么措施可以解決问题？

症状三：只会使用工具的数据分析。

症状表现：这类人平时学了很多工具（Excel、SL 或者 Python 等），谈起使用工具的技巧头头是道，但是面对问题，还是不会分析（图 2-3）。

例如面试或者工作里经常遇到这样的问题：上图表格是一家公司 App 的一周日活跃率，老板交给你以下任务：1）从数据中你看到了什么问题？你觉得背后的原因是什么？2）提出一个有效的运营改进计划。你可能有这样的感觉。面对问题，没有思路，怎么办呢？面对一堆数据，我该如何下手去分析呢？

这些症状是大部分运营人员、产品经理和数据分析相关从业人员的真实日常写照。学会分析方法就是帮助你解決这些问题，它可以弥补你数据分析能力的不足。

什么是分析方法？面对问题，通常的想法是零散的，没有一点思路。如果能将零散的想法整理成有条理的思路，从而快速解決问题，那该多好呀！有什么方法可以将零散的想法整理成有条理的分析思路呢？这些方法就是分析方法。掌握了分析方法就可以具备这种能力（图 2-4）。

将分析方法和盖房子做个类比（图 2-5），分析方法就好比在盖房子前画的设计图，用来指导如何盖房子，是分析问题的思路。数据分析的技术工具好比盖房子中的挖土机等工具。在设计图的指导下知道如何使用挖土机来盖好房子。同样，在分析方法的指导下你才能知道如何使用工具（Excel SQL 或者 Python 等）去分析数据，解决业务问题。

常用的分析方法有哪些？根据业务场景中分析目的的不同，可以选择对应的分析方法。常用的分析方法如表 2-1 所示。

1、如果你的分析目的是想将复杂问题变得简单，就可以使用逻辑树分析方法，例如经典的费费米问题就可以用这个分析方法。如果你的分析目的是做行业分析，那么就可以用 PEST 分析方法，例如你想要研究中国少儿编程行业。

2、如果你想从多个角度去思考问题，那么就可以用多维度拆解分析方法，例如找相亲对象，需要从多个角度去分析是否合适。如果你想进行对比分析，就要用到对比分析方法，例如你朋友问自己胖吗，就是在对比。

3、如果你想找到问题发生的原因，那么就要用到假设检验分析方法，其实破案剧里警察就是用这个方法来破案的。

4、如果你想知道 A 和 B 有什么关系，就要用到相关分析方法，例如豆瓣在我们喜欢的电影下面推荐和这部分电影相关的电影。如果你想对用户留存和流失分析，就要用到群组分析方法，例如微博用户留存分析。

5、如果你想对用户按价值分类，那么就要用到 RFM 分析方法，例如信用卡的会员服务，就是对用户按价值分类，对不同用户使用不同的营销策略，从而做到精细化运营。如果你想分析用户的行为或者做产品运营，就要用到 AARRR 模型分析方法，例如对拼多多的用户进行分析。如果你想分析用户的转化，就要用到漏斗分析方法，例如店铺本周销量下降，想知道是中间哪个业务环节出了问题。

这几个分析方法是最常用的，掌握它们，可以帮助解決大部分向题。后文会分别讲解各个分析方法，最后再通过几个案例来看如何在实际的问题中灵活使用这些分析方法。

在工作或者面试中，会经常听到分析思维、分析思路、分析方法。这三个词语有什么关系呢？其实简单来说，它们都是指分析方法。因为分析方法是将零散的想法整理成有条理的分析思路。有了分析思路，你就具备了分析思维。下文在讲到每一个分析方法的时候，会从 4 个问题出发来学习。1）是什么？先知道这个知识是什么；2）有什么用？知道在什么场景下使用这个知识；3）如何用？通过实际例子来看这个知识如何使用；4）使用这个知识的注意事项。

### 2.1 5W2H 分析方法

#### 2.1.1 什么是 5W2H 分析方法？

这个方法里面的 5W、2H 是英文单词的缩写。5W 是指对于所有的现象都追问 5 个问题：What（是什么）、When（何时）、where（何地）、Why（为什么）、Who（是谁 2H 是指再追问 2 个问题：how（怎么做）、how much（多少钱当遇到要解决的问题，可以从 5W、2H 这 7 个问题出发来解决。

#### 2.1.2 5W2H 分析方法能解决哪些问题？

5W2H 分析方法可以帮助我们解決简单的问题，下面举几个例子。

案例 1：如何设计一款产品？

这时候可以用 5W2H 分析方法。

What（是什么）：这是什么产品？

When（何时）：什么时候需要上线？

Where（何地）：在哪里发布这些产品？

Why（为什么）：用户为什么需要它？

Who（是谁）：这是给谁设计的？

How（怎么做）：这个产品需要怎么运作？

How much（多少钱）：这个产品里有付费功能吗？价格是多少？

案例 2: 设计一款 App 的调查问卷，如何设计问卷上的问题？

这时可以用 5W2H 分析方法。

What（是什么）：你用这款 Ap 做什么事情？

When（何时）：你通常在什么时间使用这款 App?

Where（何地）：你会在什么场景使用这款 App?

Why（为什么）：你为什么选择这款 App?

Who（是谁）：如果你觉得你喜欢这个产品，你会推荐给谁？

How（怎么做）：你觉得我们需要加入什么功能才是比较新颖的？

How much（多少钱）：如果你认为这个 App 对你有帮助，你会花多少钱去购买 App 里的服务？

#### 2.1.3 5W2H 分析方法解決不了什么问题？

5W2H 分析方法很好理解，但是在复杂的商业问题面前不起作用。这是因为复杂的商业问题不会只有一个原因，而是由多个原因引起的。例如「销量为什么下降」，就可能是由多个原因导致的。这时候就需要运用其他分析方法。

### 2.2 逻辑树分析方法

#### 2.2.1 什么是逻辑树分析方法？有什么用？

逻辑树分析方法是把复杂问题拆解成若干个简单的子问题，然后像树枝那样逐步展开（图 2-6）。为了更符合人类的思考过程，我们把图 2-6 这棵树倒过来，或者横着放，就是常用的逻辑树分析方法。通过逻辑树分析方法，我们可以把一个复杂的问题变成容易处理的子问题（图 2-7）。

#### 2.2.2 如何使用逻辑树分析方法？

不管是实际生活中还是工作中，我们经常会使用逻辑树分析方法来分析问题。例如现在你想给自己做一个年度计划，但是要做的事情很多，思路很零散。为了理顺你的思路，可以用逻辑树分析方法，把年度计划这个复杂问题拆分成技能学习、读书、健身、旅行这几个子向题（图 2-8）。

技能学习是为了储备技能，抓住人工智能时代的红利。想要零基础从数据分析开始学起，可以进一步拆解为学习业务指标、分析方法、Excel、SQL、Python 等。这样一步ー步把年度计划拆解成一个ー个的子问题，解決了子问题就订好了年度计划我们都知道马斯克是特斯拉电动车公司的老板，但是他也有很多其他生意。图 2-9 是他在第 68 届国际宇航大会上公布的火星殖民计划。

他的目标是用宇宙飞船毎次携帯 200 位乘客前去火星，旅行的时间将会在 80 天左右。通过大概 20-50 次的运输，能在火星上建立完全自给自足的城市。预计 40-100 年后，也许会有 100 万人在火星上生存繁。这个目标是不是很宏伟？或者说是不是有点扯？但是马斯克将这个复杂的问题用逻辑树分析方法拆解成了个ー个可以解决的子问题。首先，马斯克说，火星移民面临的最大问题是什么呢？

是需要很多钱。要花多少钱呢？去一趙火星，一个人要 100 亿美元。马斯克希望把去一次火星的成本，从 100 亿美元，降到 20 万美元，约合人民币 130 万元左右，这样就会有很多人愿意在临终之前，去一趙火星看看那么问题又来了，成本从 100 亿美元降到 20 万美元，怎么实现这个目标呢？马斯克又把这个问题拆解成了 4 个子问题。

第一，火箭得是可以重复使用的。如果发射一次，就烧坏一个火箭，太费钱了。如果能把火箭发射出去，再让它飞回来，下次发射继续用，成本就可以降下来了。马斯克 2002 年成立了 Spacex。公司，2015 年底就实现了火箭发射以后的再回收。

第二，飞船如果直接载满整个太空航行所需要的燃料，再发射，火箭就会非常沉重，成本很高昂。怎么解决呢？马斯克说，在太空轨道上，对飞船进行补给。也就是，先用火箭推进器把飞船送到太空轨道，这时候不用装那么多燃料，只要足够把火箭送上太空就行。然后推进器迅速返回发射台，装上燃料箱，再飞到轨道，把燃料补给飞船。完成这一过程之后，推进器返回地球，而飞船则将前往火星。采用这种方式，前往火星的成本可以到原来的 1/500。

第三，在火星上制造燃料，让飞船能够从火星返回地球，这样返程的燃料就不用从地球上了，也降低了好多发射成本。

第四，使用正确的燃料。马斯克对比了可能的几个选项，例如煤油、気气、氧气等。但他最后认为选择甲烷更好，因为甲烷在火星上制造起来容易。

经过逻辑树分析方法，马斯克就把一个天方夜谭般的目标，拆解成了一系列非常具体的子题。马斯克还给自己拉了一张时间表，在 21 世纪 20 年代的后半段，将人类送上火星。我们经常会说某个人工作能力强，那什么是工作能力？就是像马斯克这样，能用逻辑树分析方法把一个大目标拆解成小任务的能力再进一步，我们经常会说到领导力，就是把目标拆解成员工可以执行的小任务的能力。

前面我们举了逻辑树分析方法在生活中的两个例子，一个是如何做年度计划，一个是特斯拉 CEO 如何在工作中拆解问题。其实，逻辑树分析方法是由科学家费米提出来的，这种分析题的方法在面试中会经常用到，例如：北京有多少辆特斯拉汽车？某胡同口的煎饼一年能卖出多少个煎饼？深圳有多少个产品经理？一辆公交车里能装下多少个乒乓球？ー个正常成年人有多少根头发？

这类估算问题，被称为「费米问题」（图 2-10）。为什么面试会问这种问题呢？这类问题能把两类人清楚地区分出来一类是具有文科思维的人，他们擅长赞収和模糊想象，主要依靠的是第一反应和直觉，例如小孩；另一类是具有理科思维的，他们擅长通过逻辑推理、分析解決具体问题。理科思维不是人天生就有的，需要经过长期的训练。

1-3『想到了书籍「2019039科学与工程中的洞察力」里一些列估算的方法。（2020-12-21）』

公司招聘需要的是能把事情做成、具有严密逻辑推理、分析能力的人，所以费费米问题可以考察出一个人有什么样的思维方式。一般人拿到费米问题，就会摸不着头脑，不知道怎么解決，干脆凭感觉瞎猜一个数字。这其实忽视了面试官考察的目的，他不是要你算出一个确定的数字，而是想考察你面对问题的分析思路。所以，你需要把自己的思路说出来，来证明你的思维方式是理科思维。

回答费米问题，可以用到逻辑树分析方法，将一个复杂的题拆解成子问题，然后逐一解。下面我们就用一个例子来学习下如何解決这类问题。

有人曾经问费米：「芝加哥有多少钢琴调音师？」什么是钢琴调音师呢？为了保持钢琴的音准，需要定期由专业人员检查、调整不准确的音。从事这类工作的人被称为钢琴调音师。

对于这个问题，可以使用逻辑树分析方法来拆解。钢琴调音师数量 = 全部钢琴调音师 1 年的总工作时间 / 一位调音师每年的工作时间。所以，可以把这个问题拆解为两个子问题（图 2-11）。1） 全部钢琴调音师 1 年的总工作时间。2） 一位调音师每年工作时间。

对于全部钢琴调音师 1 年的总工作时间，又可以拆解成 3 个子问题（图 2-12）。1）有多少架钢琴；2）钢琴每年要调几次音。3）调一次得多长时间。

现在我们一个个去解決这些子问题。第 1 个子问题：有多少架钢琴（图 2-13）?

我们再把它拆分，首先需要知道芝加哥有多少人，其次需要知道拥有钢琴的人所占的比例。芝加哥的人ロ可以通过网络查出来，大概有 250 万人。有钢琴的人占的比例是多少？具体数据不知道，但是我们可以猜一下。钢琴对普通家庭来说比较贵，而且钢琴占地较大，不方便放在家里，所以我们猜家庭拥有钢琴的比例是 1%。为什么是 1%，不是 5% 呢？因为 1% 通常表示概率极低，有的机构拥有钢琴数量比个人多，例如音乐学院，所以我们再猜个数字，大概是 2% 左右。有了这些数据，就可以算出芝加哥大概有 5 万架钢琴。

下面来看第 2 个和第 3 个子问题（图 2-14）。

第 2 个子向题：钢琴每年要调几次音？钢琴调音师属于稀缺行业，人肯定不多，钢琴也不像吉他需要频繁地调音，估计是一年 1 次。

第 3 个子问题：调一次得多长时间？大概是 2 小时。

第 4 个子问题：一位调音师每年工作多长时间呢（图 2-15）?

美国每年有四个星期是假期，一年大概有 50 个星期。按一周工作 5 天，每天 8 小时来算，这三个数相乘，就可以得到一位调音师每年工作时间是 2000 小时。但是钢琴调音师要四处跑，路上肯定要花时间，所以减去 20% 用在路上的时间，调音师每年大概工作 1600（2000-2000x20%）小时。

现在我们把 4 个子问题汇总一下（图 2-16）。全部钢琴调音师 1 年的总工作时间是 3 个子问题的数字相乘，一共是 10 万小时，而调音师每年工作 1600 个小时，我们用全部钢琴调音师 1 年的总工作时间，除以一位调音师每年工作时间，就得到了 62.5。再四舍五入，费米预測芝加哥大概有 63 位调音师。

这个答案准不准呢？后来费米找到了一张芝加哥钢琴调音师的名单，上面一共有 83 人，有不少人名还是重复的。所以费米估算出来的结果已经相当准了。

#### 2.2.3 注意事项

需要注意的是，逻辑树分析方法在解决业务问题时，经常不是单独存在的，会融合在其他分析方法里，辅助解決问题。在后面其他分析方法的学习中，你会看到使用了逻辑树的拆解图，来将一个复杂题拆解成各个子问题。

### 2.3 行业分析方法

#### 2.3.1 什么是行业分析方法？有什么用？

什么时候需要进行行业分析呢？当个人在对自己进行职业规划，思考选择哪个行业更好的时候；当公司需要对外部环境或者行业竞争对手有所了解，制定发展规划的时候；当面对重大问题，需要分析行业问题的时候。

如何进行行业分析呢？就是用 PEST 分析方法。PEST 分析方法是对公司发展宏观环境的分析，所以经常用于行业分析。通常是从政策、经済、社会和技术这四个方面来分析的（图 2-17）。

#### 2.3.2 如何使用行业分析方法？

现在通过一个具体的例子来看下如何应用 PEST 分析方法。政策环境主要包括政府的政策、法律等。例如可以从这样几个问题去展开研究相关法律有哪些？对公司有什么影响？投资政策有哪些？对公司有什么影响？最新的税收政策是什么？对公司有什么影响？图 2-18 是艾瑞网《2018 年中国少儿编程行业研究报告》的政策环境分析。

经济环境主要指一个国家的国民收入、消费者的收入水平等。经済环境決定着公司未来市场能做多大。图 2-19 是艾瑞网《2018 年中国少儿编程行业研究报告》的经环境分析，从中可以得出教育重要性促使支出提升。社会环境主要包括一个地区的人口、年龄、收入分布、购买习惯、教育水平等。

图 2-20 是艾瑞网《2018 年中国少儿编程行业研究报告》的社会环境分析，从中可以得出适龄人口数量的增长促使家长着眼未来。技术环境是指外部技术对公司发展的影响。图 2-21 是艾瑞网《2018 年中国少儿编程行业研究报告》的技术环境分析，包括 5G 技术、大数据等。

### 2.4 多维度拆解分析方法 

#### 2.4.1 什么是多维度拆解分析方法？

对于多维度拆解分析方法，要理解两个关键词：维度、拆解。我们通过一个案例来说明（图 2-22）。老妈看扎扎单身多年，给她介绍相亲对象。

老妈：「这个男生很优秀。」

扎扎：「怎么优秀了？」

老妈：「你看这小伙子，个字高，长得又帅，而且家庭条件也不错。」

扎扎：「哦，原来是个高富帅呀。什么是维度呢？」

老妈从不同的角度来看这个男生，这里的角度就是维度。什么是拆解呢？拆解其实就是做加法，A = 维度 1 + 维度 2 + 维度 3 + ......，上面的例子中，老妈把优秀拆解成个子高、家庭背景好、长得帅（图 2-23）。也就是优秀 = 个子高（维度 1） + 家庭背景好（维度 2） + 长得帅（维度 3）。

#### 2.4.2 多维度拆解分析方法有什么用？

我们先来看一个案例。2012 年中国 15-59 岁的劳动年人口数量为 9.37 亿人，比上年末少 345 万人，下降幅度为 0.6 个百分点。这是多年增长后劳动年龄人口首次下降。这一人口结构变化趋势意味着在中国人口红利消失，老龄化人口越来越多。如果你的亲去医院看病，不知选择哪家医院更好，这时候你学到的分析方法能起到非常关键的作用。

假设在每个医院最近收治的 1000 例患者中，A 医院有 900 例患者存活。然而，B 医院只有 800 例患者存活（图 2-24）。这样看起来，A 医院的存活率更高，应该选择 A 医院。你的选择真的是正确的吗？现在我们使用多维度拆解分析方法来看下。

光看患者整体时，我们可能注意不到「数据构成要素的差异」。现在根据患者的健康状況，我们将每家医院入院的总人数拆解为两组，一组是轻症患者，一组是重症患者（图 2-25）。然后我们再来计算患者存活率，会有什么发现呢？我们来比较 A 医院和 B 医院的重症患者组。

A 医院有 100 例患者入院时是重症患者，其中 20 例存活。B 医院有 400 例患者入院时是重症患者，其中 200 例被救活了。所以，对于重症患者，去 B 医院的存活率更高，是更好的选择（图 2-26）。

那如果亲人入院时是轻症患者呢？用同样的方法分析，出人意料，轻症患者在 B 医院的生存率也超过了 A 医院的生存率，B 医院依旧是更好的选择。通过多维度拆解数据，我们发现了和一开始截然相反的结论，这种现象被称为「辛普森悖论」（Simpson' s Paradox），也就是在有些情况下，考察数据整体和考察数据的不同部分，会得到相反的结论。

只看数据整体，我们可能注意不到「数据内部各个部分构成的差异」。如果忽略这种差异进行比较，就有可能导致无法察觉该差异所造成的影响。正如前面的案例，关注数据整体（入院的全部患者）和关注数据内部的不同部分（按健康状态将患者拆解为两组数据），就看到了不同的风景。这就好比我们玩过的俄罗斯套娃，整体看是一个，拆解开以后里面还有其他东西（图 2-27）。

所以，我们需要从多个维度去观察数据，并相互验证，才能得出相对可靠的结论。例如我们可以把用户拆解成：用户 = 老用户（维度 1） + 新用户（维度 2），从而可以看到老用户和新用户的数据表现分别是什么。辛普森悖论时不时出现在现实生活中。英国一项调查显示，在 20 年里，吸烟者生存率高于不吸烟者。但是把参与者按年龄维度分组后，发现不吸烟组人群的平均年龄显著较高，所以年龄才是导致不吸烟组生存率低的原因。

#### 2.4.3 如何使用多维度拆解分析方法

那么问题就来了，从哪些维度去拆解呢？一般会从指标构成或者业务流程的维度来拆解。

1、从指标构成来拆解。

从指标的定义来看指标的构成。例如，某店铺最近做了一个活动，但是活动后发现预期销售额没达成，原因是什么呢？可以从指标定义来拆解，销售额 = 新用户销售额 + 老用户销售额，所以销售额可以拆解为新用户销售额、老用户销售额。然后可以继续拆解新用户的转化和老用户的复购：新用户销售额 = 新用户数 x 转化率 x 新用户客单价；老用户销售额 = 老用户数 x 复购率 x 老用户客单价。

这样拆解后，有利于后续找到原因来制定对应的策。如果是「新用户」导致的销售额目标没达成，可以对新用户发小额无门槛的折扣券，因为新用户往往还没有对店铺建立信任，不会第一次就购买很多。如果是「老用户」导致的销售额目标没达成，可以对老用户发高额满折扣券，起到提升复购率的效果。

2、从业务流程来拆解。

按业务流程进行拆解分析，例如按用户购买产品的业务流程来拆解。现在通过一个例子来学习如何使用多维度拆解分析方法。一家线上店铺做了一波推广，老板想看看推广效果如何，你该怎么办呢？推广效果最直观的是看用户增长了多少，定义衡量指标为新增用户数。这里的新増用户数是指看到推广渠道的广告，进入店铺的人数。我们可以按指标构成如城市、性别、渠道来拆解新増用户数（图 2-28）。

按照地域细分，考察一线、二线、三线及以下等不同城市的新增用户数量情。按照性别细分，考察男性用户、女性用户分别是多少；按照渠道细分，考察公众号、百度、头条哪个渠道的用户来源多。

从地域维度（图 2-29） 来看，北京、上海等一线城市新增用户多，说明一线城市的用户对公司产品更感兴趣。从渠道维度（图 2-31） 来看，假设渠道 A 新增用户数最多，渠道 B 新增用户数接近 A，渠道 C 新増用户数最少。那么，渠道 A、渠道 B、渠道 C 哪个用户渠道的质量更高呢？

店铺做推广的目的，最终是为了给店铺带来销量，所以我们可以从业务流程来拆解分析，考察哪个渠道来的用户更愿意在店铺购买。我们可以继续从业务流程来拆解渠道数据。用户购买的业务流程，可以分为 4 步第 1 步，看到渠道的广告；第 2 步，被广告吸引进入店铺；第 3 步，在店铺选择感兴趣的商品第 4 步，选择好商品，最终決定购买。按业务流程拆解后，我们看到虽然渠道 A 带来的用户多，但是最终购买人数却低于渠道 B 带来的用户数。所以，渠道 B 的用户质量更高（图 2-32）。

再来看一个案例，来更加熟悉多维度拆解分析方法。有一款 App，在观察用户留存率的时候，发现低年龄用户的留存率比高年龄用户的留存率低很多。这里的低年龄用户是指 18 岁以下的用户，例如初中生、高中生。进一步观察发现，这些低年龄的用户大多是使用一下 App 就再也不用了。根据这个问题，可以从指标构成、业务流程来拆解问题。

1、从指标构成拆解。

如果把 18 岁以下都算作低龄，那么这个划分又不够细，因为 18 岁以下包含了 3 个学生阶段：小学生、初中生、高中生。不同学生阶段的用户行为差异是比较大的，所以可以按年龄维度来细分（图 2-33）。由此得到分析维度 1：不同的低龄用户表现是否有差异？

2、从业务流程拆解。

新用户使用 Ap 的业务流程如下：

第 1 步，新用户下载 App，然后注册。

第 2 步，用户看到 App 首页推荐的内容。新用户注册的时候，App 会让用户选择感兴趣的话题，然后 App 根据用户的选择，给他推荐相关的内容。例如豆、小红书等 App 就是这样的注册流程。

推荐的内容如果不准确，会影响用户的体验。例如我挑选兴趣的时候选了电影，结果推荐系统给我推荐了旅行，那跟我的预期就会差很远，就会觉得这个平台没有我想看的信息，自然就会离开。所以，这一步我们可以提出问题：推荐的内容可能不是低年龄用户想看的，从而导致留存率差。

第 3 步，用户还可能会在 App 里搜索自己感兴趣的内容。当用户下载了这个 App 注册的时候，希望在这个平台上找到对自己有价值的东西。如果没找到，那用户很大概率会流失。这一步我们可以提出题：低年龄用户可能搜不到想看的内容，从而导致留存率差。

由此我们得到分析维度 2 和分析维度 3（图 2-34）。从指标构成和业务流程拆解，我们就将一个复杂的问题拆解为 3 个子问题（图 2-35）。

#### 2.4.4 注意事项

前面我们讲到，只看数据整体，可能注意不到「数据内部各个部分构成的差异」，导致「辛普森悖论」。所以在有些情况下，考察数据整体和考察数据的不同部分，会得到相反的结论。

#### 2.4.5 总结

可以用图 2-36 记住多维度拆解分析方法。

第 1 个问题：是什么？对于多维度拆解分析方法要理解两个词：一个是「维度」，即我们日常生活中说的角度；另一个是「拆解」，其实就是做加法，问题 = 维度 1 + 维度 2 + ......。

第 2 个问题：有什么用？有两个作用。第一个作用是，只看数据整体，我们可能注意不到「数据内部各个部分构成的差异」，所以需要拆解数据来分析；第二个作用是，遇到一个复杂题，不知道怎么解決的时候，我们可以用多维度拆解分析方法将一个复杂问题变成可以解決的子问题。这背后的原理其实就是我们之前讲过的逻辑树分析方法。

第 3 个问题：如何用？一般会从指标构成或者业务流程的维度来拆解。1） 从指标构成来拆解：分析单一指标的构成。例如单一指标为用户，而用户又可以拆解为新用户、老用户。2）从业务流程来拆解：按业务流程进行拆解分析，例如不同渠道的用户付费率。

第 4 个问题：注意事项。要注意「辛普森悖论」，也就是在有些情况下，考察数据整体和考察数据的不同部分，会得到相反的结论。使用多维度拆解分析方法，可以防止「辛普森悖论」。

### 2.5 对比分析方法

#### 5.1 什么是对比分析方法？有什么用

对比分析方法在我们生活中经常遇到。女友天天对我进行灵魂拷问：

我和对面那个女孩谁胖？这就是对比分析方法。女友通过对比分析方法来判断自己体重是不是出了问题。在数据分析中，我们通过对比分析方法，来追踪业务是否有问题。例如，我的公众号日活跃率是 4%，你说是高还是低？这个日活跃率有题吗？这时候，就需要用对比分析方法来追踪业务是不是有问题。正所谓，没有对比就没有好坏。

我们再来看一个对比分析方法在生活中应用的案例。为了讨好女友，我准备给她买件衣服，在商场看中一件衣服要 299 元。我心里想，299 元是不是有点小贵。店主过来指着另一件衣服说：「你看这件衣服，只要 899 元！」我一比较，顿时觉得 299 元这件衣服挺实惠的。

发现没有？899 元的那件衣服根本就不是拿来卖的，而是用来让你对比的。心理学家给这种现象发明了一个术语叫作价格罐定（图 2-37），也就是通过和价格锚点对比，一些商品会卖得更好。《经学人》是美国的畅销经济学杂志，它做过一个订阅实验，给用户以下 3 个选项进行选择：1）只订阅电子版，59 美元一年； 2）只订阅纸质版，125 美元一年。3）订阅纸质版 + 电子版，125 美元一年。

第 2 个选项和第 3 个选项的价格一样，但是第 3 个选项提供的服务更多。实验结果显示，只有 16% 的人选择了第 1 个选项，有 84% 的人选了第 3 个选项，也就是有更多的人愿意花更多的钱去订杂志（图 2-38）。

如果把第 2 个选项去掉，对用户有影响吗？去掉第 2 个选项，选择 125 美元（原来的第 3 个选项）的用户減少到了 32%（图 2-39）。如果没有之前第 2 个选项，用户会和第 1 个选项对比，发现花 125 美元不划算。当有第 2 个选项的时候，用户就会将比较对象成第 2 个选项，这样オ能体现出第 3 个选项的优惠。

#### 2.5.2 如何使用对比分析方法？

想要进行对比分析，我们要弄清楚两个问题：和谁比，如何比较。

1、和谁比。和谁比一般分为两种：和自己比，和行业比。

雷军在小米上市之前做了个公开承诺：「小米的硬件综合净利润率永远不会超过 5%。如有超过的部分，将超出部分全部返还给用户。」我们用对比分析方法来分析下这句话背后的真实含义。

和自己比。在小米的招股说明书中可以看到，小米 2015 年的硬件毛利率是 -0.3%，2016 年是 3.4%。净利润率 = 毛利率 - 其他成本，所以再考虑上其他成本，小米和自己的历史业绩比，硬件净利润率肯定小于 5%。

和行业比。遇到问题，想知道是行业趋势还是自身原因，就可以和行业值对比。作为硬件行业的领头羊海尔公司，在 2017 年净利润率是 4.3%，也达不到 5%。

所以，通过对比分析方法可以看出，硬件净利润率能达到 5% 的公司几乎就没有，所以雷军这个承诺其实是一种经过数据分析得出的结论，既不会让小米陷入无法实现承诺的困境，又可以在用户心中留下「小米性价比高」的产品形象。

2、如何比较。前面我们了解了对比分析方法的第一个问题：和谁比。现在我们来看第二个问题：如何比较。一般从 3 个维度比较：数据整体的大小、数据整体的波动、趋势变化（图 2-40）。

数据整体的大小。某些指标可用来衡量整体数据的大小。常用的是平均值、中位数，或者某个业务指标。

数据整体的波动。标准差除以平均值得到的值叫作变异系数。变异系数可用来量整体数据的波动情况。

趋势变化。趋势变化是从时间维度来看数据随着时间发生的变化。常用的方法是时间折线图，环比和同比。时间折线图是以时间为横轴、数据为纵轴绘制的折线图。从时间折线图上可以了解数据从过去到现在发生了哪些变化，还可以通过过去的变化预测未来的动向。环比是和上一个时间段对比，用于观察短期的数据集。例如本周和上周对比，本月和上月对比（某数据在 2020 年 12 月比 2020 年 11 月下降 10%）同比是与去年同一个时间段进行对比，用于观察长期的数据集。例如某数据在 2020 年 12 月比 2019 年 12 月下降 10%（图 2-41）。

前面我们知道了比较的两个问题：和谁比、如何比较。在实际应用对比分析方法的时候，为了防止遗漏我们可以用图 2-42 的「对比表格」来记录比较的维度，防止遗漏重要信息。其中，第一列是比较的维度，中间几列是比较对象，最后一列是比较结论，用于记录每一行的比较结果。

#### 2.5.3 注意事项

在进行比较的时候，要注意比较对象的规模要一致。例如，折线图（图 2-43） 的横轴是月份，纵轴是每天平均销售额。从这个折线图反映的趋势来看，似乎可以得出比较结论：地区 B 的业务没有其他地区的好。

当你把这个图表和分析结论拿给领导看时，领导说：「这些地区的店铺数量不样，直接比较可以吗？」原来图片里计的是公司在各个地区的店铺总销量，各地区店铺数量不ー样，也会影响所在地区的销售额。这就好比，苏宁易购在某一线城市和某三线城市的店铺数量不ー样，两地每天的平均销售额差别也很大（图 2-44）。

所以，比较对象的规模要一致，这样オ有可比性。那么这个案例里的问题如何解决呢？可以用每个地区的销售额除以店铺数量，这样就可以算出各个区域的单个店铺的平均销售额。从图 2-45 可以发现，与其他地区相比，地区 B 的销售业绩并不差。

A/B 测试的背后也是用了对比分析方法。什么是 A/B 测试？做过 App 功能设计的读者朋友可能经常会面临多个设计方案的选择，例如某个按钮是用蓝色还是黄色，是放左边还是放右边。传统的解決方法通常是集体讨论表決，或者由某位专家或领导来拍板，实在決定不了时也有随机选ー个上线的。虽然传统解办法多数情況下也是有效的，但 A/B 测试可能是解决这类问题的一个更好的方法。

简单来说，A/B 测试就是为同一个目标制定两个版本，这两个版本只有某个方面不ー样，其他方面保持一致。例如两个版本只有按钮的颜色不ー样，让一部分用户使用 A 版本（实验组）, 另一部分用户使用 B 版本（对照组）。试运行一段时间后，分别统计两组用户的表现，然后对两组数据进行对比分析，最后选择效果更好的版本正式发布给全部用户（图 2-46）。

A/B 试是怎么来的呢？2007 年，谷歌的产品经理丹·西罗克是奥巴马竞选团队「新媒体分析部门」的负责人。他用 A/B 试优化了竞选网站的「捐款」按钮，使得捐款金额増加了 5700 万美元。他对这个「捐款」按钮做了什么呢？西罗克在奥巴马捐赠页面上进行了 A/B 测试，发现：1）对于第一次访问竟选网站的用户，按钮文字是「捐赠并领取礼物」效果最好。2）对于长期访问竟选网站，但是从来没有捐款的用户，按钮文字是「捐款」效果最好。3）对于过去曾经捐过款的用户，按钮文字是「捐助」效果最好。

在奥巴马就任总统后，西罗克创办了一家网站优化公司（Optimizely），这家公司的客户名单里是各个总统的竞选团队。现在 A/B 測试已经广泛应用于互联网公司的产品优化。例如，缤客是一家线上国际旅游公司，类似于携程。这家公司每年要做大量的 A/B 试来提升用户体验 这家公司是如何做 A/B 测试的呢？

一般而言，如果一家公司要做 A/B 测试，要设立一个专门的团队。但是编客通过内部一个专门做 A/B 測试的平台，把 A/B 测试这件事情变得简单，几乎每个员工都可以方便地进行各种測试来验证自己的想法。在这家公司做 A/B 测试的流程是这样的：1）发起申请，在申请里写清楚：为什么做这次 A/B 测试？A/B 測试的受益者是用户还是旅行社？以前做过哪些 A/B 测试。2）如果申请通过，A/B 测试就上线了。平台会自动监控测试过程和生成分析报告。

再来看一个案例。在经形势不好的时候，拉动消有一个办法是发消費券。用户领取消费券后，在结账的时候就可以抵扣对应的金额。但是消券还有个不好的影响一日本曾经向用户发放过消費券，但是效果却不好。因为日不发消费券了，消费很快就会下降，也就是没有长期效果。为了拉动受疫情影响的消费，杭州在 2020 年 3 月底到 4 月向本地居民发放了消费券，效果如何呢？北京大学光华管理学院的研究团队和蚂蚁金服研究院联合发布的一份报告，对这次消费券发放效果进行了研究。

研究团队使用的方法就是 A/B 测试。实验组是杭州 3 月 27 日第一期消费券发放后的用户，对照组是没有领消费券的用户。在消费券过期后，与对照组相比，实验组的消费没有明显少。也就是说，用户并没有因为之前用了消费券，之后就減少消费，所以这次消费券发放效果很好这次效果好的原因在于，之前日本发的是实体现金券，而这次杭州发的是数字消费券。数字消费券的一大好处就是方便，用户在支付宝、微信等平台上就能领取。

#### 2.5.4 总结

可以用图 2-47 记住对比分析方法。

第 1 个问题：是什么？当我们对几个对象进行比较的时候，就要用到对比分析方法。正所谓，没有对比就没有好坏。

第 2 个问题：有什么用？在日常生活中，我们经常会用到对比分析方法，例如女友通过对比分析方法来判断自己体重是不是出了问题。在心理学中有「价格锚定」，通过和价格锚点对比，一些商品会卖得更好。在数据分析中，我们通过对比分析方法，来追踪业务是否有问题，例如 A/B 测试。

第 3 个问题：如何用？进行对比分析，我们要弄清楚两个问题：和谁比，如何比较。和谁比是指，要弄清楚是和自己比还是和行业比。和自己比是指和自己过去的历史数据比较。遇到问题，想知道是行业趋势，还是自身原因，就可以和行业值对比。对于如何比较，一般我们有以下 3 个维度：1）用平均值、中位数，或者某个业务指标来衡量整体数据的大小。2）用变异系数来衡量整体数据的波动情况。3）从时间维度来看数据随着时间发生的趋势变化。常用的方法是时间折线图、环比和同比。

我给出了一个对比表格模板（图 2-48），你可以把它看作一个万能模板，防止遗漏比较的信息。每当进行对比分析的时候，把这个表格填满就可以了。

第 4 个问题：注意事项。在进行比较的时候，要注意比较对象的规模保持一致。

### 2.6 假设检验分析方法

#### 2.6.1 什么是假设检验分析方法？

假设检验分析方法底层思想其实很简单，就是逻辑推理。这个逻辑推理，在我们生活中无处不在。如果你看过《神探狄仁杰》《白夜追凶》《唐人街探案》这些破案片，就会发现，剧中的破案高手都有一个破案套路，那就是先假设嫌疑人无罪，然后找证据，如果有足够的证据来证明，最后才宣判嫌疑人有罪。同样在现实中，法官在审理案件的过程中，也首先会假设被告方无罪，而指控方的工作就是搜集证据来说服法官或陪审团，最后得出罪犯有罪的结论。

我们平常说某个人心思细、逻辑严谨，其实你也可以做到，那就是掌握逻辑推理的方法：假设检验分析。假设检验分析方法是一种使用数据来做決策的过程。假设检验分析方法分为 3 步（图 2-49）

1、提出假设。根据要解決的问题，提出假设。例如警奚破案的时候会根据犯罪现场提出假设：这个人有可能是嫌疑人。

2、收集证据。通过收集证据来证明。例如察通过收集嫌疑犯的犯罪数据，来作为证据。

3、得出结论。这里的结论不是你主观猜想出来的，而是依靠找到的证据得到的结论。例如警察不能主观地去猜想，然后下结论说这个人是罪犯，而是要通过收集的数据（证据）来证明这个人是不是罪犯。

#### 2.6.2 假设检验分析方法有什么用？

由于假设检验分析方法背后的原理是逻辑推理，所以学会这个方法以后，可以显著提高我们的逻辑思维能力。

假设检验分析方法的另一个作用是可以分析问题发生的原因，也叫作归因分析（图 2-50）。例如面试过程中，面试官问「为什么申请量上升了，放款量反而下降了？」这类「为什么」的题是工作中经常遇到的场景，例如是什么原因导致活跃率下降等。这类问题就是分析原因。通过找到问题发生的原因，才能根据原因制定对应的策略。

下面通过案例看下假设检验分析方法是如何起作用的。电影《決战中途岛》讲述的是第二次世界大战中，太平洋战争重要的转折点一中途岛海战。在电影里，美军发现了日军的一段密码。破译密码后，得到一个关键词：AF。这表示日军将要在 AF 岛发动进攻可是，这个 AF 到底代表哪个岛呢？美军内部出现了两种意见，夏威夷情报处认为 AF 是中途岛，而华盛顿情报处认为 AF 是阿留申群岛。如果你是作战的指挥官该听谁的呢？

你可能会说，在两个岛上都部署航母，这样做到万无一失。理想是美好的，但是现实却是残酷的。因为当时美国的航母比日军少，它只能把有限的资源集中放到一个岛上。确定这个岛是中途岛还是阿留申群岛，直接決定了战局的胜败。现在假设检验分析方法派上了用场，目前有两个假设：假设 1 是 AF 是中途岛，假设 2 是 AF 是阿留申群岛（图 2-51）。

如何验证假设呢？需要收集证据。夏威夷海军情报处的负责人想到，很久以前，他也捕获过一条包含 AF 的信息，当时信息显示：日军飞机的航线会经过 AF。根据那次的观察，他认为 AF 就是中途岛。为了验证这个假设，美军发出了一个假情报：中途岛上的淡水处理器坏了，为的是看到日军获取到假情报的反应。果然不久就截获到日军向外发送的情报信息：AF 缺淡水。

这就验证了假设，得出结论：AF 是中途岛。指挥官根据这个分析结论做出了决策，把有限的兵力埋伏在中途岛。最终美军在中途岛大胜，从而扭转了整个太平洋战场的局势。

#### 2.6.3 如何使用假设检验分析方法？

前面我们提到假设检验分析方法的步骤分为 3 步：提出假设、收集证据、得出结论。那么现在问题就来了，人们建立假设时，很容易依赖之前的经验做出假设，这可能会无意识地排除一些重要的假设。如何客观地提出假设呢？

我们可以按用户、产品、竟品这 3 个维度提出假设（图 2-52），来检查提出的假设是否有遗漏。这 3 个维度分别对应公司的 3 个部门：用户对应运营部，产品对应产品部，竟品对应市场部。这 3 个维度有助于在发现问题原因以后，对应落实到具体部门上，有利于把问题说清楚。

从这 3 个维度，我们可以提出 3 种假设：1）假设用户有问题：可以从用户来源渠道这个维度来拆解分析，或者画出用户使用产品的业务流程图来分析原因；2）假设产品有问题：可以研究这段时间销售的产品是否符合用户的需求；3）假设是竞品导致的问题：可以看竟品是不是在搞什么优惠活动，用户跑到竞争对手那里了。

我们还可以从 4P 营销理论出发来提出假设。什么是 4P 营销理论呢？

4P 营销理论产生于 20 世纪 60 年代的美国，它是随着营销组合理论的提出而出现的。营销组合实际上有几十个要素，这些要素可以概括为 4 类：产品、价格、渠道、促销。1）产品：公司提供给目标市场的有形或无形产品，包括产品实体、品牌、包装、样式、服务、技术等。2）价格：用户购买产品时的价格，包括基本价格、折扣价格、付款期限及各种定价方法和定价技巧等。3）渠道：产品从生产公司到消费用户所经历的销售路径。4）促销：是指企业利用各种方法刺激用户消费，来促进销售的増长。包括广告、人员推销、营业推广等。例如买一送一、过节打折等。为了寻找销售业绩下降的原因，可以利用 4P 营销理论从 4 个维度提出假设（图 2-53）。

4P 营销理论是从公司角度出发研究产品的。还可以从用户角度出发去研究产品，也就是从用户使用产品的业务流程来检查提出的假设是否有遗漏。例如，某线上店铺最近给新会员的折扣券的领取率降低，原因是什么呢？可以先画出业务流程，根据业务流程，提出以下假设（图 2-54）。

假设 1：进入店铺的用户少？例如流量減少或者推广引入了大量低质的用户。

假设 2：想领取会员卡的用户减少？例如店铺增设了不用领卡就能领取的其他折扣券，分散了用户的注意力。

假设 3：成为会员后，想领折扣券的用户减少？例如折扣券需要达到某个门槛才能使用，门槛设置太高对用户失去吸引力。

从业务流程提出假设，这里其实是用到了我们之前讲过的多维度拆解分析方法。下面通过一个案例来看下如何使用假设检验分析方法来查找问题发生的原因。解读报表里数据的波动是数据分析的基本功，在面试中会经常考。提出报表解读问题之前，对方通常会给你一个表格。例如图 2-55 里的表格是一家公司 App 的一周日活跃率，老板交给你以下任务：从数据中你看到了什么问题？你觉得背后的原因是什么？

遇到这类问题，需要先对数据进行可视化，因为光从表格我们无法直观地看出数据随时间变化的趋势。根据这个表格，我们可以绘制出折线图（图 2-56），看下数据随着时间变化的趋势。接下来怎么分析呢？你可能会说，发现了一个问题，周六数据下降了。

之前我们讲到对比分析方法的时候，说到没有对比，就没有好坏。周六的数据和这周数据比较是下降了，那么有没有可能是这个 App 本身每周六就不活跃，因为周末放假大家想体息？所以，为了更好地对比分析，对于报表解读问题，你还要问面试官往前几周的数据是怎样的，这样可以从整体上看出数据在一个较长时间范围内是怎样变化的。同时，可以看出数据变化是规律的，还是真的有问题。你可以这样问面试官：前几周的数据是怎样的？我想和这周数据进行对比分析这时候面试官会给你前几周的数据，假设是图 2-57 的情況。

通过和前几周数据对比，发现这个 App 的规律是每周末的活跃率都有稍微的下降。但是这周六和前几周的周六相比，下降更明显。我们可以计算出前几周周六的平均日活跃率，和这周六的日活率比较，假设发现本周六的日活率下降了 5%。所以，我们把问题明确为：本周六的日活率比前几周周六的平均日活跃率下降了 5%。那么，本周六日活率为什么突然下降了呢？如何查找问题发生的原因呢？这时候假设检验分析方法就派上用场了。假设检验分析方法的第 1 步是提出假设。如何提出假设呢？我们可以使用前面讲到的方法，从用户、产品、竟品这 3 个维度提出假设（图 2-58）。

现在我们来看假设检验分析方法的第 2 步：收集证据。为了理清楚思路，在开始分析之前，可以做一个图，将问题、假设、数据从上至下连起来（图 2-59）。

对于这个案例，问题是与前几周周六相比，本周六的日活跃率下降了 5%。我们提出了 3 个假设，为了验证假设，我们需要收集证据。对于假设 1 的用户问题，我们需要从用户数据中找出证据。对于假设 2 的产品问题，我们需要从产品数据中找出证据。对于假设 3 的品问题，我们需要从竞品数据中找出证据。也就是说，要找什么数据，是与你要验证的假设有关系。根据第 2 步收集的证据，我们得出第 3 步的结论。

这张图就像我们走路的地图一样，不管我们后面分析到哪里，都可以从这张地图上清楚地看到我们位于地图的哪个位置。我们先来看第 1 个假设：用户有问题。

如果是用户方面的问题，那我们可以找到对应的用户数据。将活跃用户数按渠道维度拆解，发现来自渠道 B 的活跃用户数出现了明显的下跌（这里按渠道拆解，用到了我们之前讲过的多维度拆解分析方法）。最后可以得出结论，获取用户的渠道 B 有问题，从而导致了本周六的日活跃率下跌（图 2-60

我们再来看第 2 个假设：产品有问题。

这时候就需要找相关部门了解情，一起去排查向题了。例如，服务器是不是崩溃了？最近是否上线了产品新版本，其中新功能有问题？或者是没有处理产品版本问题导致？甚至可以去问客服，最近是不是有大量投诉，投诉原因是什么？还可以查看用户对产品满意度方面的数据。假设最后经过调查，产品没有问题（图 2-61）

我们再来看假设 3：日活跃率下降是竞品问题导致的。

竞品问题是指竞争对手有什么大动作，例如竞争对手在搞活动促销，用户都跑到竞争对手那边了。通过调研发现，竟品最近没有搞大的活动。最后得出结论：没有竞品问题（图 2-62）。

整个分析思路如图 2-63 所示。你可能会问了，既然假设 1 发现了问题，为什么还要去验证假设 2 和假设 3? 这是因为一个问题发生可能是由多个原因造成的，需要找到不同的原因，这样后面策的时候，才能分别根据不同原因制定不同的策略。

那么分析到这里就结束了吗？当然不是，我们需要多问几个为什么：为什么渠道 B 的数据下跌了？这时候可以跟负责渠道推广的同事了解情况，例如发现渠道 B 的投放活动在周六那天正好结束了，导致 App 的新用户少了，从而导致了日活跃率下降。综上，假设检验分析方法有 3 个步骤：提出假设，收集证据，得出结论。得出结论以后，分析还没有停止，要多问几个为什么，然后用数据去验证可能的原因。不断重复假设这个分析过程，直到找到问题的根源（图 2-64）。

在假设检验里面我们还要用到其他分析方法，例如刚才的案例在提出问题部分，使用了对比分析方法；在搜集证据的过程中，使用了多维度拆解分析方法对用户按渠道进行拆解。

#### 2.6.4 注意事项

假设检验分析方法需要注意 4 个地方。1）第 3 步得出的结论不是主观猜想出来的，而是要依靠找到的证据去证明；2）假设检验的 3 步是一个需要不断重复的过程。在得出结论以后，分析还没有停止，要多问几个为什么，然后用数据去验证。不断重复假设分析的这个过程，直到找到问题的根源；3）在使用假设检验分析方法的过程中，还要用到其他分析方法；4）在开始分析之前，为了理清楚思路，可以做一个假设检验分析图（图 2-65），将问题、假设、数据从上至下连起来。

下面来看一个案例：有一款 App，在观察用户留存率的时候，发现低年用户的留存率比高年龄用户的留存率低很多（图 2-66）。这里的低年龄用户是指 18 岁以下的用户，例如初中生、高中生。进一步观察发现，这些低年龄的用户大多是使用一下 App 就再也不用了。为什么低年用户的留存率很差呢？

有可能是低年龄用户白天还在上学，平日不能玩手机，只能周未玩，这导致低年用户留存率比较差。这个假设听起来很合理，也符合逻辑，但真实情况是这样吗？我们需要用数据来验证。为了不让提出的假设有遗漏，我们可以从业务流程提出假设（图 2-67）。

第 1 步，新用户下载 App，然后注册。

第 2 步，用户看到 App 首页推荐的内容。新用户注册的时候，App 会让用户选择最感兴趣的话题，然后 App 根据用户的择，给他推荐相关的内容。推荐的内容如果不准确，会影响用户的体验。例如用户挑选兴趣的时候选了电影，结果系统给他推荐了旅行，那跟用户的预期就会差很远，用户就会觉得这个平台没有他想看的信息，自然就会离开。所以，这一步我们可以提出假设：推荐的内容不是低年龄用户想看的，从而导致留存率差。

第 3 步，用户还可能会在 App 里查找自己感兴的内容。当用户下载了这个 App 注册的时候，希望在这个平台上找到对自己有价值的东西。如果没找到，那用户很大概率会流失。这一步我们可以提出假设：低年龄用户搜不到想看的，从而导致留存率差。

这样我们就提出了 3 个假设（图 2-68）。

假设 1：低年龄用户白天上学没时间用 App，周末才玩手机，可能导致留存率差。对于这一点我们可以通过用户的留存数据来验证。

假设 2：推荐的内容不是低年龄用户喜欢的。这一点我们可以通过搜索相关的数据来验证。

假设 3：低年龄用户搜不到喜欢的内容。这一点我们可以通过与用户兴趣相关的数据来验证。

首先来看假设 1：低年龄用户白天还在上学，平日上课不能玩手机，只能周末玩手机，这可能导致低年龄用户留存率比较差。

之前我们把 18 岁以下用户都算在低年龄用户，但是 18 岁以下包含了 3 个学生阶段：小学生、初中生、高中生。如果我们按年龄维度来拆解用户，来比较他们的留存率，他们会不会有什么不同呢？将低年龄用户按年龄划分成 3 组，分别是小学生、初中生、高中生，然后和正常留存率的高年用户去比较。这里要用到对比分析方法，我们把之前讲过的对比万能模板拿出来。通过比较次日留存率，在比較表格里填好对应的数值（图 2-69）。这里高年龄的次日留存率作为正常值，和小学生、初中生、高中生的次日留存率比较。表格里空白的地方不是本次比较的范围，所以没有填写。

通过对比，可以发现：1）小学生和初中生的次日留存率很差；2）高中生的次日留存率和高年龄用户的次留存率没有太大的差别。所以导致留存率差的是小学生和初中生这一部分的低年龄用户，后面的分析也把研究对象细化到小学生和初中生。前面我们提出的假设是，低年龄用户白天上课不能玩手机，只能周末玩手机。

为了验证这一假设，我们需要比较低年龄用户工作日的留存率和周末的留存率。如果工作日的留存率低，但是周末的留存率高，可以证明我们的假设是成立的。因为工作日上课，没时间玩手机，留存率差是正常，周末玩手机了，留存率就不差了。相反，如果工作日的留存率低，周末的留存率也低，那可以说明我们的假设是不成立的。

通过比较表格里的数据发现，用户工作日和周末的留存率一样差（图 2-70），留存率并不会在周末恢复回来。可以得出的结论是假设不成立，也就是在周末可以用手机的时间段，这部分用户也没有回来。通过收集证据，我们发现假设 1 不成立（图 2-71），也就是在周未可以用手机的时间段，这部分用户也没有回来。

现在，我们来看第 2 个假设：推荐的内容不是低年龄用户喜欢的。

根据分析目标，我们把用户感兴趣的内容和 App 推荐给他们的内容进行比较，就可以看出 App 推荐的是不是用户喜欢的了。对于用户感兴趣的内容，可以找用户兴趣数据，这些数据是在用户注册 App 时选择的感兴趣话题，这部分数据都记录在 App 数据库中。然后分析这部分用户对什么最感兴趣通过对小学生的兴趣进行排序，发现这部分用户对壁纸、游戏最感兴趣；通过对初中生的兴趣进行排序，发现这部分用户对游戏、动漫最感兴趣。

我们再来看下 App 推荐给这部分用户的内容是什么。通过分析数据，发现 App 在给用户推荐的时候，没有对低年用户细分，也就是小学生、初中生、高中生推荐的都是电影、读书这类话题（图 2-72）。这样一对比就可以发现：App 推荐的内容不是用户喜欢的。这就证明了假设 2 成立（图 2-73），也就是 App 推荐的内容不是这部分用户喜欢的。

现在我们来看假设 3：用户搜不到自己喜欢的内容，导致了留存率很差。

想要弄清楚这个问题，需要查看用户的搜索数据，看看他们想在 App 里搜到什么。根据这个分析目标，我们可以获取到小学生和初中生的搜索数据，发现他们搜索最多的是壁纸、游戏、音乐，他们搜索壁纸的需求是想找到好看的图片来当头像，但是这个 App 里面这方面的内容很少，导致用户搜不到。这就证明了假设 3 成立（图 2-74），也就是这部分用户在 App 上搜不到他们喜欢的内容。

通过假设检验分析方法，我们明确了「低年用户留存率很差」的具体情况和原因。1）小学生和初中生留存率差，高中生留存率不差。2）App 给小学生和初中生推荐的内容不是他们喜欢的，导致留存率差；3）App 里小学生和初中生喜欢的内容不多，导致他们搜不到喜欢的内容，从而导致留存率差。这个分析结论有什么用呢？

可以根据查找的原因给出建议，方便领导根据你的建议制定決策，例如：1）在资金有限的前提下，对低年龄用户做付费推广的时候，要精准投放广告，重点推广匹配 App 的用户，例如高中生；2）在做个人推荐的时候，要对用户按年龄进行细分，根据用户的喜欢推荐用户喜欢的内容；3）如果产品定位包括小学生和初中生，后期要在 App 里增加他们感兴趣的内容，例如壁纸等。

再来看一个案例：复购率下降，如何分析原因？产品 A 是专为在校学生和职场人士提供技能培训课程的。最近发现，用户的复购率非常低，比竟争对手低 50%。

复购率是重复购买频率，用于反映用户的付费频率。例如你在淘宝上买了一次商品，下次又买了一次，这就是复购。复购率低说明用户在这个平台上买过一种产品后，不愿意再买另一种产品了。为什么用户的复购率低呢？可以使用假设检验分析方法来查找原因。我们先来梳理下产品的业务流程，方便从业务流程提出假设（图 2-75 第 1 步，用户查看课程详细介绍，选择喜欢的课程；第 2 步，用户上课学习；第 3 步，助教对用户学习中遇到的问题进行答疑。

对于第 1 步，可以提出假设：老师不够好，用户在第 1 步就放弃购买课程了。对于第 2 步，可以提出假设：用户的学习效果不好。对于第 3 步，可以提出假设：助教的答疑效果不好，没有解决用户的问题。整个案例的分析过程如图 2-76 所示。

我们先来看假设 1：老师不够好。

通过对比发现，产品 A 和竞争对手聘请的都是头部老师。但是，进一步对比两个产品的课程介绍页面，发现产品 A 给用户提供的老师介绍很简单，几句话就介绍完了；而竞争对手会详细介绍老师的信息，包括个人经历、教学特点、性格等。这能帮助用户更好地了解老师，建立对课程的信任（图 2-77）。所以得出结论是假设 1 不成立，不是老师不够好。真正的原因是对课程老师介绍得不够详细（图 2-78）。

我们再来看第 2 个假设：用户上课的学习效果不好。

通过调研发现，产品 A 上课的模式是预约，例如预约 10 天后，报名的人一起上课。而竞争对手的上课模式是闯关游戏，报名了课程以后，随时可以开始上课，免去了等待时间。相比而言，用户更喜欢竞争对手的上课模式，因为它更加灵活，不会限制时间，什么时候方便什么时候学习。而产品 A 必须要等到某个固定时间オ能开课（图 2-79）。所以，假设 2 是成立的，产品 A 没有竞争对手的上课模式灵活，导致了复购率低（图 2-80）。

我们再来看第 3 个假设：答疑效果不够好。

产品 A 把助教当成了一个单纯的销售人员，在社群里每天推送的是广告，而对学员学习课程中遇到的问题，并没有实时回答。竟争对手则把助教当作了个全流程跟踪服务管理人员，他会贯穿整个学习过程，不仅 1 对 1 地点评学员作业，对提出的问题也会实时回答（图 2-81）。所以，假设 3 也是成立的（图 2-82）。

我们总结下，产品 A 复购率比竞争对手低 50%，是因为下列原因：1）在课程介绍页面，老师介绍得不够详细；2）课程采用了某个时间定时开课的模式，导致用户上课不够灵活，不能够随时加入学习，这对平日还有其他事情的用户来说，不够方便；3）助教答疑效果不好，把助教当成了一个单纯的销售人员，而不是全流程地跟踪用户，为用户服务。

#### 2.6.5 总结

可以用图 2-83 记住假设检验分析方法。

第 1 个问题：是什么？假设检验分析方法就是逻辑推理，是一种使用数据来做决策的过程。它分为 3 步：提出假设，收集证据，得出结论。

第 2 个问题：有什么用？假设检验分析方法背后的原理就是逻辑推理，所以学会这个方法以后，可以显著提高我们的逻辑思维能力。假设检验分析方法的另一个作用是可以分析问题发生的原因，也叫作归因分析。以后分析问题发生的原因，就可以使用假设检验分析方法。

第 3 个问题：如何用？可以使用 3 个方法来客观地提出假设，同时防止遗漏假设。1）从用户、产品、竟品这 3 个维度提出假设；2）从 4P 营销理论提出假设；3）从业务流程提出假设。

第 4 个问题：注意事项。需要注意 4 个地方：1）第 3 步得出的结论不是主观猜想出来的，不能是「我猜、我觉得、我认为、我感觉」，而是要依靠找到的证据去证明结论；2）假设检验这 3 步是一个需要不断重复的过程。在得出结论以后，分析还没有停止，要多问几个为什么、可能的原因是什么，然后用数据去验证可能的原因。不断重复假设分析的这个过程，直到找到问题的根源；3）在使用假设检验分析方法的过程中，还要用到其他分析方法，例如前面的案例里在第 1 步提出假设的过程中，使用了多维度拆解分析方法；在第 2 步收集证据的过程中，使用了对比分析方法。4）在开始分析之前，为了理清楚思路，可以做一个图，将问题、假设、数据从上至下连起来。

以后在使用假设检验分析方法时，只需要记住以下两张图就可以。图 2-84 是假设检验分析方法的步骤。图 2-85 是分析思路图，可以帮助你快速地将问题、假设、数据从上至下连起来。

### 2.7 相关分析方法

#### 2.7.1 什么是相关分析方法？

有时候我们研究的问题只有一种数据，例如人的身高；但是，还有另外一些问题需要研究多种数据，例如身高和体重之间的关系（图 2-86）。当我们研究两种或者两种以上的数据之间有什么关系的时候，就要用到相关分析。如果两种数据之间有关系，叫作有相关关系；如果两种数据之间没有关系叫作没有相关关系。相关分析在日常生活中随处可见，下面举几个例子。

工作压力过大会致人死亡吗？答案是肯定的，有大量证据表明工作压力会导致早逝，尤其会増大心脏病猝死的概率。你认为什么样的工作更容易使职场人士猝死，是「权力大、责任也大」的工作，还是「缺乏控制力和话语权」的工作（图 2-87）?

其实最危险的一类工作，是对自己的工作任务「缺乏控制力」。《赤棵的统计学》中提到一个案例，针对数千名英国公务员的多项调查发现，那些对自己的工作没有支配能力的雇员，也就是基本上对干什么、怎么干没有话语权的人，相比起那些拥有更多决策权的雇员来说，猝死率更高。

你看，并不是那些「权力大，责任也大」的工作容易让人猝死，而是那种等着上司给你布置任务，但自己又没有权力決定做什么、花多少时间完成的工作，容易把人压得喘不过气来。例如，公司高管们几乎每天都要做出重要决策，这些決策关系到公司的未来存亡，但他们所承受的风险要远远小于他们的秘书，因为秘书必须完成领导安排的各种任务，他们对工作「缺乏控制力」。

研究人员是如何得出这种结论的？很显然，类似于上面的问题都无法用随机试验的方式解決，因为我们不可能把人强行分配到各个工作岗位并强迫他们在那里工作好几年，然后再看看谁因公殉职。实际操作中，研究人员在很长一段时间里对英国政府系統的数千名公务员进行了详细的数据收集，这些数据经过分析，能提供有意义的相关关系，例如这两种工作和「冠心病发病率」之间的关系等。

再来看一个例子。某个地区的用户在搜索引擎里搜的信息，和这个地区房价有什么关系呢？谷歌首席经学家哈尔瓦里研究发现，如果更多人搜索「八成按揭货款」，或者「涨幅」「涨价的速度」，这个地区的房价就会上涨；如果更多人搜索「快速卖房的流程」或者「按揭超过房价」，这个地区的房价就会下跌。也就是说，用户在搜索引擎里搜的信息和这个地区的房价有相关关系。

#### 2.7.2 相关分析方法有什么用？

相关分析的作用有以下三点。

1、在研究两种或者两种以上数据之间有什么关系，或者某个事情受到其他因素影响的问题时，可以使用相关分析（图 2-88）。在职场中经常会被问到的一个问题是，子产品对整体产品有多少贡献度或者说影响度。例如，对于微信读书这款产品，评估「想法」这个子模块的用户留存对整体产品留存的影响度。这时候就可以使用相关分析，研究子产品和整体产品有什么关系。

2、在解決问题的过程中，相关分析可以帮助我们扩大思路，将视野从一种数据扩大到多种数据（图 2-89）。举个例子，在分析「为什么销量下降」的过程中，可以研究哪些因素和销售量有关系，例如产品价格、售后服务等。使用相关分析，可以知道哪些因素影响销量，哪些对销量没有影响，从而快速锁定问题的原因。

2、相关分析通俗易懂（图 2-90）。这在实际工作中很重要，因为数据分析的结果需要得到其他人的理解和认可，所以要方便大家沟通。很多分析方法看上去很高端，但是没有相关知识的人不容易理解。而相关分析通俗易懂，你不需要向对方解释什么是「相关」的含义及分析结果的意义，对方也能够理解。

#### 2.7.3 如何使用相关分析方法？

来看一个案例，表 2-2 记录了 20 名学生为考试花费的学习时间和取得的成绩。现在想知道学习时间和成绩这两种数据之间有什么关系。数据放到这样一个表格里，无论如何也没办法发现这两种数据之间有什么关系。所以，需要想办法将这些数据放到图形上。我们用横轴表示学习时间，纵轴表示成绩，然后将每个学生的数据画到图 2-91 中。

每个学生的数据在图中就是一个点，例如图中的点 A，表示这名学生的学习时间是 5.5 小时，成绩是 93 分。这样的图叫作散点图，散点图可以直观地显示出两种数据之间的相关关系。那么，这两种数据之间有多大程度的相关关系呢？「相关系数」就是用来衡量两种数据之间的相关程度的，通常用字母 r 来表示。相关系数有两个作用。

1、相关系数的数值大小可以表示两种数据的相关程度（图 2-92）。这个数值就好比给两部电影打分，一个 8.6 分，一个 7.8 分，这两部电影都是好电影，但是如果比较一下，肯定 8.6 分的更好。根据数值大小可以进行相关程度的比较。

2、相关系数数值的正负可以反映两种数据之间的相关方向，也就是说两种数据在变化过程中是同方向变化，还是反方向变化。

相关系数的范围是 -1~1, -1、0 和 1 这三个值是相关系数的极值（图 2-93），下面解释一下相关系数的 3 个极值。假如有两种数据 a 和 b，把这两种数据画在散点图上，横轴用来衡量数据 a，纵轴用来衡量数据 b。如果相关系数 = 1，数据点都在一条直线上，表示两种数据之间完全正相关，两种数据是同方向变化。也就是数据 a 的值越大，数据 b 的值也会越大。如果相关系数 = -1，数据点都在一条直线上，表示两种数据之间完全负相关，两种数据是反方向変化。也就是数据 a 的值越大，数据的值反而会越小。

如果相关系数 = 0, 表明两种数据之间不是线性相关，但有可能是其他方式的相关（例如曲线方式）。

如果相关系数 > 0, 说明两种数据是正相关，是同方向変化，也就是一种数据的值越大，另一种数据的值也会越大；如果相关系数 < 0, 说明两种数据是负相关，是反方向变化，也就是一种数据的值越大，另一种数据的值反而会越小，如图 2-94 所示。

相关系数的绝对值越大，说明两种数据的相关程度越高。那么，相关系数是什么数值时，可以判断两种数据之间有「相关关系」呢（图 2-95）?判断相关系数的数值大小并没有统一规定，一般将相关系数分为 3 部分如果相关系数的绝对值在 0-0.3，就认为是低度相关；如果相关系数的绝对值在 0.3-0.6，就认为是中度相关；如果相关系数的绝对值在 0.6-1, 就认为是高度相关。

根据这个大致的相关系数分类，就可以知道两种数据的相关程度。通过前面的内容，知道了相关系数的两个作用：1）相关系数的数值大小可以表示两种数据的相关程度，系数值大于 0.6 或者小于 -0.6，表示两种数据之间高度相关；2）相关系数数值的正负可以反映两种数据之间的相关方向。

#### 2.7.4 如何用 Excels 实现相关分析？

很多工具可以方便地得到两种数据的相关系数，例如 Excel、SQL 或者 Python。现在使用 Excl 来看下如何得到相关系数。

首先，需要按照图 2-96 来安装 Excel 的数据分析功能。

第 1 步，单击 Excel。左上角的「文件」；第 2 步，单击「选项」，弹出「Excel 选项」对话框；第 3 步，在「Excel 选项」对话框中选择「加载项」；第 4 步，在「管理」下拉列表框中选择「Excl 加载项」，然后单击「转到」。

最后单击「确定」按钮，就会出现图 2-97 所示的「加载宏」对话框。在对话框里选择「分析工具库」就安装好了 Excell 的数据分析功能。安装好后，就可以使用这个工具进行相关分析了。具体操作如下（图 2-98）。

第 1 步，单击「数据」选项卡下的「数据分析」功能；第 2 步，选择「相关系数」后单击「确定」按钮，就会弹出「相关系数」对话框。「相关系数」对话框中的操作步骤如下（图 2-99）。

第 1 步，设置输入区域，选择要对哪几列做相关性分析。这个案例里选择「学习时间」和「成绩」这两列数据；第 2 步，如果选择的数据里包括了列名，那么勾选标志位于第一行」；第 3 步，单击「确定」按钮后就会得到相关系数。

相关系数返回的是一个表格，这个表格叫作相关系数矩阵。矩阵对角线上的值都是 1，因为数据自己与自己的相关系数是 1。例如，表 2-3 中行名「学习时间」与列名「学习时间」的相关系数值是 1。对角线两侧对应的值是一样的，学习时间和成绩的相关系数值是 0.92, 与成绩和学习时间的相关系数值是一样的。所以，以后再看到相关系数矩阵时，只需要看对角线一边的值就可以了。

「学习时间」和「成绩」之间的相关系数是 0.92，这个值表示什么意思？通过前面介绍的相关系数的两个功能，可以知道：1） 这个值大于 0.6, 表示是高度正相关。也就是说「学习时间」和「成绩」有很高的相关关系；2）这个值大于 0，表示是正相关，也就是「学习时间」越长，「成绩」也越高。

为什么要使用相关系数矩阵来表示相关系数呢？因为当有两种以上的数据时，这个相关系数矩阵可以让人一眼就能确定任何两种数据之间的相关系数。例如，表 2-4 是 4 种数据的相关系数矩阵。

现在想知道哪些因素和 A 有相关关系，那么，只需要看 A 这一列的相关系数就可以了。发现 B 和 A 的相关系数是 0.9，C 和 A 的相关系数是 -0.3，D 和 A 的相关系数是 0.7。所以，B、D 和 A 有高度相关关系。现在接着前面的案例来绘制出散点图，操作步骤如下（图 2-100）。

第 1 步，选择要绘制图形的数据，也就是学习时间和成绩这两列的数据；第 2 步，单击「插入」选项卡下的「推荐的图表」功能，就可以打开 Excel 的所有图表第 3 步，在所有图表里选择散点图。操作之后，数据旁边就生成了散点图（图 2-101）。单击「插入」里的「文本框」，可以在散点图旁边写上相关系数。

总结一下，相关分析就是得到相关系数，通过相关系数来衡量两种数据的相关程度通常，在做相关分析的时候，会在散点图上给出相关系数，这么做的好处是：1）如果有人不了解相关分析，可以通过散点图直观地看到两种数据之间的关系，也可以理解分析结果。2）通过散点图可以直观地发现异常值（异常值是指与其他数据差别比较大的数据），有异常值和没有异常值的相关系数差会很大。例如图 2-102 里的数据，从整体上看，随着 a 升高，b 是上升的趋势。但是，左上方的数据就不符合这个趋势，它就是异常值。连同这个异常值一起计算，得到的相关系数是 0.3，并不太高。如果去掉异常值再计算，相关系数就会增大到 0.8。

那么，要不要去掉异常值呢？需要根据实际情況去调查这些异常值是怎么产生的。处理异常值一般有 3 种情况。

1、异常值可能是一个被错误记录的数据值，如果是这样，就可以在进一步分析之前把它修正。例如在人登记系中，你误将某名男性婴儿的性别输入成「女」，这种情況下的异常值，就需要进一步核实修正。

2、异常值也可能是一个被错误包含在数据里面的值，如果是这样，则可以把它删除。例如在人口登记系中，你不小心把宠物的姓名「王狗」记录进去了，记录的年龄是 10 岁，身高是 1 米，这明显不符合正常情下的 10 岁儿童身高。识别出异常值后，可以进行核对，如果是错误数据，一定要将其掉。

3、异常值也可能是一个反常的数据值，它是被正确记录并且属于数据集，这种情下，它应该被保留。例如你所在的公司发布了一款产品，没想到全球用户都喜欢用，发布会当天销售量暴增。这时候的销售量比日常销售量高出很多，属于异常值，但是这个值代表了销售的实际数值，应该保留。

#### 2.7.5 如何应用相关分析解决问题？

这里介绍一种应用相关分析的模式（图 2-103），就是使用相关分析来找出哪些因素与分析目标有相关关系。

例如，分析目标是「为什么销售额下降」，通过假设检验我们找出了 A、B、C 这 3 个可能原因。然后分别计算出 A、B、C 和「销售额」的相关系数，通过观察这些相关系数的大小，得知哪些因素对销售额影响更大。公司资源有限，一个阶段只能集中解决一个问题，通过相关分析，优先解那些影响大的在前面讲的「假设检验分析方法」中有一个案例，分析目标是「为什么产品 A 的复购率比争对手低 50%」。

通过假设检验分析方法发现是 3 个原因导致的（图 2-104）。1）在课程介绍页面，老师介绍得不够详细；2）课程采用了某个时间定时开课的模式，导致用户上课不够灵活，不能够随时加入学习，这对平日还有其他事情的用户来说，不够方便；3）助教答疑效果不好，把助教当成了一个单纯的销售人员，而不是一个全流程跟踪用户、为用户服务的助教。

因为公司资源有限，一个阶段只能集中解決一个问题，那么优先解決哪个问题呢？这时候就要分析这 3 个因素哪个对复购率影响最大。这时候可以通过相关分析，来确定影响最大的因素。通过分析，发现跟复购率相关度最高的因素是助教的答疑效果，那么，就可以优先提高助教的答疑服务，进而显著提高产品 A 的复购率。前面讲到相关分析的 3 个作用，这里再补充一个相关分析的优势。相关分析可以和其他分析方法结合，帮助进行深入分析（图 2-105）。

这样可以避免只使用单独的一种分析方法，而是用其他方法做补充，使得分析结论完整而丰富。例如，在使用假设分析方法找到原因以后，可以使用相关分析，进一步分析出哪些因素影响大。

#### 2.7.6 注意事项

相关分析有很多好处，可以方便地应用在实际工作中。但是如果使用不正确，往往会得出一些错误的结论。使用相关分析的注意事项：相关关系不等于因果关系。在使用的时候注意这一点，可以提高分析的质量。什么是因果关系？因果关系的意思是 A 的发生会导致 B，B 的发生是因为 A。例如在控制其他因素的前提下，暴饮暴食和肥胖，就是一种因果关系，吃太多会导致肥胖，之所以肥胖是因为吃太多。但是，如果 A 和 B 有正相关关系，A 提升 B 也提升，我们却不能由此简单得出结论：B 提升的原因就是 A。实际上，要么是存在某个第三方因素 C 影响了 B，要么就是「纯属巧合」（图 2-106）。

例如，学校和孩子的成功有相关关系，学校越好，这个学校的孩子将来也越成功。那么，你能说学校和孩子成功有因果关系吗？根据法国一个社会学研究结果，学校在一个人的成长过程当中只有 15% 的作用，它跟孩子的成长、成功只有相关关系。唯一和孩子成功成长有因果关系的是家庭。这里家庭就是存在的第 3 方因素，家庭教育越好，孩子越成功。再来看《简单统计学》中的一个例子，图 2-107 是美国的啤酒销量和已婚人口的数量，二者的相关系数达到了惊人的 0.99。

我们能说酒导致了婚姻？或者反过来说，结婚导致了饮酒？显然，啤酒销量和已婚人口的数量没有因果关系，这是纯属巧合。正确的解释应该是，当人口随时间增长时，啤酒消费量、已婚人口数量也会长。

如何判断两种数据之间是相关关系，还是因果关系呢？可以使用「单变量控制法」，也就是控制其他因素不变，只改变其中一个因素，然后观察这个因素对实验结果的影响。例如，每天早上公鸡一打鸣，太阳就会升起。如果我们把公鸡杀掉，太阳还是会升起，完全不受公鸡的影响。所以，「太阳升起」和「公鸡打鸣」是相关关系，而不是因果关系（图 2-108）。

在《魔鬼经济学》中有这样一个案例：有数据表明，在竞选中花钱越多的候选人，胜出的可能性也越大。所以有这样一种观点，认为在选举中，竟选资金的多少直接決定了选结果（图 2-109）。但是作者指出，这只意味着竞选资金和竞选获胜之间存在相关关系，而并不能证明具有因果关系。有可能是别的原因，同时导致了竞选资金多和竞选获胜这两个结果。

作者通过数据分析发现，候选人的个人魅力是存在的第 3 方因素。个人魅力强的候选人，胜出的概率大，而选民也更愿意给他捐款。也就是说，个人魅力オ是決定一个候选人能否获胜的根本原因，而不是竞选资金的多少。作者是如何证明这个因果关系的呢？就是我们前面讲到的「单变量控制法」，也就是保持候选人之间相对魅力值不变，然后改变他们的选资金，看看竞选资金的变化是否真正影响了最后的竞选结果作者发现，从 1972 年以来，有两位候选人在短短几年内多次成为选总统的对手。由于时间间隔较短，又是相同的两位候选人，可以假定他们之间的相对魅力值变化不大，而他们每次的竞选支出都不数据分析发现，在这种情况下，候选人的资金多少对选举结果根本没有影响。有魅力的候选人即使开支半，也只会丢掉 1% 的选票；而反过来，魅力不足的候选人即使开支翻倍，也最多只能涨 1% 的选票。那么，什么时候需要相关关系，什么时候需要因果关系呢？

在大部分时候，是无法找到因果关系的，但仅仅知道相关关系也能帮助我们。沃尔玛公司有一个著名的统计案例。他们发现，在美国，每当有限风来临的时候，超市里一种草莓味道的饼干就会销量大增。显然，这两者之间只是相关关系。对于这种问题，没人知道背后的真实原因，但是利用好「相关分析」就够了，以后再有限风来的时候，超市就要多准备一些这样的饼干。人工智能技术就是建立在相关分析的基础上的，例如豆辨的电影推荐（图 2-110）、淘宝的购物推荐，背后都是对用户的行为进行相关分析。

而对于另外一些问题，需要找出事件背后的原因。这时候就需要先通过研究发现相关关系，然后再进一步去研究背后的原因，找出事件之间的因果关系。举个例子，小明是一家防晒霜公司的数据分析师。最近他接到一个任务，分析防晒霜的销量，看看如何以最好的方式来进行品牌营销。

小明通过分析发现，蜜蜂数量和防晒霜的销量高度相关，也就是，如果蜜蜂数量越多，那么防晒霜销量也就越高（图 2-111）。于是，他告诉销售团队，需要考虑在广告中提到蜜蜂，这可以增加防晒霜的销量。销售部门负责人听了他的建议后，反问道：这两种数据之间是有相关关系，但是它们之间有因果关系吗？也就是，蜜蜂数量多是用户购买防晒霜的原因吗？销售部门经过进一步分析发现，在蜜蜂多的日子里，通常天气也好，于是用户就会增加户外运动。用户买防晒霜是因为他们在进行户外活动，所以户外活动频率和防晒霜销量オ是因果关系。最后销售部门的广告決策不是在广告中提到蜜蜂，而是提到户外活动，这样オ能増加防晒霜的销量。（参考文献《赤棵棵的计学》）。

#### 2.7.7 总结

可以用图 2-112 记住相关分析方法。

第 1 个问题：是什么？当我们研究两种或者两种以上数据之间有什么关系的时候，就要用到相关分析。

第 2 个问题：有什么用？1）在研究两种以上数据之间有什么关系，或者某个事情受到其他因素怎样的影响等问题的时候，就可以使用相关分析；2）在解決问题的过程中，相关分析可以帮助我们扩大思路，将视野从一种数据扩大到两种甚至多种数据；3）通俗易懂，便于和其他人沟通，方便得到他人的理解和认可；4）相关分析可以和其他分析方法相结合，帮助进行深入分析。

第 3 个问题：如何用？相关分析就是得到相关系数，相关系数有两个作用：1）相关系数的数值大小可以表示两种数据的相关程度。一般相关系数的值大于 0.6 或者小于 -0.6, 表示两种数据之间高度相关。2）相关系数的数值正负可以反映两种数据之间的相关方向。通常，在做相关分析的时候，会在散点图上给出相关系数。还介绍了一种应用相关分析的模式，就是找出哪些因素与分析目标相关。

第 4 个问题，注意事项。需要注意的是相关关系不等于因果关系。如何判断两种数据之间是相关关系，还是因果关系呢？要用到「单变量控制法」，也就是控制其他因素不变，只改变其中一个因素，然后观察这个因素对实验结果的影响。什么时候需要相关关系，什么时候需要因果关系呢？大部分时候无法找到因果关系，但是仅仅知道相关关系也能帮助我们。对于有些问题，需要找出事件背后的原因。这时候就需要先通过研究发现相关关系，然后再进一步去找出背后的原因，找出事件之间的因果关系。

### 2.8 群组分析方法

#### 2.8.1 什么是群组分析方法？

「群组分析方法」（也叫同期群分析方法）是按某个特征，将数据分为不同的组，然后比较各组的数据，说白了就是对数据分组然后来对比。这个分析方法在我们生活中经常可见，例如，在学校上体育课的时候，体育老师考虑到男生和女生的运动项目不ー样，会把男生分为一组打篮球，女生分为一组跳绳。这其实是按性别对学生进行了分组（图 2-113）。在职场里，常见的分组就是公司为了方便沟通，会按项目建立不同的微信群（图 2-114）。

#### 2.8.2 群组分析方法有什么用？

产品会随着时间发布新的版本，产品改版的效果如何？版本更新后用户是增长了，还是流失了？像这类问题，就需要将用户按时间分组，然后比较不同组的用户留存率。所以，群组分析方法常用来分析用户留存率（或者流失率）随时间发生了哪些变化，然后找出用户留下或者离开的原因。留存问题中如何对用户分组？通常是按用户开始使用产品的月份来分组，例如用户注册的那个月或者第 1 次购买的那个月分组后，考察每组用户的留存率随着时间发生了哪些变化，例如 1 个月后留存率是多少，2 个月后留存率是多少（图 2-115）。对留存率高的用户组，分析他们为什么留存；对留存率低的用户组，分析他们为什么流失。

#### 2.8.3 如何使用群组分析方法？

假设现在是 4 月初，为了分析产品用户的留存，我们将前 3 个月的用户划分到不同的组。把在 1 月份注册产品的用户划分到一个组，叫作「1 月份组」，把在 2 月份注册产品的用户划分到一个组，叫作「2 月份组」，把在 3 月份注册产品的用户划分到一个组，叫作「3 月份组」，初步整理出图 2-116 里的表格。为了研究清楚每个组里的用户留存率随时间发生了哪些变化，可以给这个表加入几列，用于记录用户从开始注册产品到几个月后的留存率，这样就得到了图 2-117 所示的表格。

第 1 行是 1 月份组用户的留存率随着时间的变化情况。为什么右下方有许多空白单元格？因为表格的制作时间是 4 月初，而 3 月份组里的用户是 3 月份开始注册产品的，1 个月后オ到了 4 月份，2 个月后是 5 月份，3 个月后是 6 月份，5 月份和 6 月份都还没有数据，所以表格有空白。所以，对于这种群组分析表格，由于时间原因，右下角有些数据是空白（图 2-118）。

表格里的留存率是多少？可以按行来计算（图 2-119）。例如，表格第 1 行是 1 月份组，1 月份注册的有 10 个人，1 个月后有 6 人卸载产品不再使用了，还留下 4 个人。那么 1 个月后的留存率 = 留下的人数（4）/ 1 月份组总人数（10）= 40%。按同样的方法，可以算出每一行的留存率，最后得到表 2-5。

从这个表格里能分析出什么？当群组分析表格里的数据比较多的时候，直接分析起来比较困难。这时可以把各个组的数据绘制成折线图（图 2-120），这样从图形上就可以很容易地发现数据随时间发现了哪些变化。横轴是时间，纵轴是留存率。这样表格里的每个留存率在折线图上就是一个点，例如 3 月份组 1 个月后的留存率是 10%，就是图 2-120 的红色点。把每个组的留存率数据点连成折线，就可以绘制出每个组的留存率折线图。

通过比较各个组的留存率折线图，可以发现 3 月份组的留存率突然下降了，然后就可以分析为什么这个月的留存率下降了。所以，通过群组分析方法，可以观察某个指标随着时间发生了哪些变化。你可能会说，图 2-120 里的数据太简单了。这里用少量数据是为了帮助你理解群组分析的原理，下面会通过几个实际案例来讲解群组分析方法是如何应用的。

案例一：视频平台用户流失分析。

你肯定用过腾讯、优酷、爱奇艺等视频平台，这类视频平台的用户是按月付费成为会员才能看某些电视剧。用户可以在任意月份取消订购，这类取消订购的用户就是流失用户。为了分析用户为什么流失，我们可以使用群组分析方法。表 2-6 是某视频平台的新增用户数，表格的第 1 列「分组」是按新用户注册的月份分组，每一行是对应组之后各个月留存下来的用户（数据来源：《精益数据分析》）。

我们来看 1 月份组这一行，当月也就是 1 月份新増用户数是 150 人，1 个月后这个群里有 140 人留存下来，2 个月后这个群里有 130 人留存下来。2 月份组这一行，当月也就是 2 月份新増用户数是 180 人，1 个月后这个群里有 172 人留存下来，2 个月后这个群里有 160 人留存下来。

现在来计算这个表格里的留存率。拿「1 月份组」这一行来说，1 个月后的留存率 = 留下的人数（140）/1 月份组总人数（150）= 93.33%，2 个月后的留存率 = 留下的人数（130）/1 月份组总人数（150）= 86.67%，如图 2-121 所示。按照这样的方法，可以把每一行的留存率计算出来，就得到了表 2-7 的数据。

当群组分析表格里的数据较多，直接分析比较困难。这时可以把各个组的数据绘制成折线图，这样就可以很容易地发现数据随时间发生了哪些变化。把每个组的数据绘制成一条折线，横轴是时间，纵轴是留存率，然后比较各个组的折线。因为 9 月份组和 10 月份组的数据很少，所以没有绘制到图上。从图 2-122 中可以发现，当 1、2、3 月份组的折线趋于平稳时，4、5、6 月份组的折线还在继续下行。图 2-122 的折线太多，可以把 1 月份组和 4 月份组单独拿出来比较，就是图 2-123, 可以看出两组的留存率差别很大。

通过群组分析方法，我们发现留存率低的是 4、5、6 月份组。接下来就可以继续分析为什么这 3 个月的用户留存率下降。例如，有可能是下面几种原因：1）公司最近上线了新功能，但是这些新功能并不适合新用户；2）公司最近推广活动帯来了新用户，但是公司的产品对这些新用户没有价值，导致用户流失。这时就可以使用前文的假设检验、相关分析等方法来进一步研究，找到问题发生的原因。

最后我们复盘下用户流失分析这个案例。第 1 步，使用群组分析方法，找到留存率低的组；第 2 步，分析为什么这些组留存率低，可以使用假设检验、相关分析等方法进一步研究（图 2-124）。

案例二：推特用户留存分析。

前面在使用「群组分析方法」时，一般按用户开始使用产品的月份来分组，但这不是唯一的分组规则。工作里业务场景不样，需要灵活根据业务需求来确定分组规则。现在来看看推特团队是如何使用「群组分析方法」来发现留存率低的问题，以及如何分组的（案例来自《增长黑客》）推特是国外版的「微博」，在发展的早期阶段，团队通过数据分析发现，在新用户注册时，根据用户的兴趣选择，向他推荐 30 个最可能感兴趣的账号，这样オ可以使新用户成为长期活跃用户。那么，为什么是关注「30 个」用户账号呢？

这个数据可不是团队一拍脑袋決定的，而是使用群组分析方法得出的结论。当时，推特面临的是很多人注册后就不再使用产品了，留下来的活跃用户极少。为什么用户留存率低呢？为了解决这个问题，团队按每月使用推特的天数对用户进行分组分析。由于没有当时的真实数据，为了方便理解，表 2-8 中的数据是模拟数据。

「分组」这一列是某月份用户使用推特的天数，「当月用户数」这一列是对应这组里有多少用户，「1 个月后用户数」是 1 个月后，有多少人留存下来继续使用产品。这样分组后，用「1 个月后用户数」除以「当月用户数」，就可以得到各组的留存率，如表 2-9 所示。

将最后一列的留存率绘制成折线图，比较各组的留存率変化（图 2-125）。其中，横轴是各个组，也就是这个月使用产品的天数，纵轴是每个组对应的留存率。从图中可以看出，当月使用推特 7 天是一个拐点，这之后留存率慢慢稳定在 90% 以上。也就是说，一个月使用至少 7 天的人中，有 90%-100% 会留存到下一个月。

那么，月使用至少 7 天的用户比例高吗？推特团队将用户分为三组，分组规则如下：1）核心用户，也就是每个月至少访问 7 天的人；2）一般用户，也就是使用产品不那么频繁的人；3）冷漠用户，也就是使用一次产品后就不再用的人。分组后统计每一组的用户比例，推特团队发现核心用户有 20%，这个比例是比较高的（表 2-10）。

核心用户组为什么留存率高呢？如果能找到这些用户有哪些共同行为，那么就找到了用户留存下来的原因。接下来推特团队进行了相关分析，在前面的相关内容里，我们学习过应用相关分析解決问题的模式，就是找出哪些因素与分析目标有相关关系（图 2-126）。例如，可以分别计算出因素 C 和「分析目标」的相关系数，通过观察这些相关系数的大小，得知哪些因素对「分析目标」影响大，哪些影响小。公司资源有限，一个阶段只能集中解決一个问题，通过相关分析，优先解決那些影响大的因素。

推特团队通过相关分析发现，关注人数和留存率高度相关。当用户关注入数在 30 人以上，用户就会留存下来。通过继续深入分析，推特团队又找到了一组相关关系：用户关注的 30 个人里有多少人关注他们和留存率高度相关（图 2-127）。

为什么回关人数越多，用户留存率越高呢？为了找到这个问题的答案（因果关系），团队对用户进行了电话采访，发现了这背后的原因：如果不到 1/3 的人「回关」, 那么推特就会像一个新闻网站，而市面上还有很多其他新闻网站可以选择；如果超过 1/3 的人「回关」, 那么推特就跟其他社交产品没有什么区别，例如信中大家都是互相关注的状态，也没法体现出推特的独特之处；只有达到 1/3 这个比例的时候，能体现出推特的特点，也就是让用户及时了解他们关心的圈子里发生的新鲜事。

通过使用群组分析方法和相关分析方法，推特团队找到了用户留存率低的原因。最后，他们利用分析结论优化了产品，就是在新用户注册的时候，根据用户的兴趣选择向他推荐 30 个他最可能感兴趣的账号，这样オ可以使新用户成为长期活跃用户。现在复盘下前面的两个案例，就可以总结出使用群组分析解决问题的模式（图 2-128）。

在分析用户留存或者流失问题的时候，可以先使用群组分析方法找到留存率低的组；然后使用假设检验、相关分析等方法，分析这些组留存率低的原因。还可以先使用群组分析方法找到留存率高的组，然后分析为什么这些组留存率高。例如，分析留存率高的用户更多使用产品的哪些功能，他们为什么留下。找到原因以后，就可以对应地优化产品。例如，可以将腾讯视频里的用户按照观看时间来分组，发现留存率高的用户喜欢看某些类型的电视剧，那么就可以在产品主页里主推这类电视剧。

案例三：金融行业期分析。

贷款的流程如图 2-129 所示：1）货款申请人填写申请资料；2）货款平台审核；3）如果通过审核，货款平台会把货款打入申请人的银行账户，也就是放款；4）在货款到期时，申请人需要按时还款。如果申请人没有按时还款，那么货款平台的催收人员会提醒还款。没有按时还款的用户，叫作逾期用户。

逾期率是货款到期的用户里未还款用户的占比。例如，有 1000 名用户的货款到期，过了还款日期，有 100 人没有还款，那么逾期率就是 100 / 1000 = 10%。平台放款后，万一用户不还款怎么办？作为货款平台，就要考虑这种风险。这时就可以使用群组分析方法来分析放后，用户的还款表现。例如某货款产品的期限是 7 天，在产品发放过程的第 4 周开始，公司为了降低逾期率，调整了审核条件。为了检验调整后的审核条件是否有效，需要分析审核条件变化前后用户逾期率的变化。为此使用群组分析方法来观察逾期率随着时间发生了哪些变化。

该产品的账龄分析如表 2-11 所示，表格中第一列是按每周（7 天款期限）的还款日期分组，例如 W1 是「第 1 周的货款」，W2 是「第 2 周的货款」。每一行是这一组用户货款到期后的第几天，例如「1」表示的是款到期后的第一天，以此类推。

单元格里的数据是逾期率，也就是当前天数未还款的用户的占比。例如 W1（第 1 周）货款到期后的第 1 天对应的数据是 31%，表示逾期率是 31%，也就是第 1 周放款的用户当中，在逾期 1 天时仍未归还的用户占 31%。表 2-11 的制作时间是第 8 周贷款到期后的第 2 天，而此时我们还无法获取第 2 天及后续的数据，因此 W8 这一行只有一个数据。同理，此时第 7 周也只有 8 天的数据，剩余数据暂时还无法获取。从表 2-11 中可以获得哪些信息呢？

首先，看表 2-12 方框中 W2 和 W3 对应的逾期率分别是 36.3% 和 39.5%，而这一列其余的逾期率几乎都是 31% 左右。通过比较不同组的数据，发现相对于 1 而言，W2 和 W3 的第 1 天逾期率明显地升高了。随后产品调整了风控策略，W4 的逾期率下降为 31.2%，恢复到了正常水平。

其次，观察表的右半部分。表 2-13 方框中的数据是从 W2 到 7 的第 8 天逾期率。从 W2 到 7, 整体呈现下降趋势，从 22.3% 下降到了 16.4%，从第 4 周开始，用户逾期 8 天的占比有明显下降。不仅仅是第 8 天，对第 8 天以后每周的逾期率进行分析，也可以得出这一结论。这说明在调整了风控策略以后，不仅到期后第 1 天逾期率有所下降，后续天数的逾期率同样也有所下降。

通过上述分析，可以得出结论：在调整风控策略后用户逾期率有了显著的下降，这证明了风控策略的调整是有效的。

#### 2.8.4 注意事项

使用群组分析方法需要注意如何分组，除了按时间分组，还可以根据具体的业务场景来确定。例如，上述第 1 个视频平台案例里，是根据用户注册月份分组；在第 2 个推特案例里，是根据某个月用户使用产品的天数来分组；在第 3 个金融行业逾期分析案例里，是根据货款到期日分组。

#### 2.8.5 总结

可以用图 2-130 记住群组分析方法。

第 1 个问题：是什么？「群组分析方法」是按某个特征，将数据分为不同的组，然后比较各组的数据。

第 2 个问题：有什么用？群组分析方法常用来分析用户留存率（流失率）随时间发生了哪些变化，然后找出用户留下或者离开的原因。在金融行业，群组分析方法还可以用于用户逾期分析。

第 3 个问题：如何用？先使用群组分析方法，找到留存率低或留存率高的组；然后使用假设检验、相关分析等方法，研究为什么这些组留存率低或留存率高。找到原因以后，就可以对应地优化产品。当群组分析表格里的数据比较多的时候，直接分析起来比较困难，这时可以把数据绘制成折线图，这样就可以很容易地发现数据发现了哪些变化。

第 4 个问题：注意事项。使用群组分析方法需要注意如何分组，除了按时间分组，还可以根据具体的业务场景来确定。

### 2.9 RFM 分析方法

#### 2.9.1 什么是 RFM 分析方法？

RFM 是 3 个指标的缩写：最近 1 次消费时间间隔（Recency）、消费频率（Frequency）、消费金额（Monetary），通过这 3 个指标对用户分类的方法称为 RFM 分析方法（图 2-131）。

这里举个例子来说明这 3 个指标是什么意思。你有一家店铺，小明是这家店铺的用户，今天是这个月的 30 号。

1、最近 1 次消费时间间隔（R）是指用户最近一次消费距离现在多长时间了。小明最近 1 次在店铺买东西是这个月 26 号，上ー次消距离现在（这个月 30 号）过去了 4 天，所以小明的最近 1 次消费时间间隔是 4 天。

2、消费频率（F）是指用户一段时间内消费了多少次。如果对「一段时间」的定义是最近 30 天，发现小明最近 30 天在店铺消费了 2 次（小明在 1 号、26 号进行了消费。

3、消费金额（M）是指用户一段时间内的消费金额。如果对「一段时间」的定义是最近 30 天，发现小明最近 30 天总共在店铺消费 5000 元。这 3 个指标针对的业务不同，定义也不同，要根据业务来灵活定义。各指标特征如下对于最近 1 次消费时间间隔（R），上一次消费离得越近，也就是 R 的值越小，用户价值越高。对于消费频率（F），购买频率越高，也就是 F 的值越大，用户价值越高。对于消费金额（M），消费金额越高，也就是 M 的值越大，用户价值越高。

把这 3 个指标按价值从低到高排序，并把这 3 个指标作为坐标轴，就可以把空间分为 8 部分，对应图 2-132 的 8 类用户。把图 2-132 里对应不同 RFM 值的用户，总结到表 2-14 里，就得到了用户分类的规则。

#### 2.9.2 RFM 分析方法有什么用？

例如店铺某个月收入大幅下跌，通过分析，发现原来店铺几个重要的用户被竟争对手挖走了，而这几个用户贡献了店铺 80% 的收入出现这个问题，是因为该店铺没有对用户分类，对全部用户采取的都是一样的运营決策。怎么对用户分类，识别出有价值的用户呢？

这时候就可以用 RFM 分析方法把用户分为 8 类，对不同价值的用户使用不同的运营決策，把公司有限的资源发挥到最大的效果，这就是我们常常听到的精细化运营（表 2-15）。例如第 1 类是重要价值用户，这类用户最近一次消费时间较近，消费频率也高，消费金额也高，要提供 VP 服务。日常生活中接触到的会员服务就是这方面的经典案例，按会员等级提供不同的服务。根据企鹅智库《2017 中国会员经済数据报告》显示（图 2-133），用户对信用卡、酒店、航空公司的会员体系最满意。

#### 2.9.3 如何使用 RFM 分析方法？

前面提到 RFM 分析方法可以把用户分为 8 类，具体是如何做到的呢？

第 1 步：计算 R、F、M 的值。要得到 R、F、M 这 3 个指标，一般需要数据的 3 个字段：用户 D 或者用户名称、消费时间、消费金额。从这 3 个字段可以计算出 R、F、M 这 3 个指标。以图 2-134 中的原始数据为例，假设现在是 2020 年 1 月 30 日，分析最近 30 天的用户。其中，小明最近一次消费是 2020 年 1 月 26 日，与今天（1 月 30 日）的间隔是 4 天。他在最近 30 天消费了 2 次，总共消费金额是 5000 元。

用这个方法，计算出表 2-16 里两位用户的 R、F、M 值。同时在表格里加了 3 列，用于后面对计算出的 R、F、M3 个值打分。

第 2 步：给 R、F、M 值按价值打分（图 2-135）。注意这里是按指标的价值打分，不是按指标数值大小打分。对于最近 1 次消费时间间隔（R），上一次消费离得越近，也就是 R 的值越小，用户价值越高。

将 R、F、M3 个指标分別按价值从小到大分为 1~5 分。这个案例里，对于最近 1 次消费时间间隔（R），大于 20 天的打 1 分，10~20 天的打 2 分，5~10 天的打 3 分，3~5 天的打 4 分，3 天以内打 5 分。把这 3 个指标的打分规则，整理到表 2-17 里。实际业务中，如何定义打分的范围，要根据具体的业务来灵活掌握，没有统一的标准。根据打分规则，可以对表 2-16 计算出的 R、F、M 值进行分类，在最后 3 列填上对应的分值，如表 2-18 所示。

第 3 步：计算价值平均值。分别计算出 R 值打分、F 值打分、M 值打分这 3 列的平均值，如表 2-19 所示。

第 4 步：用户分类。在表格里增加 3 列，分别用于记录 R、F、M3 个值是高于平均值，还是低于平均值。

如果一行里的 R 值打分大于平均值，就在 R 值高低列里记录为「高」，否则记录为「低」。F 值、M 值也这样比较，最终得到了表 2-20 里的值。然后和用户分类表格里定义的规则进行比较，就可以得出用户属于种类别，如图 2-135 所示。

总结下前面的内容，用 RFM 对用户分类的过程如下（图 2-136）。1）使用原始数据计算出 R、F、M 值。2）给 R、F、M 值按价值打分，例如按价值从低到高分为 1-5 分。3）计算价值的平均值，如果某个指标的得分比价值的平均值低，标记为「低」。如果某个指标的得分比价值的平均值高，标记为「高」（4） 和用户分类规则表比较，得出用户分类。

现在再回过头看前面这个分类图，你就会恍然大悟：坐标轴的中心，可以理解为某个指标价值的平均值（图 2-137）。用户分类后，如何精细化运营呢？由于不同公司业务不一样，运营策略也不ー样。这里举例说明前 4 类用户供参考（表 2-21）。1）重要价值用户，RFM 三个值都很高，要提供 VIP 服务；2）重要发展用户，消费频率低，但是其他两个值很高，要想办法提高他的消费频率；3）重要保持用户，最近消费时间距离现在较远，也就是 R 值低，但是消费频率和消费金额高。这种用户，是一段时间没来的忠实客户。应该主动和客户保持联系，提高复购率；4）重要挽留客户，最近消费时间距离现在较远，消费频率低，但消费金额高。这种用户即将流失，要主动联系用户，调查清楚哪里出了问题，并想办法挽回这样通过 RFM 分析方法来分析用户，可以对用户进行精细化运营，不断将用户转化为重要价值用户。

#### 2.9.4 注意事项

1、R、F、M 指标在不同业务下定义不同，要根据具体业务灵活应用。举个例子，你现在是滴滴打车的一名运营人员，如果用 RFM 分析方法对用户进行分类，你会如何定义 R、F、M 这 3 个指标呢？对应这里的业务，R 可以定义为「上一次打车距离现在多少天」；F 可以定义为「过去 30 天的打车次数」；M 可以定义为「过去 30 天内打车的总金额」。

为什么 F 不是「历史打车总数呢？因为滴滴打车满足的是用户高频的短途出行需求，如果用户连续一个月未使用，即可定义为流失用户，所以「一段时间」可以定义为「最近 30 天」。如果是滴滴的代驾或者货车业务，是低频的需求，可以把「一段时间」定义为「一年或者 1 个季度」。

2、R、F、M 按价值如何确定打分的规则。分值一般分为 1~5 分，也可以根据具体业务灵活调整。每个分值的范围要根据具体业务来定，就好比你在开车，车速控制在哪个范围，可以根据路况灵活把握。此外，FRM 打分的规则可以与业务部门沟通，进行头脑风暴。或者使用聚类的方法对 R、F、M 的值进行分类，然后给每个类别打分。

3、R、F、M 这三个指标可以灵活和其他分析方法结合使用。例如，某个店铺做活动以后，希望对老用户的表现做复盘总结。可以使用对比分析方法来比较该店铺今年和去年同样活动中老用户的复购情況。可以使用 R 值来衡量老用户的复购情況。R 值定义为老用户最后一次消费时间间隔，这样 R 值可以反映老用户的活跃程度和复购周期。可以简单理解为 R 值越小，用户越复购周期越短。表 2-22 是老用户今年和去年活动的 R 值分布。

为了方便观察数据，把表中的数据进行可视化，如图 2-138 所示，图中的桂形图对应的数据是表格中的去年人数和今年人数，折线对应的数据是表格中的人数同比。从图中可以看出，折线的两个低点分别是 90 < R ≤ 180 的区间和总计。引起「老用户复购下降」的主要区间在折线的低点 90 < R ≤ 180 区间，下降了 4490 人，甚至超过了总计的下滑人数（3239 人）。将表 2-22 中的去年占比、今年占比、占比同比数据做成图 2-139, 也显示 90 < R ≤ 180 区间下降显著。

除了 90 < R ≤ 180 区间复购人数下降显著，还可以看下是否有其他相对显著的变化，发现 360 < R ≤ 720 的复购提升最明显。对比分析后，将问题缩小到两类用户：90 < R ≤ 180 和 360 < R ≤ 720 区间的老用户，接着就可以深入分析这两类用户了。

#### 2.9.5 总结

可以用图 2-140 记住 RFM 分析方法。

第 1 个问题：是什么？RFM 是 3 个指标的缩写：最近一次消费的时间间隔（R）、消费频率（F）、消费金额（M）。

第 2 个问题：有什么用？通过 RFM 分析方法可以把用户分为 8 类，这样就可以对不同用户使用不同的营销策略，例如信用卡的会员服务。

第 3 个问题：如何用？可以回顾案例中用 RFM 分析方法对用户分类的过程。现在有很多工具如 Excel、SQL、Python 等都可以实现 RFM。工作里用到的时候，可以搜索对应的实现工具，就可以快速实现了。

第 4 个问题：注意事项。1）不同业务中 R、F、M 的定义不同，要根据具体业务灵活应用。2）R、F、M 按价值确定打分的规则一般分为 1-5 分，也可以根据具体业务灵活调整。

### 2.10 AARRR 模型分析方法

#### 2.10.1 什么是 AARRR 模型分析方法？

ARR 模型对应产品运营的 5 个重要环节（图 2-141），分别是：1）获取用户（Acquisition）：用户如何找到我们？2）激活用户（Activation）：用户的首次体验如何？2）提高留存（Retention）：用户会回来吗？4）增加收入（Revenue）：如何赚到更多钱？5）推荐（Referral）：用户会告诉其他人吗？

如果把产品看作一个鱼塘，使用产品的用户看作鱼塘里的鱼，AARR 模型的 5 个环节可以描述如下（图 2-142）。1）获取用户：想办法给鱼塘里添加新的鱼，从而扩大鱼塘的规模；2）激活用户：让鱼塘里的鱼喜欢上这里的环境；3）提高留存：随着时间的推移，一部分鱼觉得鱼塘没意思，就离开跑到其他鱼塘里了，这些鱼就是流失用户；留下来的鱼就是留存用户。所以要想办法把用户留住；4）增加收入：鱼塘有盈利模式才能活下去，所以要想办法赚到更多钱；5）推荐：让更多的人知道这个鱼塘，才能扩大鱼塘的规模。对应产品，就是让用户推荐给其他人，才能让产品有更多新用户。

#### 2.10.2 AARRR 模型分析方法有什么用？

因为 AARRR 模型涉及用户使用产品的整个流程，所以它可以帮助分析用户行为，为产品运营制定決策，从而实现用户増长。例如，使用其他分析方法定位到问题的原因是留存率低，那么就可以参考 AR 模型里留存这一环节的策略来提高留存率。

#### 2.10.3 AARRR 模型分析方法如何使用？有哪些注意事项？

接下来，分别看下 AARR 模型的每一个环节如何使用，以及有哪些注意事项。

1、获取用户：用户如何找到我们？

在「获取用户」这一环节，需要关注以下指标（图 2-143）。1）渠道曝光量：有多少人看到产品推广的信息；2）渠道转换率：有多少人因为看到广告转换成用户；3）日新增用户数：每天新增用户是多少；4）日应用下载量：每天有多少用户下载了产品；5）获客成本：获取一个客户所花费的成本。

在互联网行业中，很多创业公司死掉并不是因为它们的业务或产品不行，而是因为它们的获客成本很高，并且没有办法降下来。肖恩最初是在硅谷的 Dropbox 公司工作，这是一家做云存储业务的业公司。这家公司开始时每获得一名用户的成本高达 400 美元，而它提供的付费服务每年是 99 美元。肖恩对低成本获客提供了两个建议：一是语言，二是渠道。语言。语言就是指怎么说才能打动用户的心，例如广告的文案。2001 年 Pod 问世时，广告语是「将 1000 首歌放在你的口袋里」（图 2-144），这么一句话就让用户知道了这个产品的魅力所在；渠道。渠道是指产品投放在什么地方オ能让用户看到。主要有四类渠道：搜索引擎、应用市场、付费渠道、口碑渠道。

搜索引擎是指通过搜索引擎来提高产品在搜索结果页面的排名。

应用市场是给手机安装各类 App 的平台。安卓系统下的应用市场可以分为两类一类是手机厂商自营的应用商店，另一类是一些大型互联网公司或者第三方平台开发的应用市场。目前主流的应用市场如表 2-23 所示。

付费渠道在第 1 章里已经写过，包括展示位广告、搜索广告和信息流广告。这里以应用市场为例来介绍付费渠道。付费推广后，App 在安卓应用市场内的排名会有所提升。应用市场常见的推广位置有总榜排名、专题页、分类页和推荐页，如图 2-145 所示。苹果 App Store 的推广方式与安卓应用市场有所区別。国内比较主流的推广方式是应用商店优化（ASO, App Store Optimization）。通过对 App 的名称、关键字、描述、评价和下载量进行优化，来提升 App 的搜索排名，从而获得大量的下载。

口碑渠道是用户主动把产品推荐给周围的人。例如，特斯拉几乎不在广告上花钱，因为车主会主动推荐给周围的朋友。2019 年《彭博商业周刊》针对 5000 位特斯拉 Model3 车主进行了ー次用户调研，有 99% 的车主表示会把 Model3 推荐给家人和朋友，这是一个非常惊人的推荐率不管是以哪种渠道推广来获取用户，本质上都是提高产品出现在用户面前的概率。例如，特斯拉的 Model XE 的「鷹翼门」（图 2-146） 就是为了提高产品出现在用户面前的概率而设计的。在社交网络上，疯传着很多 Model XE 的图片，这让更多人看到了特斯拉的这个产品。

获取用户时，需要注意降低用户参与的门槛。有的 App 好不容易把用户吸引过来，但是整个注册过程超级烦琐，用户一看太麻烦就跑了。社交软件 Whatsapp（类似国内的微信）被 facebook 以 190 亿美元收购。Whatsapp 将所有精力都用在了如何让自己的产品更加简单易用，不需要创建用户名或密码就能使用。由于它的简单易用，Whatsappl 的口碑传擂非常好。

2、激活用户：用户的首次体验如何？

很多产品注册用户不少，但是打开率却不高。这一环节要做的是激活他们，让用户真正地使用产品。这就需要先弄明白产品的「啊哈时刻」。什么叫「啊哈时刻」呢？就是用户情不自禁地喜欢上产品亮点、发出赞叹的时刻。例如，网易云音乐在众多音乐件中突围的亮点就是评论。用户打开软件，可能第一件事不是听歌，而是看评论。

要想激活用户，需要绘制一幅通往「啊哈时刻」的路径图。例如你负责的产品是个购物软件，在新用户体验到「啊哈时刻」之前，必须要完成这些步骤：下載 App、注册账户、找到所需商品、放入购物车、填写邮寄地址、付款。在上述一系列环节中，到底用户停留在了哪一步，不再愿意继续下去？是搜不到想要的东西，还是创建账户太麻烦？可以计算每个节点用户的转化率（也就是完成每个步骤的用户比例），看用户是在哪个阶段流失的，以此来优化产品，改提高用户体验。所以，激活用户需要关「啊哈时刻」和活跃率指标（图 2-147）。

下面来看一个关于用户激活的经典案例：拼多多如何激活用户？许多电商 App 在使用过程中有着多余的跳转，导致用户最终放弃了支付。用户在淘宝上通过搜索商品来购物的流程有 6 个环节，通过浏览商品来购物的流程有 7 个环节。拼多多为了少购物环节，从进入首页到支付只有 4 个环节。拼多多是如何做到的呢？它通过 4 大方法将购物得简单（图 2-148）。1）首页直接推荐产品，不放无效信息，不需要用户点击多次到达商品页面。2）没有设置购物车，一件产品直接购买支付，少了用户犹豫的时间。3）所有商品都包邮，用户不需要和客服沟通是否包邮。4）先付款后拼团，将支付环节提前，这样可以让用户提前用团购价完成支付，随后再找人拼团，拼成功了就发货，不成功就退款。

激活用户还可以通过游戏的玩法，给用户发放奖励来唤醒用户，例如打卡、积分、发优惠券等。拼多多的拼团玩法就很好地激活了用户，在各种群里都可以看到用户在拼团、砍价。

3、留存：用户会回来吗？

用户被激活之后，第三个环节就是如何让用户变成回头客留存下来。留存的核心目标是让用户养成使用习惯。这一环节需要关注留存率指标（图 2-149）。如果产品留存率低怎么分析原因呢？可以用群组分析方法来找到原因。下面来看几个经典案例。

亚马逊刚推出会员服务时，许多人说这个计划必定会失败，因为美国的配送成本很高，而以 99 美元的会员费给会员免费配送一年，亚马逊肯定会亏。但亚马逊的真正目标是改变人们的习惯，让用户在购物中习惯会员优惠价格，习惯免运费，从而不再去其他商家买东西，进而提高了用户留存。

蚂蚁森林是阿里巴巴推出的一款在支付宝里的游戏，用户可以到其他用户的页面上去偷取能量，当能量累计到一定程度，就可以申请种一棵树。蚂蚁森林会在现突中种一棵树，并为用户发一个植树的证书。載至 2020 年 3 月 12 日，蚂蚁森林的用户数超过 5.5 亿，累计种下 1.22 亿棵真树，成功提升了支付宝的用户黏性，提高了留存。

4、增加收入：如何赚到更多钱？

这一环节的目标是如何赚到更多钱。收入分为服务收入、广告收入。服务收入是指产品里的付费服务，例如网易音乐的会员服务，用户开通会员才能听某些歌曲。广告收入是指依靠投放在产品里的广告而获取的收入，例如公众号发推广文案就可以带来广告收入。这一环节需要关注以下指标（图 2-150）。1）用来衡量业务总量的指标，例如成交总额、成交数量。2）用来衡量每个人平均情况的指标，例如客单价。3）用来衡量付费情况的指标，例如付费率，复购率。

这一环节有个概念需要重视，那就是「夹点」，它指的是损失潜在收益的地方。例如电商购物中，用户从选择商品到支付之间，很多人会中途放弃付费。要评估这些常见的夹点，分析用户在这些关键环节放弃的原因。

有段时间 facebook 发现用户流失比严重得。之前用户注销账号的确认页面有一段提示：「你确定要注销吗？」如果用户点击「确认」按钮，就注销了。后来 facebook 改变了确认流程，在注销结束之前增加了一个页面，在上面把跟你互动比较紧密的五个朋友的头像列出来，然后配上文字：「你确定要注销吗？」潜台词就是，你如果要注销的话，你的朋友可就再也看不到你了，你再考虑一下？就是这个页面给 facebook 增加了 3% 的留存率。

5、推荐会告诉其他人吗？

前面的 4 个环节做完，就到了第 5 个环节一推荐，也叫病毒营销或者自传播。美国作家马尔科姆·格拉德威尔在《引爆点》这本书中用流行病来类比营销引爆一种流行病需要三个条件一传染物本身、传染物发挥作用所需的环境、人们传播传染物的行为。1）传染物本身。传染物本身是说要对自己的产品有足够的了解。试着自己一个题：我的产品是否真正解決了用户的痛点？如果你是写文章的，就要考你的文章能为用户帯来哪些真正的价值；如果你是做餐饮的，则要考虑你的菜品是否真的为用户所喜欢。2）传染物发挥作用所需的环境。传染物发挥作用所需的环境，也就是指用户所在的环境，对应前面讲的 AARRR 模型的第一环节「获取用户」。要思考使用产品的用户经常在哪些环境（如社区、大学等）出现。3）人们传播传染物的行为。在对自己的产品有了深刻洞察，同时找了目标用户后，还要考虑人们会因为什么目的去分享你的产品，让更多的人看到你的产品。这个条件对应的就是 ARR 模型的第五个环节一推荐，即病毒式营销。

这一环节需要关注的指标有转发率、转化率、K 因子。来看几个这一环节的经典案例。

许多健身 App 鼓励用户将运动轨迹分享到信朋友来打卡，从而实现用户的自传播（图 2-151）。如果没有这种自传播，产品的信息流就会中断，无法实现自长。就好比你在朋友圏转发了一篇自己写的文章，与此同时，有 10 个朋友看到了这篇文章，但是都没有进一步去转发到他们各自的朋友圈，那么你这篇文章的信息流到此已经中断，不会进行二次传播了滴滴通过红包这样的超级营销工具，实现了产品的病毒营销。滴滴红包只有分享给微信好友才能领取到，很多人为了打车省钱，会主动把红包发到群里或者朋友圈（图 2-152）。

民宿平台爱彼迎有一个「旅行基金」的功能，当你每推荐一位好友注册爱彼迎，你和好友都可以获得礼金券，礼金券可以在下次旅行抵扣对应的金额（图 2-153）。

特斯拉对买车用户有个车主引荐奖励计划，车主分享链接以后，通过引荐链接下单的车辆交付后，车主和被引荐的新车主将各自获得免费超级充电额度（图 2-154）。

还有一种让用户推荐的形式，很多付费产品会有一个「参与推广」的功能，如果用户推广到朋友，有人购买产品，那么该用户就会获得一定比例的佣金。就拿我的付费课程「求职秘籍」来说，价格是 99 元，参与推广的用户可以获得 30% 的佣金，有了共同利益以后，用户就会主动推广，从而实现自传播（图 2-155）。

需要注意的是，要坚持把每一次营销当作一种产品体验理念的实现，让用户分享的奖励不能华而不实，要能真正为消费者带来好处。同时，奖励要与产品的核心价值有关。例如，在猴子数据分析社群里，为了鼓励用户完成「闯关游戏」的关卡，会给完成每一关的人发一个红包作为奖励。但是经过分析，我发现这种奖励效果不太好，因为奖励和产品的核心价值没有关系。经过优化，奖励变成了每一关课程相关知识的案例扩展，极大地提高了用户的活跃率。

#### 2.10.4 总结

用户不增长是创业公司做产品的魔咒。只要不增长，用户就会越来越少，例如人人网。AARRR 模型可以帮助我们分析产品的用户行为，可以在不同阶段制定不同运营策略，从而实现用户增长。可以用图 2-156 记住 AARRR：模型的 5 个环节，然后在实际业务中灵活使用。

### 2.11 漏斗分析方法

#### 2.11.1 什么是漏斗分析方法？

从业务流程起点开始到最后目标完成的每个环节都会有用户流失，因此需要一种分析方法来衡量业务流程每一步的转化效率，漏斗分析方法就是这样的分析方法。例如，在淘宝上一款商品的浏览量是 300、点击量是 100、订单量是 20、支付量是 10，在业务流程的每一步都有用户流失，如表 2-24 所。

环节转化率 = 本环节用户数 / 上一环节用户数，是为了衡量相邻业务环节的转化情况。例如，表 2-24 的业务流程中第 1 环节是浏览，第 2 环节是点击，那么点击环节的转化率即为 100（点击用户数）/ 300（浏览用户数）= 33%。

整体转化率某环节用户数 / 第 1 环节用户数，是为了衡量从第 1 环节到该环节为止总体的转化情况。例如，表 2-24 的业务流程中第 1 环节是浏览，第 4 环节是支付，那么支付环节的整体转化率为 10（支付用户数）/ 300（浏览用户数）= 3%。把表 2-24 做成图 2-157，就是常见的漏斗分析图。因为它的形状像漏斗，所以叫作「漏斗图」。再例如图 2-158 是「猴子·数据分析学院」中「求职秘籍」课程在 2020 年 2 月份的漏斗图。

#### 2.11.2 漏斗分析方法有什么用？

漏斗分析的作用是「定位问题节点」，即找到出问题的业务环节在哪。漏斗分析常用于用户转化分析或者用户流失分析，所以漏斗分析中要关注两个指标：用户转化率和用户流失率。

经过各个业务环节转化下来的用户，会产生更大的价值。因为这部分用户更加忠诚，更认可业务的流程。随着转化用户的不断増加，留存用户的规模也在不断增大，产品的盈利规模也会随之增加。流失的用户数量在每个业务环节都不同。可以分析用户主要流失在哪个业务环节，以及为什么流失，是因为业务流程过于复杂，还是产品特性无法完全展现，或是其他原因，最终的目的都是不断减少用户流失率。

#### 2.113 如何使用漏斗分析方法？

以汽车行业为例，可以将业务流程分为三部分：售前、售中、售后，如图 2-159 所示。将汽车行业业务流程中的指标与漏斗分析结合，可以得到环节转化率和整体转化率，如图 2-160 所示。

漏斗分析的整体转化率，是从整体上评估各环节用户占初始环节用户的比例，这样就可以根据一定的比例，去预测未来的大致转化或者流失情況。例如，未来一个月线索达到 4000，那么根据目前这个数值（线索 - 签约转化率为 13%），可以大致估算出最后的签约量应该在 4000 x 13% = 520 左右。漏斗分析的环节转化率可以评估各业务环节之间的转化情，通过比较各环节转化率，从而寻找业务瓶颈点，也就是找到最低转化率对应的业务环节。在上面案例中，环节转化率最低的为「线索一进件」（转化率为 25%）。为什么「线索一进件」的环节转化率最低呢？

毕竟将单纯的用户（线索）发展到愿意进行信审评估（进件），是件很不容易的事，但是这个点是否就是急需解决和优化的流程呢？这就需要使用对比分析方法和行业平均值来比较。如果行业平均值为 19%，那么这里的 25% 已经超出行业均值 6 个百分点了，不应作为最急需解決的点，而应着眼后续流程，即寻找后面的转化薄弱点。如果无法得知行业内平均值，可以与本公司历史转化率进行比较，找出表现最差的业务环节，对症下药，持续优化。对于不同的场景，可以灵活运用斗分析。

下面再来看一个案例。某线上店铺本周的销量降低严重，从上周的 1000 单掉到了 680 单，那么是中间哪个业务环节出了问题？如何改善这种情況？这需要向前探索，去分析用户从浏览商品到最后下单需要经历的步骤是什么，再看这些步骤中，哪一个是薄弱环节，影响了订单的整体转化率。

该案例的业务流程是浏览商品、点击商品、加购物车、提交订单、支付订单。业务流程确定后，使用对比分析方法将本周和上周的数据进行比较，然后用漏斗分析方法来分析，算出各周的环节转化率，如图 2-161 所示。

在两周数据的对比分析中，可以发现「点击一加购」的环节转化率明显降低（从 20% 降为 13%），这意味着用户点击商品后，却不愿意将商品加入购物车。与业务人员沟通后发现，店铺在本周更了商品的介绍页，用户看到本期的商品介绍后，加购的意愿却降低了，导致最后订单量降低。找到原因后，就可以针对性地对商品介绍页进行调优和改善，例如与上期的介绍页结构保持一致，色彩优化等，从而提升运营效率和转化率。

#### 2.11.4 注意事项

使用漏斗分析方法来分析用户转化问题时，不同行业的业务流程不ー样，所以漏斗分析图也不样。如果把漏斗分析方法原封不动地带入某个行业，不去结合所在行业的业务特点，那么分析出的结果很难具有业务指导性。

例如，传统的斗图是以 AARRR 模型为基础，即获客、留存、活跃、变现、推荐，这是以用户增长为核心的漏图。但是对于非社区类产品，例如低频且成交周期长的购车场景而言，传绕的 ARR 模型无法真正表达出汽车行业的业务需求。将漏斗分析方法和购车的业务流程结合起来，这就形成了线索、进件、过审、签约、交车的漏斗图。所以，漏斗分析方法要结合行业进行调整，オ可以产生指导作用。

## 0301. 用数据分析解决问题

### 总结

第 1 步：明确问题。通过观察现象，把问题定义清楚，这是数据分析的第 1 步。只有明确了问题，オ能围绕这个问题展开后面的分析。如果一开始问题就定义错了，那再怎么分析，也是白费时间。

第 2 步：分析原因。这一步是分析问题发生的原因，可以通过下面两个问题把原因搞清楚：1）哪里出了问题？2）为什么会出现这个问题？具体分析步骤如下：1）使用「多维度拆解分析方法」对问题进行拆解，将一个复杂问题细化成各个子问题。2）对拆解的每个部分，使用「假设检验分析方法」找到哪里出了问题。分析的过程可以用「对比分析方法」等多个分析方法来辅助完成。3）在找到哪里出了问题以后，可以多问自己「为什么出现了这个问题」，然后使用「相关分析方法」进行深入分析。

第 3 步：提出建议。找到原因就完事了吗？还不行，要找到对应的办法オ是分析的终点。所以，找到原因以后，还要针对原因给出建议，或者提出可以实施的解决方案。在決策这一步，常用的分析方法是回归分析或者 AARRR 分析。需要注意的是：1）做決策的选项不能太多。太多的选项不仅会增加决策的成本，还会让人迷失，无从下手。相对简单的问题，需要 4 个选项左右；相对复杂的问题，需要 4-7 个选项。2）决策要是可以落地的具体措施，这样決策者才能根据措施，合理安排资源，把措施变成行动。

### 00

前面我们讲了每一种分析方法的使用和案例。但是在实际工作中，业务问题比较复杂，是无法用单独的某一个分析方法来解決的。这一章通过学习如何将单独的分析方法组合起来解决问题。学会以后，再遇到其他问题就可以灵活应用。随着处理的问题越来越多，工作经验越来越丰富，相信你会积累起解决实际问题的经验。

### 3.1 数据分析解决问题的过程

最近我一直咳嗽去了医院，我和医生发生了下列对话。

医生：「咳嗽多久了？」

我：「最近一周都在咳嗽。」

医生：「看下哪里出问题了。我发现你嗓子没发炎，但是在流鼻涕。」

我：「为什么会流鼻涕呢？」

医生：「因为最近天气変冷了，而你穿得少，导致感冒了。」

我：「那如何应对呢？」

医生：「我给你开些感冒药，同时要注意多穿衣服」

看病的过程其实就像数据分析解決问题的过程（图 3-1）：第 1 步明确问题；第 2 步分析原因；第 3 步提出建议。在现实生活中，其实也是用这个过程来解決问题的。数据分析解決问题的过程如图 3-2 所示。

第 1 步：明确问题。通过观察现象把问题定义清楚，这是数据分析的第 1 步。只有明确了问题，才能围绕这个问题展开后面的分析。如果一开始问题就定义错了，那么再怎么分析，也只能是白白浪费时间。

第 2 步：分析原因。这一步是分析问题发生的原因，可以通过下面两个问题把原因搞清楚。1）哪里出了问题？2）为什么会出现这个问题？对应看病这个例子，医生一开始在想「哪里出了问题」，是嗓子导致咳嗽，还是流鼻涕导致咳嗽？最后发现，问题出在流鼻涕。然后，医生在想「为什么会出现这个问题」，围绕这个问题去查找原因。

第 3 步：提出建议。找到原因就完事了吗？还不行，要找到对应的解決办法オ是分析的终点。所以，找到原因以后，还要针对原因给出建议，或者提出可以实施的解决方案。

当完成这 3 步，才能把分析的过程清楚呈现给決策者。这就是使用数据进行有条理的分析，从而准确做出決策的能力。接下来通过一个案例来学习每一步如何具体去做。

案例背景：某店铺上半年（1-6 月）完成的利润，与年初制定的月平均盈利 500 万元的目标还有很大差距。如果按目前销售进度，到年底没有办法完成全年 6000 万元的总利润目标（全年总利润目标 = 月平均利润目标 x 12 = 500 × 12 = 6000 万元）。销售总监要求你尽快找到利润没有达标的原因，以及拿出完成年度目标的方案。

### 3.2 如何明确问题？

我们来学习「用数据分析解決问题」的第 1 步明确问题。数据分析的目标是为了解決生活或工作中遇到的问题。例如你想找数据分析相关的工作，想知道哪些城市找到工作的机会更大，怎么办？再例如，你是公众号的运营，发现最近一周的新增用户数下降了，怎么办？面对这些问题，数据分析都可以帮助你。数据分析解決题的第 1 步是定义清楚问题，这決定了后面工作的成败（图 3-3）。

#### 3.2.1 明确问题的常见错误

有一个段子是说一个小伙子看到一个老头和他脚边的一只狗。然后小伙子问：「你的狗咬人么？」老头说：「不咬人。」于是小伙子弯腰摸了摸这条狗，结果被咬了一口。小伙子气地说：「你不是说你的狗不咬人么？」老头说：「这不是我的狗」。

像这种定义问题的错误在工作中随处可见。例如领导告诉你：「可能是客单价高，最近利润下降了。」听到领导这番话以后，你将问题定义为「客单价高导致利润下滑，怎么办？」这样定义问题有什么风险呢？答案是，在定义问题中就已经包括了「原因」（在这个案例中是「客单价高」）。这样后面所有的工作都变成了收集与价格相关的数据。那么这就导致分析者忽略了其他可能的原因，而只限制在「客单价」这个视野范围内。明确问题決定了你的分析范围，而错误定义问题会缩小分析的范围（图 3-4）。

上面的案例是「明确问题」时常见的错误：定义问题时，分析者根据自己的经验「主观」地把思考限定在「我觉得的范围内」。这种错误也叫做「确认偏误」，就是人们总倾向于寻找证据来支持自己已经相信的事情，从而抵制不同的看法。我们要时刻清晰地提醒自己：数据分析不是主观的断，是一种客观 3.2.2 如何明确问题？明确问题可以图 3-5 所示的方法来进行。

1、明确数据来源和准确性。

为什么要明确数据来源和准确性呢？我们日常看一篇新闻，想知道这篇新闻是「假新闻」还是「真新闻」，最靠谱的办法是看来源。如果是官方发布的，那么可以保证新闻的可靠性。如果是从哪个八卦平台看到的，那么新闻的可靠性就不能保证了。同样地，在明确问题，也要保证数据本身是准确的，才能进行后面的步骤。所以，要明确数据来源和准确性。

如何做呢？可以从时间、地点、数据来源确认问题表现为哪些现象，还可以通过向相关人员提问的方式来沟通清楚。例如可以这样提问。

针对时间：这是观察哪个时间范围的数据发现问题的？

针对地点：这是哪个地区的数据？

针对数据来源：数据来自里？是否核对过数据没有问题？

在本章案例中，可以通过与相关人员沟通，了解清楚「利润没有达到目标」表现为哪些现象。例如，可以观察销售部门（数据来源）提供的上半年 1-6 月（时间）全国（地点）每个月的实际利润，并和每个月的计划利润对比，如表 3-1 所示。

从表中可以看出，公司上半年的利润下达计划为 3000 万元（表中计划利润总计），实际完成 1991.37 万元（表中实际利润总计）。上半年的利润缺口 = 计划利润总计（3000 万元）— 实际利润总计（1991.37 万元）= 1008.63 万元，也就是 16 月完成的利润是落后于计划的目前要解的问题是：上半年（1-6 月）利润落后于计划的原因是什么？公司如何在下半年（7-12 月）完成 4008.63 万元（上半年利润缺口 1008.63 万元 + 下半年利润目标 3000 万元）的利润目标？

2、业务指标理解。

对于业务指标，可以分析指标含义、和谁比。在这个案例里，是用「利润」这个指标，那么可以这样问：利润这个指标是怎么定义的？

通过与业务部门沟通，明确了指标定义：利润 = 销售收入销售成本营业外支出。其中，销售收入 = 客单价 x 用户数，这里的用户数是指进入店铺的人数。销售成本主要包括为实现销售而支出的相关费用和商品采购成本，也就是销售成本 = 销售费用 + 商品采购成本。营业外支出是指各项非营业性支出例如罚款支出、捐赠支出等。

此外，当要解決的问题中有提到「高、低、大、小」等字眼，要问清楚和谁比。这里就用到了前面章节的对比分析方法。为什么要找到比较对象呢？问题本质上是指现状与理想状态之间的差距。因此不知道理想的状态是什么，就无法比较，从而就无法确定问题。所以，在定义问题时，要去弄清楚「比较对象」是谁（图 3-6）。

在上述的案例中，「与上半年的计划利润相比，实际完成利润落后于计划」，这里的比较对象是「上半年的计划利润」。

总结：这一节学习了「用数据分析解決问题」的第 1 步：明确问题，主要包含以下内容。1）明确问题的常见错误。在定义问题时，注意不要加入分析者的「主观猜测」，导致无法分析其他可能的原因。2）如何明确问题。可以用图 3-5 所示的方法。

### 3.3 如何分析原因？

这一节我们来学习「数据分析解决问题」的第 2 步：分析原因。

影响问题的原因可能有很多种，如果把所有原因都分析一遍，那么这个工作量是非常大的。根据「计算的平方律」定律，当一个问题要考虑的因素的复杂度变为原来的 2 倍，那么解决问题需要的时间就会变成原来的 4 倍。所以，在分析原因的过程中，要优先分析那些关键的因素。

例如，你早上着急上班出门，突然发现钥匙不见了。现在的问题是：钥匙在哪里？你想了下钥匙可能在这些地方（问题发生的原因）：衣服、卧室、厨房、卫生间、客厅等。你不会把所有地方都翻一遍，因为找这么多地方，工作量很大，这么大工作量还不如換一把锁划算。那怎么办呢？你会先想天钥匙可能放到哪里了？这种在大量可能性中，通过快速判断最可能的做法，就是优先分析关键因素。

如何知道哪些是「关键的因素」呢？可以在分析的过程中使用这 3 步来分析（图 3-7）。1）使用「多维度拆解分析方法」对问题进行拆解，将一个复杂问题细化成各个子问题。2）对拆解的每个部分，使用「假设检验分析方法」找到哪里出了问题。分析的过程可以用「对比分析方法」等多个分析方法来辅助完成。3）在找到哪里出了问题以后，可以多问自己「为什么出现了这个题」，然后使用「相关分析方法」进行深入分析。现在，通过本章的案例来看下如何分析原因。

在数据分析的第 1 步明确了要解决的问题是：上半年利润落后于计划的原因是什么？公司如何在下半年完成 4008.63 万元的利润目标？需要先找到上半年利润落后于计划的原因，能针对具体的原因制定出详细的改进建议，从而保证在下半年完成目标。为了找到「哪里出了问题」，可以使用多维度拆解分析方法对「利润」这个指标，按指标定义进行拆解，如图 3-8 所示。

至于拆解到什么程度，没有统一的标准，要根据对业务的理解和实际问题灵活把握。接下来使用假设检验分析方法对「多维度拆解分析方法」里面的每个部分进行验证。

1、营业外支出。

提出假设：营业外支出增加导致上半年利润落后于计划，如图 3-9 所示。

收集数据：营业外支出汇总如表 3-2 所示。

得出结论：从表中可以发现，上半年未发生营业外支出，因此可以不用考虑该因素对利润的影响，所以假设「营业外支出增加导致上半年利润落后于计划」不成立。

2、销售成本。

提出假设：销售成本提高导致上半年利润落后于计划，如图 3-10 所示。

收集数据：将今年上半年和去年上半年销售成本进行对比分析，如表 3-3 所示。

表 3-3 中的总销售同比是（今年上半年的总销售成本 13123.87 万元 ー 去年上半年的总销售成本 12719.03 万元）/ 今年上半年的总销售成本 13123.87 万元 = 3.08%，说明今年上半年的总销售成本同比去年是增加了 3.08%。为方便观察数据随时间发生了哪些变化，将表 3-3 中的数据绘制成图 3-11。

从图 3-11 中可以看出，对比去年上半年，今年上半年的销售成本出现了明显的增长。是什么原因造成销售成本增长呢？接下来对「销售成本」的组成部分进行分析。因为销售成本 = 销售费用 + 商品采购成本，所以分别来分析销售费用和商品采购成本的情况。

a）分析销售费用。收集今年上半年的销售费用数据，如表 3-4 所示。为了方便观察数据随时间发生了哪些变化，将表 3-4 中的数据绘制成图 3-12。从图中可以看出，上半年的销售费用是逐步上升的，这会不会就是造成利润减少的原因呢？

答案是不ー定。只单独分析出销售费用是增长的，还不能判断它就是造成利润落后于计划的根本原因。因为销售费用是用来提升销售増长的，如果增加销售费用能帯来销售收入的増长，那也是合理的。所以，需要将销售费用和销售收入结合起来加以分析，这就需要用到一个指标：费率比，费率比 = 投入的费用 / 产生的销售收入。费率比越低，说明通过投入的费用带动销售增长的效果越好。

将上半年的销售费用和产生的销售收入按月份排列，并计算出费率比，如表 3-5 所示。对数据进行可视化设计来观察变化，如图 3-13 所示。从图中可以发现，上半年的费率比是逐步下降的，也就是说，销售费用的增长也提升了销售收入的增长。所以销售费用的上升并不是利润不达标的主要原因。

b）分析商品采购成本。将今年上半年和去年上半年的商品采购成本进行对比分析，如表 3-6 所示。从表中可以发现，今年上半年的平均采购成本（1961.71 万元）低于去年上半年的平均采购成本（2082.48 万元）。由此可以判断，商品采购成本不是影响利润不达标的主要原因。通过多维度拆解分析方法，对销售费用和采购成本分析后，可以判断假设「销售成本增加导致利润水平下降」不成立。

3、销售收入。

提出假设：销售收入少导致上半年利润落后于计划，如图 3-14 所示。

收集数据：将今年上半年和去年上半年的数据进行比较分析，如表 3-7 所示。

得出结论：表 3-7 中的总销售同比是（今年上半年的总销售收入 15115.24 万元 ー 去年上半年的总销售收入 1643.17 万元）/ 今年上半年的总销售收入 15115.24 万元 = -8.79%，今年上半年的总销售收入同比去年下降了 8.79%，说明销售收入少是导致上半年利润落后于计划的主要原因之是什么原因造成销售收入下降的呢？接下来对「销售收入」的组成部分进行分析。因为销售收入 = 客单价 x 用户数，分别来分析客单价和用户数的情况。

a）分析客单价。将今年上半年和去年上半年的客单价进行对比分析，如表 3-8 所示。从表 3-8 中可以发现，今年上半年的平均客单价是 3026 元（平均客单价 = 1-6 月每个月客单价之和 / 6），去年上半年的平均客单价为 2844 元，说明今年上半年的平均客单价是高于去年的，因此客单价并不是影响销售收入下降的主要因素。

b）分析用户数。将今年上半年和去年上半年的用户数进行对比分析，如表 3-9 所示。从表 3-9 中可以发现，今年上半年的平均用户数是 7917 人（平均用户数 = 1-6 月每个月用户数之和 / 6），去年上半年的平均用户数是 9634 人，今年上半年的平均用户数是低于去年上半年的，因此用户数减少是销售收入下降的主要原因。但是如果只分析到这里，这样的分析结果无法产生实际的意义。因为只看用户数下降，还不能决定「接下来要采取哪些具体的措施才能解決问题」。所以，要接着分析导致「用户数」下降的原因是什么（图 3-15）。

现在把「用户数」按用户、产品、竟品这 3 个维度进行拆解。根据具体问题可以決定优先展开分析哪个维度来找到题发生的原因。对于本章的案例，用户数下降是因为用户跑到其他竞争对手购买了，所以可以从「竞品维度」来比较用户数。通过和竞争对手比较发现，公司的用户数比同行竞争对手低很多（图 3-16）。

为了进一步找到用户数低的原因，可以梳理本店铺和竞争对手店铺的业务流程，方便从业务流程提出假设（图 3-17）。第 1 步：用户在店铺中选择自己想要购买的商品；第 2 步：用户比较不同店铺中商品的价格；第 3 步：用户付款购买后，售后部门安排送货上门。

对于第 1 步，可以提出假设：供用户选择的商品不全，用户找不到想购买的商品。对于第 2 步，可以提出假设：价格相对于竟争对手没有优势。对于第 3 步，可以提出假设：售后服务不能让用户满意。可以和竞争对手的数据进行对比，例如通过问卷调研或者电话访谈，来分析本店铺和竞争对手有哪些差异。整个分析思路如图 3-18 所示。

先来看假设 1：供用户选择的商品不全，用户找不到想购买的商品。

通过对比发现，本店铺的商品种类并不比竟争对手少。只是店铺为了处理功能上相对欠缺的老产品，没有及时展示出新产品型号，导致用户不能及时直观地了解新产品。所以假设 1 不成立，用户数下降不是因为店铺商品不全，而是因为具有新功能的产品没有被及时展示在店铺中，导致追求新功能的那一部分用户转去购买竞争对手的产品（图 3-19）。

再来看第 2 个假设：价格相对于竟争对手没有优势。

通过市场调查发现，本店铺在价格定位上和争对手相同。但是，上半年本店铺共计开展过 6 场促销活动，而争对手共计开展过 10 场促销活动。部分用户通过市场比价，被争对手促销的优惠价格吸引，导致本店铺的用户流失。所以假设 2 成立，在相同的商品定价基础上，本店铺的促销活动频次少于竞争对手，导致用户数下降（图 3-20）。

再来看下假设 3：售后服务过程不能让用户满意。

本店铺的商品在用户购买后，需要为用户提供送货上门等售后服务。如果在售后服务的过程中给用户带来不好的体验，会降低品牌良好口碑的传播，降低用户的复购率。通过用户回访，请他们对售后服务过程的质量进行打分，满分为 100 分。分值越高，说明用户对服务的过程越满意。上半年的用户服务满意度如表 3-10 所示（用户满意度分值为每个月的平均分）。

为方便观察数据随时间发生了哪些变化，将表格中的数据绘制成图 3-21。从图 3-21 中可以发现，上半年的满意度数值有下降趋势，可以验证本店铺售后服务的水平也在下降。服务质量的下降会造成用户数下降，所以假设 3 也是成立的。通过以上分析，上半年的用户数下降，是因为：1）具有新功能的产品没有被店铺及时展出，导致追求新功能的用户转向去购买竞争对手的产品； 2）本店铺的促销活动少于竞争对少，导致用户数下降；3）服务质量水平的下降造成了用户数下降。

原因 1 可以快速解決，店铺及时展出新品就可以。原因 2 和原因 3 不是立马能解決的。公司资源有限，一个阶段只能集中解決一个问题，这两个因素中，哪个对用户数下降影响更大呢？这时候可以通过相关分析，来确定影响更大的因素。前文介绍了一种应用相关分析的模式（图 3-22），就是使用相关分析来找出哪些因素与分析目标有相关关系。

我们可以分别计算商品价格、用户满意度和用户数的相关系数，观察这些相关系数的大小，可以得知哪个因素对用户数影响更大。

用户数和商品价格比、用户满意度的数据如表 3-11 所示。其中，商品价格比是用本店铺的平均价格和市场争对手的平均价格相比得到，例如 1 月本店铺的平均价格为 100 元，争对手的平均价格为 434.78 元，那么 1 月商品价格比为：本店铺平均价格（100 元）/ 竞争对手平均价格（434.78 元 = 0.23）。该指标主要是反映商品定价相对于竟争对手是偏高还是偏低，分值越大说明定价越高。

对数据进行相关分析，可以得出用户数和商品价格比的相关系数是 0.773，用户数和用户满意度的相关系数是 0.992。通过相关分析，发现跟用户数相关度最高的因素是用户满意度，所以优先提升服务满意度，即提升店铺的售后服务水平，可以显著提高用户数。现在复盘下这个案例是如何分析的。可以用图 3-23 把前面的分析组织起来，这样和其他人沟通的时候，对方就知道你是如何对问题展开分析的。

### 3.4 如何提出建议？

这一节我们来学习「如何用数据分析解決问题」的第 3 步：提出建议（图 3-24）。也就是根据第 2 步找到的原因提出建议。在提出建议这一步，常用的分析方法是回归分析或者 AARRRI 模型分析方法。下面我们先学习什么是回归分析，然后通过本章案例来看如何应用。

#### 3.4.1 回归分析

一般问题发生的原因有很多种，所以第 2 步找到的原因不会只有一种。这些原因和目标都相关，如果在第 3 步提出建议阶段，只是说 a 和 b 高度相关，那么，你的领导是无法根据「相关」采取具体行动的。

在本章的案例中，虽然找到了利润没达到目标的原因，却不知道要改善到什么程度オ能实现下半年的业务目标。这时候就需要「回归分析」来计算出某个原因能够对目标造成「多大程度」的影响。可以计算出，利润和销售收入的相关关系数是 0.999，说明这两种数据之间是高度相关关系（表 3-12）。

根据数据，绘制出利润和销售收入的相关关系散点图，如图 3-25 所示。现在想要通过销售收入来预测利润，也就是，知道了销售收入要达到多少以后，就可以实现下半年的利润 4008.63 万元。那么如何预呢？能想到的办法是，在散点图上画一条穿过这些点的直线，使这条直线尽量接近各个数据点，这样的直线叫作最佳拟合线，如图 3-26 所示。

你无法使得这条直线穿过每一个点，但是，如果两种数据存在相关关系，那么应该可以保证每一个点合理地接近你所绘制的直线。这样一来，就可以根据销售收入预测出利润的值。

如果你还记得高中几何课程的话，一定能回想起一个直线方程，也就是 `y = ax + b`，这个方程叫作回归方程，对应的这个直线叫作回归线。a 叫作回归系数，b 叫作截距。别被这些高大上的名字吓到，它就是你高中见过的直线方程。在这个例子中，x 表示销售收入，y 表示利润。接下来的问题就是，如何求出 a 和 b 的值。可以使用 Excel 进行回归分析，得到回归方程里面 a 和 b 的值，具体操作如下（图 3-27）。

第 1 步，单击「数据」选项卡下的「数据分析」功能。第 2 步，选择「回归」后单击「确定」按钮，就会跳出回归分析的对话框。跳出回归分析的对话框之后的操作步骤如下（图 3-28）。

第 1 步，在 X 值输入区域」和「Y 值输入区域」选择对应的数据。这里需要注意，一般用横轴的 X 值表示「输入」（能够控制的数据，也叫作自变量），用纵轴的 Y 值表示「输出」（预测结果，也叫作因变量）。因为是要通过销售收入来预测出利润，「X 值输入区域」选择「销售收入」这一列，「Y 值输入区域」选择「利润」这一列。注意，在选择数据的时候不能包括列名，因为列名不是数。

第 2 步，勾选「线性拟合图」。

第 3 步，单击「确定」按钮。

这样就得到了图 3-29 的散点图。选择散点图上任意一个点，右击，在弹出的快捷菜单中选择「添加趋势线」选项。这样就得到了最佳拟合线，然后在出现的页面中勾选最下面的「显示公式」，就会在散点图上显示回归方程（图 3-30）。可以把横轴和纵轴修改成自己想要的名称。如何理解这个回归方程呢？

这个回归方程可以理解为：y（利润）= 0.145 x（销售收入）- 33.306。前面说到，下半年需要完成利润是 4008.63 万元，也就是 y（利润）= 4008.63 万元。代入回归方程中就可以算出 x（销售收入）= 27875.42 万元。也就是说，根据公司目标，要实现 y（利润）= 4008.63 万元，需要将销售收入提升到到 27875.42 万元（图 3-31）。

使用回归分析需要注意：

1、回归分析有很多类型，前面案例里的回归方程只有一种自变量，这种回归分析叫作一元线性回归分析。相比于其他类型的回归分析，一元线性回归分析不仅简单，而且分析结果也容易被非专业的人理解。

2、一元线性回归分析的前提是两种数据之间要有相关关系。所以，要先判断两种数据有相关关系，オ能使用一元线性回归分析。

3、合理分配资源。前面的案例是知道了的值，想知道的值是多少。还有一种情況是，知道了x 的值，想知道的值是多少。例如 x 是投入广告的费用，是产生的收益，这样在推广前就可以知道，投入的成本（x，广告费用）能预期产生多少收益（y，产生的收益）。当決策者有多种推广方案要选择的时候，就可以根据回归分析，知道把有限的资源投入到哪里才能发挥出最好的效果。

#### 3.4.2 回归分析应用

前面通过回归分析，知道了根据公司目标，下半年要实现利润 4008.63 万元，需要将销售收入提升到 27875.42 万元。接下来需要考虑，采取哪些措施才能将销售收入提升到 27875.42 万。在第 2 部分的分析原因，知道了销售收入下降是因为用户数减少。接下来用回归分析来看看销售收入和用户数的关系（图 3-32）。

通过对销售收入和用户数进行相关分析，发现两种数据的相关系数是 0.980，具有高度相关关系，可以使用一元线性回归分析（表 3-13）。通过回归分析，得到回归方程是：y = 0.3318x - 107.85（图 3-33）。该公式可以理解为：y（销售收入）= 0.3318 x（用户数）- 107.85。

前面知道了销售收入要提升到 27875.42 万元，也就是 y（销售收入）= 27875.42 万元，把它代入回归方程可以计算出 x（用户数）= 84338 人。也就是说，要实现销售收入为 27875.42 万元的目标，需要将到店的用户数提升到 84338 人（图 3-34）。

通过分析，为公司下半年的经营提出以下建议：

如果想要完成年度的 6000 万元利润目标，建议在保持目前商品采购成本不変的前提条件下，通过增加销售收入的方式来保证利润目标。下半年需要将销售收入目标设定为 27875.42 万元，平均每个月销售目标设定为 4546.90 万元（27875.42 万元 / 6）。下半年需要吸引 84338 人到店消费，平均每个月到店的用户数是 14057 人（84338 人 / 6）。根据相关分析方法，要想提高到店用户数，需要优先提升店铺的售后服务水平。建议可将此作为关键绩效指标，细化分解到具体的部门去执行，并与日常考核联系起来，这样オ能确保全年利润目标顺利完成（表 3-14）。
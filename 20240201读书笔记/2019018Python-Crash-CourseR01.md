## 记忆时间

## 目录

0501 if 语句

0601 字典

0701 用户输入和 while 循环

## 0501. if 语句

在本章中，你学习了如何编写结果要么为 Ture 要么为 False 的条件测试。你学习了如何编写简单的 if 语句、if-else 语句和 if-elif-else 结构。在程序中，你使用了这些结构来测试特定的条件，以确定这些条件是否满足。你学习了如何在利用高效的 for 循环的同时，以不同于其他元素的方式对特定的列表元素进行处理。你还再次学习了 Python 就代码格式方面提出的建议，这可确保即便你编写的程序越来越复杂，其代码依然易于阅读和理解。

编程时经常需要检查一系列条件，并据此决定采取什么措施。在 Python 中，if 语句让你能够检查程序的当前状态，并据此采取相应的措施。

在本章中，你将学习条件测试，以检查感兴趣的任何条件。你将学习简单的 if 语句，以及创建一系列复杂的 if 语句来确定当前到底处于什么情形。接下来，你将把学到的知识应用于列表，以编写 for 循环，以一种方式处理列表中的大多数元素，并以另一种不同的方式处理包含特定值的元素。

1『注意：if 语句和 else 语句后面都有个冒号 `:`。』

每条 if 语句的核心都是一个值为 True 或 False 的表达式，这种表达式被称为条件测试。Python 根据条件测试的值为 True 还是 False 来决定是否执行 if 语句中的代码。如果条件测试的值为 True，Python 就执行紧跟在 if 语句后面的代码；如果为 False，Python 就忽略这些代码。

在 Python 中检查是否相等时区分大小写。如果大小写很重要，这种行为有其优点。但如果大小写无关紧要，而只想检查变量的值，可将变量的值转换为小写，再进行比较，用 `lower()` 函数。函数 `lower()` 不会修改存储在变量 car 中的值，因此进行这样的比较时不会影响原来的变量。

网站采用类似的方式让用户输入的数据符合特定的格式。例如，网站可能使用类似的测试来确保用户名是独一无二的，而并非只是与另一个用户名的大小写不同。用户提交新的用户名时，将把它转换为小写，并与所有既有用户名的小写版本进行比较。执行这种检查时，如果已经有用户名 'john' （不管大小写如何），则用户提交用户名 'John' 时将遭到拒绝。

要判断两个值是否不等，可结合使用惊叹号和等号（`!=` ），其中的惊叹号表示不，在很多编程语言中都如此。你编写的大多数条件表达式都检查两个值是否相等，但有时候检查两个值是否不等的效率更高。

在 if 语句中可使用各种数学比较，这让你能够直接检查关心的条件。

你可能想同时检查多个条件，例如，有时候你需要在两个条件都为 True 时才执行相应的操作，而有时候你只要求一个条件为 True 时就执行相应的操作。在这些情况下，关键字 and 和 or 可助你一臂之力。要检查是否两个条件都为 True，可使用关键字 and 将两个条件测试合而为一；如果每个测试都通过了，整个表达式就为 True ；如果至少有一个测试没有通过，整个表达式就为 False。为改善可读性，可将每个测试都分别放在一对括号内，但并非必须这样做。关键字 or 也能够让你检查多个条件，但只要至少有一个条件满足，就能通过整个测试。仅当两个测试都没有通过时，使用 or 的表达式才为 False。

有时候，执行操作前必须检查列表是否包含特定的值。例如，结束用户的注册过程前，可能需要检查他提供的用户名是否已包含在用户名列表中。在地图程序中，可能需要检查用户提交的位置是否包含在已知位置列表中。

要判断特定的值是否已包含在列表中，可使用关键字 in。来看你可能为比萨店编写的一些代码；这些代码首先创建一个列表，其中包含用户点的比萨配料，然后检查特定的配料是否包含在该列表中。还有些时候，确定特定的值未包含在列表中很重要；在这种情况下，可使用关键字 not in。例如，如果有一个列表，其中包含被禁止在论坛上发表评论的用户，就可在允许用户提交评论前检查他是否被禁言。

```py
banned_users = ['andrew', 'carolina', 'david']
user = 'marie'
❶ if user not in banned_users:
	print(user.title() + ", you can post a response if you wish.")
```

1『要能想到有些场景可以用「in」和「not in」来解决。』

随着你对编程的了解越来越深入，将遇到术语布尔表达式，它不过是条件测试的别名。与条件表达式一样，布尔表达式的结果要么为 True，要么为 False。布尔值通常用于记录条件，如游戏是否正在运行，或用户是否可以编辑网站的特定内容。在跟踪程序状态或程序中重要的条件方面，布尔值提供了一种高效的方式。

if 语句有很多种，选择使用哪种取决于要测试的条件数。前面讨论条件测试时，列举了多个 if 语句示例，下面更深入地讨论这个主题。

简单的 if 语句。在第 1 行中，可包含任何条件测试，而在紧跟在测试后面的缩进代码块中，可执行任何操作。如果条件测试的结果为 True，Python 就会执行紧跟在 if 语句后面的代码；否则 Python 将忽略这些代码。在 if 语句中，缩进的作用与 for 循环中相同。如果测试通过了，将执行 if 语句后面所有缩进的代码行，否则将忽略它们。

经常需要在条件测试通过了时执行一个操作，并在没有通过时执行另一个操作；在这种情况下，可使用 Python 提供的 if-else 语句。if-else 语句块类似于简单的 if 语句，但其中的 else 语句让你能够指定条件测试未通过时要执行的操作。if-else 结构非常适合用于要让 Python 执行两种操作之一的情形。在这种简单的 if-else 结构中，总是会执行两个操作中的一个。

经常需要检查超过两个的情形，为此可使用 Python 提供的 if-elif-else 结构。Python 只执行 if-elif-else 结构中的一个代码块，它依次检查每个条件测试，直到遇到通过了的条件测试。测试通过后，Python 将执行紧跟在它后面的代码，并跳过余下的测试。在现实世界中，很多情况下需要考虑的情形都超过两个。可根据需要使用任意数量的 elif 代码块。

❶  处的 elif 代码块在顾客的年龄超过 65（含）时，将价格设置为 5 美元，这比使用 else 代码块更清晰些。经过这样的修改后，每个代码块都仅在通过了相应的测试时才会执行。

else 是一条包罗万象的语句，只要不满足任何 if 或 elif 中的条件测试，其中的代码就会执行，这可能会引入无效甚至恶意的数据。如果知道最终要测试的条件，应考虑使用一个 elif 代码块来代替 else 代码块。这样，你就可以肯定，仅当满足相应的条件时，你的代码才会执行。

1『如果知道所有可能的状态，可以把所有的状态都写进 elif 语句里，删掉 else 语句，这种方式可以消除不确定性，消除潜在的 bug。这个观点我是认同的。』

if-elif-else 结构功能强大，但仅适合用于只有一个条件满足的情况：遇到通过了的测试后，Python 就跳过余下的测试。这种行为很好，效率很高，让你能够测试一个特定的条件。

然而，有时候必须检查你关心的所有条件。在这种情况下，应使用一系列不包含 elif 和 else 代码块的简单 if 语句。在可能有多个条件为 True，且你需要在每个条件为 True 时都采取相应措施时，适合使用这种方法。

我们首先创建了一个列表，其中包含顾客点的配料（见❶）。❷ 处的 if 语句检查顾客是否点了配料蘑菇（'mushrooms' ），如果点了，就打印一条确认消息。❸ 处检查配料辣香肠（'pepperoni' ）的代码也是一个简单的 if 语句，而不是 elif 或 else 语句；因此不管前一个测试是否通过，都将进行这个测试。❹ 处的代码检查顾客是否要求多加芝士（'extra cheese' ）；不管前两个测试的结果如何，都会执行这些代码。每当这个程序运行时，都会进行这三个独立的测试。

总之，如果你只想执行一个代码块，就使用 if-elif-else 结构；如果要运行多个代码块，就使用一系列独立的 if 语句。

1『说到点子上了，其他语言里也一样。只需执行一个代码块用 if-elif-else 结构，要执行多个代码块用一系列 if 语句。』

通过结合使用 if 语句和列表，可完成一些有趣的任务：对列表中特定的值做特殊处理；高效地管理不断变化的情形，如餐馆是否还有特定的食材；证明代码在各种情形下都将按预期那样运行。

到目前为止，对于处理的每个列表都做了一个简单的假设，即假设它们都至少包含一个元素。我们马上就要让用户来提供存储在列表中的信息，因此不能再假设循环运行时列表不是空的。有鉴于此，在运行 for 循环前确定列表是否为空很重要。

```py
❶ requested_toppings = []
❷ if requested_toppings:
	for requested_topping in requested_toppings:
		print("Adding " + requested_topping + ".")
	print("\nFinished making your pizza!")
❸ else:
print("Are you sure you want a plain pizza?")
```

1『不错不错，直接用 if 语句来检测列表是否为空。』

在这里，我们首先创建了一个空列表，其中不包含任何配料（见❶）。在 ❷ 处我们进行了简单检查，而不是直接执行 for 循环。在 if 语句中将列表名用在条件表达式中时，Python 将在列表至少包含一个元素时返回 True，并在列表为空时返回 False。如果 requested_toppings 不为空，就运行与前一个示例相同的 for 循环；否则，就打印一条消息，询问顾客是否确实要点不加任何配料的普通比萨（见❸）。

在 ❶ 处，我们定义了一个列表，其中包含比萨店供应的配料。请注意，如果比萨店供应的配料是固定的，也可使用一个元组来存储它们。在 ❷ 处，我们又创建了一个列表，其中包含顾客点的配料，请注意那个不同寻常的配料 —— 'french fries'。在 ❸ 处，我们遍历顾客点的配料列表。在这个循环中，对于顾客点的每种配料，我们都检查它是否包含在供应的配料列表中（见❹）；如果答案是肯定的，就将其加入到比萨中，否则将运行 else 代码块（见❺）：打印一条消息，告诉顾客不供应这种配料。

本章的每个示例都展示了良好的格式设置习惯。在条件测试的格式设置方面，PEP 8 提供的唯一建议是，在诸如 ==、>= 和 <= 等比较运算符两边各添加一个空格，例如，if age < 4: 要比 if age<4: 好。这样的空格不会影响 Python 对代码的解读，而只是让代码阅读起来更容易。

1『个人感觉，只要有冒号 `:`，可以形成代码块的都是要缩进的。那么，逆向想，只要有缩进的，是不是漏掉了冒号呢？』

## 0601. 字典

在本章中，你学习了：如何定义字典，以及如何使用存储在字典中的信息；如何访问和修改字典中的元素，以及如何遍历字典中的所有信息；如何遍历字典中所有的「键-值」对、所有的键和所有的值；如何在列表中嵌套字典、在字典中嵌套列表以及在字典中嵌套字典。

你将学习能够将相关信息关联起来的 Python 字典。你将学习如何访问和修改字典中的信息。鉴于字典可存储的信息量几乎不受限制，因此我们会演示如何遍历字典中的数据。另外，你还将学习存储字典的列表、存储列表的字典和存储字典的字典。理解字典后，你就能够更准确地为各种真实物体建模。你可以创建一个表示人的字典，然后想在其中存储多少信息就存储多少信息：姓名、年龄、地址、职业以及要描述的任何方面。你还能够存储任意两种相关的信息，如一系列单词及其含义，一系列人名及其喜欢的数字，以及一系列山脉及其海拔等。

### 6.1 使用字典

在 Python 中，字典是一系列「键-值」对。每个键都与一个值相关联，你可以使用键来访问与之相关联的值。与键相关联的值可以是数字、字符串、列表乃至字典。事实上，可将任何 Python 对象用作字典中的值。在 Python 中，字典用放在花括号 {}  中的一系列「键-值」对表示。「键-值」对是两个相关联的值。指定键时，Python 将返回与之相关联的值。键和值之间用冒号分隔，而「键-值」对之间用逗号分隔。在字典中，你想存储多少个「键-值」对都可以。

1『 Python 里字典的表示方式跟 JS 里对象是一模一样的。（2020-08-29）』

字典是一种动态结构，可随时在其中添加「键-值」对。要添加「键-值」对，可依次指定字典名、用方括号括起的键和相关联的值。下面在字典 alien_0 中添加两项信息：外星人的 x 坐标和 y 坐标，让我们能够在屏幕的特定位置显示该外星人。我们将这个外星人放在屏幕左边缘，且离屏幕上边缘 25 像素的地方。由于屏幕坐标系的原点通常为左上角，因此要将该外星人放在屏幕左边缘，可将 x 坐标设置为 0；要将该外星人放在离屏幕顶部 25 像素的地方，可将 y 坐标设置为 25。

```py
alien_0 = {'color': 'green', 'points': 5}
print(alien_0)
❶ alien_0['x_position'] = 0
❷ alien_0['y_position'] = 25
print(alien_0)
```

这个字典的最终版本包含四个「键-值」对，其中原来的两个指定外星人的颜色和点数，而新增的两个指定位置。注意，「键-值」对的排列顺序与添加顺序不同。Python 不关心「键-值」对的添加顺序，而只关心键和值之间的关联关系。

使用字典来存储用户提供的数据或在编写能自动生成大量「键-值」对的代码时，通常都需要先定义一个空字典。要修改字典中的值，可依次指定字典名、用方括号括起的键以及与该键相关联的新值。对于字典中不再需要的信息，可使用 del 语句将相应的「键-值」对彻底删除。使用 del 语句时，必须指定字典名和要删除的键。

```py
alien_0 = {'color': 'green', 'points': 5}
print(alien_0)
❶ del alien_0['points']
print(alien_0)
```

在前面的示例中，字典存储的是一个对象（游戏中的一个外星人）的多种信息，但你也可以使用字典来存储众多对象的同一种信息。例如，假设你要调查很多人，询问他们最喜欢的编程语言，可使用一个字典来存储这种简单调查的结果。

```py
favorite_languages = {
	'jen': 'python',
	'sarah': 'c',
	'edward': 'ruby',
	'phil': 'python',
	}

❶ print("Sarah's favorite language is " +
❷ favorite_languages['sarah'].title() +
❸ ".")
```

正如你看到的，我们将一个较大的字典放在了多行中。其中每个键都是一个被调查者的名字，而每个值都是被调查者喜欢的语言。确定需要使用多行来定义字典时，在输入左花括号后按回车键，再在下一行缩进四个空格，指定第一个「键-值」对，并在它后面加上一个逗号。此后你再次按回车键时，文本编辑器将自动缩进后续「键-值」对，且缩进量与第一个「键-值」对相同。定义好字典后，在最后一个「键-值」对的下一行添加一个右花括号，并缩进四个空格，使其与字典中的键对齐。另外一种不错的做法是在最后一个「键-值」对后面也加上逗号，为以后在下一行添加「键-值」对做好准备。

1『字典培养多行的习惯，并且直接在最后一个「键-值」对后加花括号收尾。注意，最后一个「键-值」对后面可以加一个逗号，为以后扩展做准备。』

注意：对于较长的列表和字典，大多数编辑器都有以类似方式设置其格式的功能。对于较长的字典，还有其他一些可行的格式设置方式，因此在你的编辑器或其他源代码中，你可能会看到稍微不同的格式设置方式。这个示例还演示了如何将较长的 print 语句分成多行。单词 print 比大多数字典名都短，因此让输出的第一部分紧跟在左括号后面是合理的（见 ❶）。请选择在合适的地方拆分要打印的内容，并在第一行末尾（见 ❷）加上一个拼接运算符（+ ）。按回车键进入 print 语句的后续各行，并使用 Tab 键将它们对齐并缩进一级。指定要打印的所有内容后，在 print 语句的最后一行末尾加上右括号（见 ❸）。

### 6.2 遍历字典

一个 Python 字典可能只包含几个「键-值」对，也可能包含数百万个「键-值」对。鉴于字典可能包含大量的数据，Python 支持对字典遍历。字典可用于以各种方式存储信息，因此有多种遍历字典的方式：可遍历字典的所有「键-值」对、键或值。

1『通过方法来实现访问字典里的各个元素：访问「键-值」对用 items() 方法；访问键用 keys() 方法；访问值用 values() 方法。比如 dict1.items()，注意这些方法返回的都是一个列表。』

```py
user_0 = {
	'username': 'efermi',
	'first': 'enrico',
	'last': 'fermi',
	}

❶ for key, value in user_0.items():
	❷ print("\nKey: " + key)
	❸ print("Value: " + value)
```

for 语句的第二部分包含字典名和方法 items() （见 ❶），它返回一个「键-值」对列表。接下来，for 循环依次将每个「键-值」对存储到指定的两个变量中。在前面的示例中，我们使用这两个变量来打印每个键（见 ❷）及其相关联的值（见 ❸）。注意，即便遍历字典时，「键-值」对的返回顺序也与存储顺序不同。Python 不关心「键-值」对的存储顺序，而只跟踪键和值之间的关联关系。

在 6.2.6 节的示例 favorite_languages.py 中，字典存储的是不同人的同一种信息；对于类似这样的字典，遍历所有的「键-值」对很合适。如果遍历字典 favorite_languages，将得到其中每个人的姓名和喜欢的编程语言。

在不需要使用字典中的值时，方法 keys() 很有用。下面来遍历字典 favorite_languages，并将每个被调查者的名字都打印出来：

```py
favorite_languages = {
	'jen': 'python',
	'sarah': 'c',
	'edward': 'ruby',
	'phil': 'python',
	}

❶ for name in favorite_languages.keys():
	print(name.title())
```

遍历字典时，会默认遍历所有的键，因此，如果将上述代码中的 for name in favorite_languages.keys(): 替换为 for name in favorite_languages:，输出将不变。

```py
favorite_languages = {
	'jen': 'python',
	'sarah': 'c',
	'edward': 'ruby',
	'phil': 'python',
	}

❶ if 'erin' not in favorite_languages.keys():
	print("Erin, please take our poll!")
```

方法 keys() 并非只能用于遍历；实际上，它返回一个列表，其中包含字典中的所有键，因此 ❶ 处的代码行只是核实 'erin' 是否包含在这个列表中。由于她并不包含在这个列表中，因此打印一条消息，邀请她参加调查。

字典总是明确地记录键和值之间的关联关系，但获取字典的元素时，获取顺序是不可预测的。这不是问题，因为通常你想要的只是获取与键相关联的正确的值。

要以特定的顺序返回元素，一种办法是在 for 循环中对返回的键进行排序。为此，可使用函数 sorted() 来获得按特定顺序排列的键列表的副本：

```py
for name in sorted(favorite_languages.key()):
```

如果你感兴趣的主要是字典包含的值，可使用方法 values()，它返回一个值列表，而不包含任何键。例如，如果我们想获得一个这样的列表，即其中只包含被调查者选择的各种语言，而不包含被调查者的名字。

这种做法提取字典中所有的值，而没有考虑是否重复。涉及的值很少时，这也许不是问题，但如果被调查者很多，最终的列表可能包含大量的重复项。为剔除重复项，可使用集合（set）。集合类似于列表，但每个元素都必须是独一无二的。通过对包含重复元素的列表调用 set()，可让 Python 找出列表中独一无二的元素，并使用这些元素来创建一个集合。在 ❶ 处，我们使用了 set() 来提取 favorite_languages.values() 中不同的语言。

```py
for language in set(favorite_languages.values()):
```

1『剔除列表里的重复元素，可以调用集合方法 set() 来实现。字典里每个「键-值」对之间记得要用逗号 , 隔开。遍历字典里的「键-值」对用函数 items()；遍历字典里的键用函数 keys()；遍历字典里的值用函数 values()。』

1『发现 Python 语法跟 JS 有很多是一样的，这里的 Set() 集合。（2020-08-29）』

### 6.3 嵌套

有时候，需要将一系列字典存储在列表中，或将列表作为值存储在字典中，这称为嵌套。你可以在列表中嵌套字典、在字典中嵌套列表甚至在字典中嵌套字典。正如下面的示例将演示的，嵌套是一项强大的功能。

字典 alien_0 包含一个外星人的各种信息，但无法存储第二个外星人的信息，更别说屏幕上全部外星人的信息了。如何管理成群结队的外星人呢？一种办法是创建一个外星人列表，其中每个外星人都是一个字典，包含有关该外星人的各种信息。

这些外星人都具有相同的特征，但在 Python 看来，每个外星人都是独立的，这让我们能够独立地修改每个外星人。

在什么情况下需要处理成群结队的外星人呢？想象一下，可能随着游戏的进行，有些外星人会变色且移动速度会加快。必要时，我们可以使用 for 循环和 if 语句来修改某些外星人的颜色。例如，要将前三个外星人修改为黄色的、速度为中等且值 10 个点，可以这样做。

经常需要在列表中包含大量的字典，而其中每个字典都包含特定对象的众多信息。例如，你可能需要为网站的每个用户创建一个字典（就像 6.3.1 节的 user.py 中那样），并将这些字典存储在一个名为 users 的列表中。在这个列表中，所有字典的结构都相同，因此你可以遍历这个列表，并以相同的方式处理其中的每个字典。

有时候，需要将列表存储在字典中，而不是将字典存储在列表中。例如，你如何描述顾客点的比萨呢？如果使用列表，只能存储要添加的比萨配料；但如果使用字典，就不仅可在其中包含配料列表，还可包含其他有关比萨的描述。

1『字典里的「值」可以是任意数据类型，甚至是任意的对象。』

在下面的示例中，存储了比萨的两方面信息：外皮类型和配料列表。其中的配料列表是一个与键 'toppings' 相关联的值。要访问该列表，我们使用字典名和键 'toppings'，就像访问字典中的其他值一样。这将返回一个配料列表，而不是单个值。

每当需要在字典中将一个键关联到多个值时，都可以在字典中嵌套一个列表。在本章前面有关喜欢的编程语言的示例中，如果将每个人的回答都存储在一个列表中，被调查者就可选择多种喜欢的语言。在这种情况下，当我们遍历字典时，与每个被调查者相关联的都是一个语言列表，而不是一种语言；因此，在遍历该字典的 for 循环中，我们需要再使用一个 for 循环来遍历与被调查者相关联的语言列表。

正如你看到的，现在与每个名字相关联的值都是一个列表（见❶）。请注意，有些人喜欢的语言只有一种，而有些人有多种。遍历字典时（见❷），我们使用了变量 languages 来依次存储字典中的每个值，因为我们知道这些值都是列表。在遍历字典的主循环中，我们又使用了一个 for 循环来遍历每个人喜欢的语言列表（见❸）。

列表和字典的嵌套层级不应太多。如果嵌套层级比前面的示例多得多，很可能有更简单的解决问题的方案。

可在字典中嵌套字典，但这样做时，代码可能很快复杂起来。例如，如果有多个网站用户，每个都有独特的用户名，可在字典中将用户名作为键，然后将每位用户的信息存储在一个字典中，并将该字典作为与用户名相关联的值。

## 0701. 用户输入和 while 循环

在本章中，你学习了：如何在程序中使用 input() 来让用户提供信息；如何处理文本和数字输入，以及如何使用 while 循环让程序按用户的要求不断地运行；多种控制 while 循环流程的方式：设置活动标志、使用 break 语句以及使用 continue 语句；如何使用 while 循环在列表之间移动元素，以及如何从列表中删除所有包含特定值的元素；如何结合使用 while 循环和字典。

大多数程序都旨在解决最终用户的问题，为此通常需要从用户那里获取一些信息。例如，假设有人要判断自己是否到了投票的年龄，要编写回答这个问题的程序，就需要知道用户的年龄，这样才能给出答案。因此，这种程序需要让用户输入其年龄，再将其与投票年龄进行比较，以判断用户是否到了投票的年龄，再给出结果。

在本章中，你将学习如何接受用户输入，让程序能够对其进行处理。在程序需要一个名字时，你需要提示用户输入该名字；程序需要一个名单时，你需要提示用户输入一系列名字。为此，你需要使用函数 input()。你还将学习如何让程序不断地运行，让用户能够根据需要输入信息，并在程序中使用这些信息。为此，你需要使用 while 循环让程序不断地运行，直到指定的条件不满足为止。通过获取用户输入并学会控制程序的运行时间，可编写出交互式程序。

### 7.1 函数 input() 的工作原理

函数 input() 接受一个参数：即要向用户显示的提示或说明，让用户知道该如何做。在这个示例中，Python 运行第1行代码时，用户将看到提示 Tell me something, and I will repeat it back to you:。程序等待用户输入，并在用户按回车键后继续运行。输入存储在变量 message 中，接下来的 print(message) 将输入呈现给用户：

```py
prompt = "If you tell us who you are, we can personalize the messages you see."
prompt += "\nWhat is your first name? "
name = input(prompt)
print("\nHello, " + name + "!")
```

这个示例演示了一种创建多行字符串的方式。第1行将消息的前半部分存储在变量 prompt 中；在第 2 行中，运算符 += 在存储在 prompt 中的字符串末尾附加一个字符串。

使用 int() 来获取数值输入。使用函数 input() 时，Python 将用户输入解读为字符串。为解决这个问题，可使用函数 int()，它让 Python 将输入视为数值。函数 int() 将数字的字符串表示转换为数值表示。将数值输入用于计算和比较前，务必将其转换为数值表示。

1『不能将输入值直接存储为数字，只能在获得输入值（字符串）后用方法 int() 将其转化为数字类型。』

处理数值信息时，求模运算符（%）是一个很有用的工具，它将两个数相除并返回余数。求模运算符不会指出一个数是另一个数的多少倍，而只指出余数是多少。如果一个数可被另一个数整除，余数就为 0，因此求模运算符将返回 0。你可利用这一点来判断一个数是奇数还是偶数：

```py
number = input("Enter a number, and I'll tell you if it's even or odd: ")
number = int(number)
if number % 2 == 0:
	print("\nThe number " + str(number) + " is even.")
else:
	print("\nThe number " + str(number) + " is odd.")
```

### 7.2 while 循环简介

for 循环用于针对集合中的每个元素都一个代码块，而 while 循环不断地运行，直到指定的条件不满足为止。

1『注意，Python 里这边的 while 判断条件不需要放在括号里。』

你每天使用的程序很可能就包含 while 循环。例如，游戏使用 while 循环，确保在玩家想玩时不断运行，并在玩家想退出时停止运行。如果程序在用户没有让它停止时停止运行，或者在用户要退出时还继续运行，那就太没有意思了；有鉴于此，while 循环很有用。

在前一个示例中，我们让程序在满足指定条件时就执行特定的任务。但在更复杂的程序中，很多不同的事件都会导致程序停止运行；在这种情况下，该怎么办呢？例如，在游戏中，多种事件都可能导致游戏结束，如玩家一艘飞船都没有了或要保护的城市都被摧毁了。导致程序结束的事件有很多时，如果在一条 while 语句中检查所有这些条件，将既复杂又困难。

在要求很多条件都满足才继续运行的程序中，可定义一个变量，用于判断整个程序是否处于活动状态。这个变量被称为标志，充当了程序的交通信号灯。你可让程序在标志为 True 时继续运行，并在任何事件导致标志的值为 False 时让程序停止运行。这样，在 while 语句中就只需检查一个条件 —— 标志的当前值是否为 True，并将所有测试（是否发生了应将标志设置为 False 的事件）都放在其他地方，从而让程序变得更为整洁。

1『 while 循环一般结合计数器 count 使用，或直接给定一个「退出」条件。count 的使用体现出的思维：定义一个变量为「标识」，充当交通信号灯。只需检测标识的状态是否为 Ture。』

```py
prompt = "\nTell me something, and I will repeat it back to you:"
prompt += "\nEnter 'quit' to end the program. "

❶ active = True
❷ while active:
	message = input(prompt)
	❸ if message == 'quit':
		active = False
	❹ else:
		print(message)
```

这个程序的输出与前一个示例相同。在前一个示例中，我们将条件测试直接放在了 while 语句中，而在这个程序中，我们使用了一个标志来指出程序是否处于活动状态，这样如果要添加测试（如 elif 语句）以检查是否发生了其他导致 active 变为 False 的事件，将很容易。在复杂的程序中，如很多事件都会导致程序停止运行的游戏中，标志很有用：在其中的任何一个事件导致活动标志变成 False 时，主游戏循环将退出，此时可显示一条游戏结束消息，并让用户选择是否要重新玩。

要立即退出 while 循环，不再运行循环中余下的代码，也不管条件测试的结果如何，可使用 break 语句。break 语句用于控制程序流程，可使用它来控制哪些代码行将执行，哪些代码行不执行，从而让程序按你的要求执行你要执行的代码。

例如，来看一个让用户指出他到过哪些地方的程序。在这个程序中，我们可以在用户输入 'quit' 后使用 break 语句立即退出 while 循环：

```py
prompt = "\nPlease enter the name of a city you have visited:"
prompt += "\n(Enter 'quit' when you are finished.) "

❶ while True:
	city = input(prompt)
	if city == 'quit':
		break
	else:
	print("I'd love to go to " + city.title() + "!")
```

以 while True 打头的循环（见❶）将不断运行，直到遇到 break 语句。这个程序中的循环不断输入用户到过的城市的名字，直到他输入 'quit' 为止。用户输入 'quit' 后，将执行 break 语句，导致 Python 退出循环：

注意：在任何 Python 循环中都可使用 break 语句。例如，可使用 break 语句来退出遍历列表或字典的 for 循环。

要返回到循环开头，并根据条件测试结果决定是否继续执行循环，可使用 continue 语句，它不像 break 语句那样不再执行余下的代码并退出整个循环。

2『哈哈，这里算是明白 break 和 continue 的使用原则：首先这两个都只是针对循环语句的。1）break 是直接从该点退出循环，不执行其后面的语句，退出循环；2）continue 是直接从该点返回到判断语句，也是忽略后面的语句，但不退出循环。做一张任意卡片。』 —— 已完成

```py
current_number = 0

while current_number < 10:
    ❶ current_number += 1
    if current_number % 2 == 0:
        continue
    print(current_number)
```

我们首先将 current\_number 设置成了 0，由于它小于 10，Python 进入 while 循环。进入循环后，我们以步长 1 的方式往上数（见❶），因此 current\_number 为 1。接下来，if 语句检查 current_number 与 2 的求模运算结果。如果结果为 0（意味着 current\_number 可被 2 整除），就执行 continue 语句，让 Python 忽略余下的代码，并返回到循环的开头。如果当前的数字不能被 2 整除，就执行循环中余下的代码，Python 将这个数字打印出来：

每个 while 循环都必须有停止运行的途径，这样才不会没完没了地执行下去。每个程序员都会偶尔因不小心而编写出无限循环，在循环的退出条件比较微妙时尤其如此。如果程序陷入无限循环，可按 Ctrl + C，也可关闭显示程序输出的终端窗口。

要避免编写无限循环，务必对每个 while 循环进行测试，确保它按预期那样结束。如果你希望程序在用户输入特定值时结束，可运行程序并输入这样的值；如果在这种情况下程序没有结束，请检查程序处理这个值的方式，确认程序至少有一个这样的地方能让循环条件为 False 或让 break 语句得以执行。

### 7.3 使用 while 循环来处理列表和字典

到目前为止，我们每次都只处理了一项用户信息：获取用户的输入，再将输入打印出来或作出应答；循环再次运行时，我们获悉另一个输入值并作出响应。然而，要记录大量的用户和信息，需要在 while 循环中使用列表和字典。

for 循环是一种遍历列表的有效方式，但在 for 循环中不应修改列表，否则将导致 Python 难以跟踪其中的元素。要在遍历列表的同时对其进行修改，可使用 while 循环。通过将 while 循环同列表和字典结合起来使用，可收集、存储并组织大量输入，供以后查看和显示。

1『作者的观点：for 循环只适合遍历列表，想要遍历列表并修改列表的话，用 while 循环来实现。』

```py
# 首先，创建一个待验证用户列表
# 和一个用于存储已验证用户的空列表
❶ unconfirmed_users = ['alice', 'brian', 'candace']
confirmed_users = []

# 验证每个用户，直到没有未验证用户为止
# 将每个经过验证的列表都移到已验证用户列表中
❷ while unconfirmed_users:
	❸ current_user = unconfirmed_users.pop()
	print("Verifying user: " + current_user.title())
	❹ confirmed_users.append(current_user)

# 显示所有已验证的用户
print("\nThe following users have been confirmed:")
for confirmed_user in confirmed_users:
	print(confirmed_user.title())
```

我们首先创建了一个未验证用户列表（见❶），其中包含用户 Alice、Brian 和 Candace，还创建了一个空列表，用于存储已验证的用户。❷ 处的 while 循环将不断地运行，直到列表 unconfirmed\_users 变成空的。在这个循环中，❸ 处的函数 pop() 以每次一个的方式从列表 unconfirmed\_users 末尾删除未验证的用户。由于 Candace 位于列表 unconfirmed\_users 末尾，因此其名字将首先被删除、存储到变量current\_user 中并加入到列表 confirmed\_users 中（见❹）。接下来是 Brian，然后是 Alice。

为模拟用户验证过程，我们打印一条验证消息并将用户加入到已验证用户列表中。未验证用户列表越来越短，而已验证用户列表越来越长。未验证用户列表为空后结束循环，再打印已验证用户列表。

在第 3 章中，我们使用函数 remove() 来删除列表中的特定值，这之所以可行，是因为要删除的值在列表中只出现了一次。如果要删除列表中所有包含特定值的元素，该怎么办呢？假设你有一个宠物列表，其中包含多个值为 'cat' 的元素。要删除所有这些元素，可不断运行一个 while 循环，直到列表中不再包含值 'cat'，如下所示。

```py
pets = ['dog', 'cat', 'dog', 'goldfish', 'cat', 'rabbit', 'cat']
print(pets)

while 'cat' in pets:
	pets.remove('cat')
	print(pets)
```

可使用 while 循环提示用户输入任意数量的信息。下面来创建一个调查程序，其中的循环每次执行时都提示输入被调查者的名字和回答。我们将收集的数据存储在一个字典中，以便将回答同被调查者关联起来：

```py
responses = {}

# 设置一个标志，指出调查是否继续
polling_active = True
while polling_active:

# 提示输入被调查者的名字和回答
❶ name = input("\nWhat is your name? ")
response = input("Which mountain would you like to climb someday? ")

# 将答卷存储在字典中
❷ responses[name] = response

# 看看是否还有人要参与调查
❸ repeat = input("Would you like to let another person respond? (yes/ no) ")
if repeat == 'no':
polling_active = False

# 调查结束，显示结果
print("\n—- Poll Results —-")
❹ for name, response in responses.items():
print(name + " would like to climb " + response + ".")
```

这个程序首先定义了一个空字典（responses），并设置了一个标志（polling\_active），用于指出调查是否继续。只要 polling\_active 为 True，Python 就运行 while 循环中的代码。

在这个循环中，提示用户输入其用户名及其喜欢爬哪座山（见❶）。将这些信息存储在字典 responses 中（见❷），然后询问用户调查是否继续（见❸）。如果用户输入 yes，程序将再次进入 while 循环；如果用户输入 no，标志 polling\_active 将被设置为 False，而 while 循环将就此结束。最后一个代码块（见❹）显示调查结果。
Andreas Wagner.(2021).2024140如何解决复杂问题.(胡正飞译).浙江教育出版社 => 前言

第 6 章

方案景观：如何解决旅行推销员问题

将寻找解决方案的任务委托给计算机

在说到运输业处境艰难的时候，我们通常想到的都是卡车司机，他们在路上孤独度日，与家人长期分离，缺乏锻炼，还要在高速公路休息站吃那些可能导致动脉堵塞的食物。但对雇用司机的公司来说，生活也不是一片乐土。要想在一个高度竞争、利润微薄的市场中迎难而上，必须解决的实质问题是效率 —— 燃油消耗、停工时长，还有最重要的路线规划。成功或失败，也许就取决于其中百分之几的效率差异。

制定卡车的行车路线似乎很容易。在仓库装货，在地图上标出客户的位置，连点成线，好啦，开车吧！别傻了。每辆卡车的装货量有限，交货日期也被限制在特定的时间窗口内，或许还有多个装货和卸货点，仅仅是找出通往多个卸货点的最短路径，就足够让司机感到为难了。当然，司机是个罕见的天才除外。拜访 3 个客户有 6 条不同的路线 —— 好吧，一般的司机都能算出来。别急，我们继续，拜访 4 个客户有 24 条路线，拜访 5 个客户有 120 条路线。10 个客户？300 万条路线。15 个客户？超过 1 万亿条路线。问题开始越变越难了，飞快上升的数字难免让人害怕。在现实中，如果客户数目有数百个，那探究其对应的路线数目到底有多少条已经没有什么实际意义了。以上情况针对的只是一辆卡车。而像联邦快递这样拥有超过 4 万辆卡车的公司，抛开其飞往 200 多个国家的 600 架飞机不算，想要为它们规划出最佳路线，靠一个天才可是远远不够的。

以尽可能低的成本交付最大数量的货物是一个数学问题，而且是很多公司每天都会遇到的一个复杂问题，所以这注定是一个为计算机准备的问题。但除非你有一个能够日复一日地解决这个问题的算法，否则就算有计算机也没辙。何为算法？算法是计算机可以遵循的一系列简化的计算序列。

寻找算法同样是一项艰辛的工作，只不过劳神的不是卡车司机，而是计算机科学家。最短送货路线问题太有名也太困难了，以至于计算机科学家为此专门创造了一个缩写：VRP（车辆路径问题，vehicle routing problem）。它是 19 世纪一个更著名、更古老的问题，即旅行推销员问题（traveling salesman problem，TSP）的伴生问题。在 19 世纪晚期和 20 世纪早期，有多达 35 万名销售人员在全美兜售商品，当一个销售人员需要拜访多个客户并希望走最短路线时，这个问题自然会浮出水面。它不仅对这些旅行销售员而言很重要，对其他行业的人员同样至关重要，如巡回牧师和巡回法官。以法官为例，他们需要以固定的路线在辖区内巡回，并在特定的日子开庭审案。虽然现在已经不再采取这一做法了，但巡回法院的名字还是得以保留了下来。成千上万的计算机科学家在诸如 TSP 和 VRP 这样的难题上投入了巨大的精力，倒不是因为他们对卡车司机和推销员有多关心，而是因为这类问题在许多其他的领域里也会时不时冒出来。为了绘制复杂分子的原子结构图，化学家需要使分子结晶，再将 X 射线束照射到晶体上，测量其原子如何衍射光束。问题是，单从一个角度是不能达到目的的，化学家需要转换数百个角度来测量光束的衍射。换句话说，晶体的位置需要被旋转数百次。旋转得越合理，这些位置之间的总路径越短，实验所花时间就越短。

一位想在夜空中观察数百颗恒星或星系的天文学家也会面临类似的问题。每一次观测时，望远镜都必须调整到一个精确的位置，对大型望远镜来说，这个调整的活是由计算机驱动的马达来完成的。现代的望远镜非常昂贵，为了让世界各地的研究者能够共享望远镜资源，他们必须排队等候宝贵的观测时间。望远镜对准目标位置的调整速度越快，移动的距离就越短，使用效率就越高，可以留出更多的时间给观测者。

同样，当计算机芯片的设计者在一个新的芯片上摆放数百万个晶体管时，他们需要尽量缩短晶体管之间的线路总长。否则，其设计结果会导致宝贵的、以平方毫米计的芯片面积的浪费。另外，电子如果在晶体管之间进行长距离传播，也会浪费宝贵的能量。

旋转晶体的最短路径，调整望远镜位置最经济的方式，晶体管之间的最短线路长度，这些问题的关注点虽然不同，从数学上看却是类似的。解决复杂问题需要最具创造性的解决方案

比车辆路径问题的应用更重要的是，该问题对我们有着深刻的启迪作用：复杂问题处处都有，而复杂问题的本质是它需要最具创造性的解决方案。理解了这一点，就相当于拥有了一块能够对创造力进行广义理解的敲门砖。大自然用于创造巴基球和雪花所使用的技巧，同样适用于为上述复杂问题提供创造性的解决方案。而这些技巧，正是跨越那些无法理解的、广袤无际的景观时所需的。

以图 6-1 为例，图中的序号和箭头代表着从一个仓库出发拜访 10 个客户的路径。客户由图中的序号代表，图下方的数字串代表访问客户的顺序，每一个数字串代表一条路径编码。

图 6-1　车辆路径问题示意图

仅仅 10 个客户就产生了超过 300 万条不同的路径，每一条路径都可以用类似的数字串来表示。同时，每一条路径都有相应的代价，可以用旅行距离、时长、燃料消耗量来体现，也可以出于环保的考虑，用二氧化碳排放量来表示。就像任意一个核苷酸序列都编码了一个解决生命问题的方案一样（无论好坏），任意一条访问客户的编码序列都对应着车辆路径问题的一个答案。这些答案当中，大多数是糟糕的、过长的路线，但也有少数是高效的、短的路线。在适合度景观里，一个 DNA 序列或者一种基因型对应着景观里的一个位置。而车辆路径问题的所有答案加在一起也组成了一个景观，在这个景观中，一条路径也对应着一个位置，路径的长度就是这个位置的标高。而当我们评价一个答案的质量如何的时候，就跟我们说一个生物体的适合度如何是一样的。

这个路径的代价景观也是一个抽象的、高维的景观，而不是一个三维景观。起伏的沙丘和崎岖的山脉、深浅不一的洼地和山涧，就是不同路径的代价在景观里所呈现出来的地貌。与进化景观不同，但与原子和分子的能量景观相同的是：它的最高峰是最糟糕的地方，因为这里也是路径最长的地方。

任何针对车辆或销售人员的路径的算法都是一种预先设定，用于在代价景观中搜索，寻找与最佳和最短路线相对应的最深的那个山谷。此类算法有点像一个分子在寻求一种特别稳定的原子架构，也就是寻找能量景观里的一个深谷。而算法在车辆路径问题的代价景观里的探索，跟振动着的分子在能量景观里到处游历，或者进化中的生物体在适合度景观里寻寻觅觅没有什么区别。

在进化景观里，最小的进化步骤是导致单个字母改变的 DNA 突变，即点突变。而同样的步骤在车辆路径问题的代价景观里根本不起作用。想象一下，按照图 6-1（a）下方的数字序列，将一个客户（比如 5 号客户）替换为任意一个其他客户（比如 10 号客户）。这是一种和点突变最为接近的方式，但这种方式造成了两个问题。第一，因为上来就排除了 5 号客户，所以最终的路径根本不会访问此客户。第二，10 号客户被访问了两次。换言之，简单地效仿点突变的方式违反了路径规划的两个基本原则：（1）所有的客户都必须访问到；（2）每个客户只能访问一次。相邻的路径不能只有一个客户不同。我们需要的是一种新的「变异」，变更或者交换访问两个客户的顺序，如图 6-1（b）所示，交换 5 号客户和 6 号客户的访问顺序。交换，是为了保证每个客户只访问一次。实际上，连接任何数量客户的任何路径都可以用这种交换序列的方式来创建。换个说法，从景观的任意位置出发，你都可以通过交换客户位置的方式到达另一个任意位置，而景观里最少的可能步骤就在其中。贪婪算法：只接受更优的结果

这种旅行的最终目标是找到最深的山谷。为了达到这个目标，计算机科学家发明了很多算法，有好的，也有差的。让我们来看一个特别简单的例子。

任意选择一条路径 —— 不管它有多长、多么低效，然后随机交换两个客户。如果交换的结果是路径变短了，就留下这条路径，反之则回到原点。然后随机交换其他两个客户，如果路径变短了，就再把它留下。重复这些步骤。每一次成功的交换都会改变路径在景观中的位置。一步接一步，一次成功的交换接着一次成功的交换，最终你将得到一条不能再通过交换而缩短的路径。

这种算法在景观中保持着下降的趋势，目的是寻找最低点。这和自然选择在适合度景观中一路向上的趋势是一致的。自然选择只允许适合度提升，这种算法则只允许路径长度缩短。如果把最初的答案看作景观里的一颗珠子，那这个算法就好比作用于珠子上的重力，把珠子向下一路拉到最近的据点。这样的算法很重要，原因是它们很简单。

计算机科学家给它们取了一个「贪婪」的称号，而贪婪不一定是坏事。假如代价景观是一个陨石坑的话，在经过岁月的风化和侵蚀后，任何的一系列下坡动作都会让你到达底部。但这个「假如」是一个大大的问号。

车辆路径问题属于计算机科学家称为组合优化的一大类问题。这是因为每个解决方案中都包含不同的构件，而算法就是要以不同的方式将这些构件组合起来，并找出一个最佳的或者优化的答案。在车辆路径问题中，构件就是客户。当为卡车规划路径时，你要将同一批客户以不同的顺序进行组合，并找到最短路径。在设计一个电网的时候，你要把不同位置的多个电厂组合起来，以确保客户获得足够的电能。在医院里安排护士工作的时候，你要分配不同的护士轮班组合。而当谋划一场战斗的时候，你要用不同的武器组合去攻击不同的目标，以达到使敌人的损失最大化的目的。

并非所有的组合优化问题都很棘手，而它们都具有一个解决方案景观。针对这些景观，在经过半个多世纪的探索、测绘和研究之后，计算机科学家已经掌握了其中的关键之处，即让这些问题变复杂的因素。一个问题之所以复杂，不是简单地因为它有很多可能的答案 —— 所有的组合优化问题都是这样。其实我们已经很熟悉产生困难的原因了，只要看看自组装的分子和适合度景观就可以知道：所有的答案组成了一个崎岖不平的、月球般的陨石坑景观，里面有无数的浅坑、不太多的深坑，以及极少数很深的坑，而要从所有的坑里把最深的坑找出来几乎不可能。

车辆路径规划的代价景观就是这样，大大小小的坑不计其数。一个只能下降的算法可能会钻进一个小陨石坑里（这样的坑太多了），陷在里面无法自拔。即便是基于偶然的运气，它掉进了一个大陨石坑里，也可能走不了多远。这是因为大的陨石坑就像麻子脸，里面还有很多小一些的陨石坑，而陨石坑里还套着更小的陨石坑。该算法可能会在一个靠近大坑边缘的小陨石坑里终结旅程，所对应的路径长度比其能达到的最短值要长出很多，但这时已经回天无力了。

复杂问题还有另一个令人讨厌的特性：它们会越来越复杂，这是因为它们的规模会越来越大。随着客户、发电厂、护士或者武器数量的增加，陨石坑的数量会呈指数级增长。将陨石坑「翻译」为技术术语，就是局部极小值（local minima）。就像分子能量景观中的极小值一样，其数量很快就会超过最强大的计算机的处理能力。在一个有 10 个客户的车辆路径景观中，存在着大约 100 个局部极小值，对于 15 个客户来说，相同的景观内存在超过 1 000 个局部极小值。而对于具有实际意义的客户数目而言，这些极小值的数目是数不清的。在这么多极小值中，只有一条属于最佳路径，或者说全局极小值（global minimum），要找到它如同大海捞针。在现实中，人们所期望的往往只是一个「够好」的答案，即一个在众多极小值中「比较深」的答案，而并不需要那个最优的答案。雪花，才是复杂问题的解决之道。

在这样的环境下，任何算法在探索景观的时候都会面临一个常见的问题：为了走出一个较浅的山谷，它需要克服重力持之以恒的下拉力。进化也遇到了同样的问题，因为它也面临着自己的贪婪算法：自然选择。

模拟退火算法：即使结果变差，也暂时接受它

幸运的是，在贪婪算法失败的地方，其他的算法还能够完成接力。其中一种算法叫作模拟退火（simulated annealing）。退火一词来自冶金业，指的是一种降低钢和其他金属的脆性，增加其可塑性的处理工艺。例如，剑匠在锻造剑的时候就会使用这种工艺。当一个铁块被退火时，它首先会被加热到一定的温度，在这个温度下，铁原子会强烈振动，发生移位。如果以非常慢的速度使铁块冷却，这会使原子形成小晶体，进而使铁更具延展性。这种处理方法的核心是「热」，也就是使分子能够探索能量景观，发现巴基球、金团簇和钻石的方法。这不是巧合，创造力的不同领域之间本来就有着深入的联系。

模拟退火 —— 它的名称已经说明了一切，是一种利用计算机模拟退火过程的算法。该算法可以针对某一问题在其解决方案景观里探索，并一步一步地在景观内游历（如果这个问题是如何确定卡车的路线，那么每一步可能意味着交换两名客户）。在每一个步骤之后，算法都会计算该步骤是否会带来一个更好的答案，如一个更短的路径。如果是的话，算法将接受这个步骤的结果。这与贪婪算法完全相同。关键的区别在于：即使结果变差了，算法也会以一定的概率接受该步骤。在算法运行早期，这个概率很高 —— 算法接受上坡和下坡的可能性差不多。随着时间的推移，算法继续探索景观，「冷却」开始 —— 算法会逐渐降低接受上坡结果的可能性。在 1 000 步以后，算法或许只会接受 1/2 的上坡结果；在 10 000 步以后，算法可能只接受 1/10 的上坡结果；在 10 万步以后，则可能只接受 1/100 的上坡结果…… 最后，算法将只接受下坡的结果。

如果想了解这个过程和铁块的冷却过程有多少相似之处，我们可以将某一问题的解决方案景观与第 5 章中的巴基球或雪花的能量景观比较一下。如果把贪婪算法看作重力在向下拉一颗珠子，无论这颗珠子是用来比喻碳原子的结构，还是车辆路径问题的答案，模拟的加热过程都和使珠子逃离重力作用的抖动是一样的。通过加热，粒子的剧烈抖动就像能量景观里的上坡运动（意味着更加不稳定的碳分子）。同时，在模拟退火的早期阶段，算法也允许珠子移动到糟得多的答案上去（意味着长得多的路径）。珠子一旦落入山谷，抖动很快会把它从那里拽出来，而不管山谷有多深，分子有多稳定，路径有多完美。在早期阶段，不管地形如何崎岖不平，珠子所得到的只是探索景观的广度。随着冷却的进行，景观内的抖动会逐渐变弱。珠子更倾向于下坡，倾向于朝着更稳定的分子或者更短的路径前进，也更倾向于锁定在当前的山谷里。如果山谷很深，逃跑基本上就别指望了，因为这需要连着上好多次坡。但在崎岖的景观中，最深的山谷中往往还包含着较浅的山谷，即便景观的抖动变弱了，这颗珠子还是有可能从较浅的山谷里跳出来，滚动到下一个山谷中。只有到了最后，珠子才会被限定在一个山谷里，这时，它将到达这个山谷的底部 —— 最后的安息之地。这个位置，就对应着大自然中最稳定的分子，或者算法所能找到的最佳答案。

模拟退火算法的吸引力在于一个简单的数学事实：只要冷却足够慢，也即振动强度的下降速度足够慢，我们就肯定可以找到最深的山谷，也就是找到全局极小值或者最短送货路径。这里说的振动，和遗传漂变震动一个在适合度景观里探索的种群是一样的。一个小规模的种群在强烈的遗传漂变作用下进化，就好比模拟退火算法的早期阶段。模拟退火算法本身也有点儿像进化，一开始种群规模比较小，而随着时间的推移，种群规模逐渐变大，遗传漂变的作用就变得越来越弱。与进化相比，模拟退火算法还有一个优势，即它是一个计算机算法，我们可以控制它的每一个细节。而在生物进化中，并没有一个策划者会为了利益最大化而操纵进化中的种群。例如，种群规模取决于许多环境变量，包括气候、食物、竞争者等，这些都没办法进行人为控制。模拟退火算法的成功与否取决于温度高低，而温度是可以由计算机算法精密控制的。正是由于这一点，模拟退火以及人类发明的其他算法不仅能够解决复杂问题，还能比大自然做得更好。

遗传算法：模拟物种进化，找到最佳方案

我们能把同样的思路用到进化上吗？能不能在计算机里模拟进化，让进化变得更可控呢？这种想法并不算牵强，达尔文的进化论本身就可以看作一种算法，只不过步骤简单得多：突变、选择、重复。只是这个算法转换的不是比特和字节，而是生物，所以它可以用于模拟 DNA、模拟表现型以及模拟生物体。在这样的模拟中，我们可以控制每一个细节 —— 突变多久发生一次，以何种标准选择最佳变体，是否允许交配和重组等。这种控制水平还可以再次帮助我们提升算法解决问题的能力。更重要的是，工程师不仅可以修改算法，还可以利用它来解决他们所关心的问题，这些问题可能跟车辆路径问题一样，与大自然本身没什么关系。利用进化算法来为人类造福的梦想并不新鲜，这可以回溯到计算机科学的先驱阿兰·图灵（Alan Turing）。

1950 年，图灵在一篇题为「计算机器与智能」（Computing Machinery and Intelligence）的开创性文章中，设想了一种既能思考又能学习的机器，而且他认为，与 DNA 突变类似的「随机元素」可能会帮助造出这台机器。20 世纪六七十年代，等到计算机的处理能力强大到能够模拟进化的时候，图灵的愿景实现了。那时，一个新的研究领域出现了：进化计算（evolutionary computation）。这一领域的先驱者之一是约翰·霍兰德（John Holland），他当时是密歇根大学工程与计算机科学专业的教授。霍兰德生性开朗，热情洋溢，全身每个细胞都散发着对科学的喜爱。他对新思想的热情富于感染力，对既定教条的蔑视根深蒂固。正是这些特征，使得他在 20 世纪 70 年代成了进化计算的先驱。那时，他开发了一系列模拟进化的计算机算法（他称之为遗传算法），这些算法直到现在都还是进化计算中最强大的算法。通过他和其他人的工作，进化计算发展成了一门新兴学科，而且在今天拥有了成千上万的研究者，他们的目的就是在大自然的进化算法的基础上不断改进。

模拟退火是将单颗珠子推动着穿过解决方案景观。与模拟退火算法不同的是，遗传算法则面向多颗珠子或整个种群。在计算机内部，这个种群的每一个成员都携带着一条「染色体」，也就是图 6-1（a）中的数字串，它编码了一个答案，答案的质量好坏未知，就像 DNA 编码了一个适应性未知的生物体一样。每条数字串都可以「变异」成为新的数字串，例如，每条「染色体」都编码了一个路径规划问题的答案，而将「染色体」上随机的两个客户进行调换就是一次变异。计算机可以借此在种群中选择最佳的解决方案，从而选择一个新的、改进的种群，就像生物进化一样。

遗传算法所遵循的是生物进化中久经考验的原则，所以，当它们面对复杂问题时，也会遇到同样的障碍。自然选择本身是无情的。和婆罗洲的丛林中进行的自然选择一样，在崎岖的景观中，计算机算法所执行的选择在寻找最高的适应性山峰或者最低成本的山谷时，表现非常拙劣。自然选择本身也是短视的，所有不完美的解决方案都会被它消灭。更糟糕的是，它不接纳任何失败，而这些失败对最终的成功是必不可少的。

幸运的是，遗传漂变可以帮助遗传算法避开这个陷阱，就像它对生物进化做的那样。大多数遗传算法所涉及的种群规模从几十到几千不等 —— 种群规模越大，所需要的内存和时间越多。这些种群规模远小于十几亿的微生物群体，更像是大型动植物种群，遗传漂变在其中可以强大到克服选择对下坡路的厌恶。换句话说，遗传算法天然就不会受困于无情的选择，这要归功于其适度的种群规模，而适度的种群规模本身是由有限的计算能力决定的。

遗传算法也可以模拟有性生殖。在它们的种群中，一些个体通过交换模拟染色体上的片段，实现「交配」并生出「孩子」，于是产生了解决问题的新方法。这跟基因重组交换生物体内真实的 DNA 一样。这种人工重组还可以在景观中远距离传送个体，而要是想靠一步一步的算法推进，那可能永远也找不到新的解决方案。在生物进化过程中，我们看到了有性生殖所取得的惊人成功，在遗传算法中，重组也已经被证明是如此重要，以至于有些科学家在编制算法的时候，将 90% 的染色体变化设置为由重组引起，而只有 10% 由突变引起。遗传算法和模拟退火算法只是求解算法大家族中的两个成员。这个家族中还有很多其他名字怪异的成员，如分支定界（branch-and-bound）、线性规划（linear programming）和禁忌搜索（tabu search）。科学家对「旅行推销员」这个古老、重要、复杂的问题进行了深入的思考，在洞彻其数学之道后，创造出了这些算法。正是日积月累的数学经验，帮助科学家在景观里找出了不同的捷径，并设计出擅长寻找这些捷径的算法。所有这些算法在应对类似「寻找最短路径」之类的棘手问题时，表现都相当出色。例如，1987 年，一条能够将全世界 666 个旅游目的地都连接起来的最短路径被世人广泛熟知。这是在超过 101 500

种可能路径中找到的最优解。到了 1998 年，经过 10 年的算法设计和算力提升，莱斯大学的研究人员终于发现了连接美国 13 509 座城镇的最短路径。

可能会让圣诞老人感兴趣的一个更大的问题是：找出连接所有已知的 190 万个人类居住区的最短路线。这个问题还未解决，目前取得最好结果的算法所发现的路线长度为 750 万千米，而这已经很了不起了：从数学上可以证明，这条路线比起那条还没有找到的最短路线最多长 0.5%。假如圣诞老人经营着一家货运公司的话，他肯定要关心利润率，这下他终于可以放心啦。这就是最先进的算法在拥有强大计算能力的计算机科学家团队手里所取得的成就。它们有时能针对某些具有惊人复杂度的问题找到最佳解决方案。如果做不到的话，那可能是因为景观太过复杂，即便算法进行了简化，但还是无能为力。例如，尽管模拟退火算法可以确保在任何景观中最终都能找到最深的山谷，但是求解一些问题所需的冷却过程是如此缓慢，以至于算法需要数千年的时间才能找到最优解。

大多数先进的算法针对的都是那些已经研究得比较透彻的问题，其解决方案已经具备了一个模糊的轮廓可供参考。然而，工程师每天还是需要面对很多新的问题，比如如何减少内燃机的废气排放，如何提升太阳能电池板的效率。在这种情况下，相应的景观还笼罩在黑暗之中，我们和算法都是在盲目地进行探索。这时候，遗传算法就可以派上用场了，因为这种算法采取的方式恰好就是生物进化探索适合度景观的方式：盲目变异再加上选择。如果你觉得很难接受这种盲目性，那么就想想同样盲目的生物进化所创造的众多奇迹吧。

今日之算法已经取得了非凡的成就，但大多数人并不会将其产出称为创造性的产品，无论我们说的是最短的送货路线，还是医院里最优的人员配置方案，更不用说那些嗡嗡作响的电网。缘何如此？让我们重新审视一下遗传算法吧。它们所遵循的步骤与进化创造出红杉树、蓝鲸这样令人惊叹的物种所采取的方法是一样的。我们当然认同这些物种都是一个个创造性过程的结果，那么，算法和进化之间又有什么区别呢？这种区别，一定不是取决于算法怎样创造出新生事物，因为这种「怎样」对生物进化和模拟进化来说是相同的。这种区别一定是来自算法创造了些什么，也就是说取决于算法的染色体和它所编码之物。

大多数遗传算法的染色体是由数字串组成的，代表着一些抽象事物，如访问客户的顺序。而真实染色体上的 DNA 是一串分子，可以对现实世界中的对象进行编码，无论是微小的蛋白质还是巨大的恐龙。每当进化创造出一种蛋白质，以消化一种新的食物、感知一种新的气味、抵抗一种新的抗生素，或者每当进化创造出一种跑得更快的瞪羚、飞得更高的鸟类、潜得更深的鱼类，它就解决了一个巨大的组合优化问题。而组成这个问题的基本元素就是那 4 个耳熟能详的 DNA 字母。进化，在适合度景观里寻找着高山之巅的时候，所做的就是将这 4 个字母以一种全新的方式组合在一起。

说到这儿，一切就都再清楚不过了：想要真正创新，就要先选择正确的构件。最早理解这个原则并加以实施的是约翰·科扎（John Koza），他是遗传算法先驱约翰·霍兰德的一位博士生。从 20 世纪 90 年代起，科扎与其同事一起设计了遗传算法，其染色体不仅编码了电路元件（如电阻、电容），还编码了这些元件连接在一起的方式。他们使用这些算法创造出的新型电路，达到了法律所定义的「创造性」标准。这一标准与心理学家定义的「创造性」差不多，也就是「针对某个问题的新颖的解决方案」，只是它明确定义了「新颖」的含义：有资格获得专利。每一个发明都解决了某些问题，但只有最新颖的原创才有资格获得专利。用美国专利法的话来说，一项发明，如果对一个在其领域内拥有普通技能的人来说具备「非显而易见性」，那么它就是可以申请专利的。科扎的遗传算法帮助创造了达到这一标准的电路。

在之后的几年时间里，这些算法为十几个功能电路创建了线路图，比如向音响系统的低音炮发送低频声音的低频滤波器。其中有几个电路已有人类工程师发明过，而且在科扎之前已经由美国电话电报和贝尔实验室等公司申请了专利。但是不管怎样，科扎他们的这种「再发明」释放了一个强烈的信号：算法可以拥有创造性，其创造物可以和人类创造的物品相媲美。

2005 年，科扎团队创造的算法发现了一种新的控制器，就是在汽车处于巡航状态时用于稳定车速的控制器。因为该控制器足够新颖，他们的团队获得了相关专利，而这也是第一个由机器发明的专利。遗传算法的创新潜力并不止于此。利用染色体来编码，遗传算法可以进化出在捕获光线方面表现非常优异的表面结构，从而提高太阳能电池的效率。针对这个捕获光线的问题，存在着许多次优的表面结构，也就是景观里的那些浅谷，类似重组这样的算法可以帮助生物体避免在进化过程中陷入那些次优解中。借助对望远镜的复杂镜头系统进行编码的染色体，遗传算法可以进化出一种宽视野目镜，比人类设计并取得过专利的镜头更优越。当把染色体编码作用于天线部件时，有一种遗传算法可以替美国国家航空航天局的太空任务装备新型的、在外太空使用的天线。2006 年，在美国国家航空航天局的一次太空技术任务中，这种天线被安装在了卫星上。其独特之处在于，这是太空中的第一个人类制造物。与其说这个制造出来的硬件是由人类设计的，不如说这是由一个算法进化出来的。上面说的都是工程领域的事情，而在科学领域又何尝不是如此？我们之所以对牛顿、伽利略等科学家的聪明才智尊崇不已，是因为他们能通过观察一颗星星或一个钟摆这样的物理系统提炼出大自然中的数学规律。事实证明，模拟进化过程的算法也有这样的能耐。2009 年，康奈尔大学的科学家提出了一种可以发现钟摆系统运动方程的算法。这个系统可以是由一个悬挂着的重锤组成的简单钟摆，也可以是复杂些的双钟摆，也即由两个悬挂着的重锤组成的钟摆系统。算法所需要的是钟摆运行的数据，以及组成运动方程的解的构件。而构件就是变量和数学函数。换言之，这种算法不仅可以针对晶体管、透镜和电子线路，还可以针对数学函数。数学函数本身同样可以突变、重组，将这个过程重复下去，算法就会找到一个能够完美描述数据的函数组合。算法有此壮举，因此当有人把遗传算法称为「盒子里的托马斯·爱迪生」时，我们也不会大惊小怪。或者我们也可以称其为「盒子里的伽利略」。显然，创造性算法的时代已经到来。

很多人对这样的想法都心存畏惧。这的确让人不安，就好像人类突然认识到了地球并不是宇宙的中心，承认了我们和黑猩猩有着共同的祖先，发现了我们不是唯一一种能从镜子中辨识出自己的动物。自哥白尼革命以来的几个世纪里，这样的发现一点一点地砸掉了人类的妄自尊大。但不安归不安，这些发现会一直持续下去，包括这一点：不是只有人类才有创造力。

下面的说法或许会让你好受些：「机器」这个词仍然会让很多人联想到过去时代的产品，像是 18 世纪的玩意儿，比如蒸汽机、纺织机，或者由弹簧、连杆、轴承、链条和齿轮构成的计时器。创造性机器可不是这样的，它们所执行的算法也不是。一个算法经常会被拿来和食谱类比，一些厨师会严格遵循食谱，机器会死板地执行算法，但这样的算法其实并不会产生任何新的东西，每次你运行算法，就跟按照食谱做菜一样，最后端出来的菜都是一样的。而遗传算法和类似模拟退火的算法，跟传统的食谱有很大区别，它们是随机的，有各种可能性。这意味着随机性对此类算法很重要，就像生物进化一样，基因组里每一次 DNA 发生突变和重组的位置都是随机的，而每一次随机变化都有可能改变进化的途径。所以，生物进化和创造性机器的产物都是不可预测的、新颖的、独一无二的，从这一点上来说，创造性机器和人类的艺术作品有着异曲同工之妙。由计算机创作的艺术作品可能会比机器创造出来的技术更让你心神不宁。你可能会想到，伟大的艺术品都是自成一格、独一无二的，这说什么都跟一个算法在景观里钻来钻去的理念格格不入。为了消除这种不和谐感，我们有必要再次回忆一下。我们所遇到的景观都是辽阔无垠的，大到足以容纳无数像雪花一样独特的创造物，而一个算法的运行过程也是不可预测的，对每一个这样的创造物，它可能都只会发现一次。

日本东京的龙安寺有一件令人瞩目的艺术品，正好属于「生成式艺术算法」（artsy algorithm）所能解决的问题。这个寺庙中有一座著名的石庭，设计简约，在一层碎石床上精心布置着 15 块石头。庭院中散发着和谐宁静的神秘气氛。它被联合国教科文组织纳入了世界遗产名录，每年都有成千上万的游客到访。遗憾的是，我们不知道艺术家是如何营造出这座石庭的强大气场的，因为我们连这座拥有 500 年历史的石庭的创造者姓甚名谁都不知道。认知科学家格特·凡·托德（Gert van Tonder）及两位合作者使用数学工具分析了这座石庭的设计，发现了一个令人啧啧称奇的简单模式。从寺庙的主厅 —— 石庭的最佳观景点看过去，对称排列的石头使人联想到了分形树木图案。这是一种对人类有特殊吸引力的模式，也许是因为我们进化的源头是非洲大草原吧。换句话说，石庭的吸引力部分来自从大自然里的一个无处不在的主题里提取出来的抽象图案。不管是有心还是无意，艺术家在解决创造宁静氛围这个问题时，采取了在石庭里布置石头的时候嵌入分形树木图案的方案。理解艺术品的力量是一回事，创造艺术品则是另外一回事。但即使是在后一个领域内，算法也取得了长足的进步，特别是在创作音乐作品方面成绩斐然。这绝非巧合，而是因为音乐能够为创造性算法提供理想的构件。

音乐作品的基本构件是动机（motif），即以各种形式进行变化的旋律片段。几个世纪以来，作曲者和演奏者早已对这些变化的方式谙熟于心，并将其进行了分类。作曲家可以通过放慢节奏来「扩张」一个音乐动机，也可以通过加快节奏来「压缩」它，还可以采用倒序、排列置换、逆行、转调等技法。在 18 世纪，当音乐骰子（德国人称之为 Musikalische Würfelspiele）成为欧洲流行的室内游戏时，人们已经通晓了将这种「变异」的音乐动机随机组合成新的音乐片段的技巧。这些游戏中最著名的当属莫扎特创作的游戏，人们通常会先掷骰子，然后根据结果从一大堆音乐片段中抽出小段来，拼接在一起组成一首华尔兹舞曲、波兰舞曲或小步舞曲。

计算机时代将这一传统推向了新的高度，并催生了一个专门的人工智能研究分支 —— 用算法来作曲。其先驱者之一是戴维·科普（David Cope），他是一位颇有成就的美国作曲家。20 世纪 80 年代，在科普还是个年轻人的时候，其作品就受到了音乐评论家的赞扬，并在卡内基音乐厅进行了演出。也就是在这段时间内，当他受人之托试图创作一部歌剧时，却经历了一段严重的长达几个月的瓶颈期。在为了养家糊口而绝望地继续创作之余，他开始思考计算机是否能帮他作曲。最终，在一个叫作「音乐智能实验」（Experiments in Musical Intelligence，EMI）的项目中，科普的努力取得了累累硕果，他亲切地称这个项目为「Emmy」。当 Emmy 接收到作曲家的作品后，她（是的，科普就是这么称呼他的这个项目的）会进行分析，找出能够代表作曲家风格的标志性元素，也就是乐曲的构件。然后，她会在这些构件中加入变化，也就是突变，最后创造出新的组合。最终的结果就是产出了带有巴赫、马勒或维瓦尔第风格的新作品，速度之快，让人惊叹。用科普自己的话说：「你按下按钮，就会一下子出现成百上千部奏鸣曲。」我们珍视作曲家的作品，部分原因是他们的作品数量有限。毕竟，作曲家也是凡人，也有生老病死。科普也意识到，Emmy 无限的创造力会贬低这些作品的价值。于是他马上决定关掉了 Emmy。几年后，他把她的数字大脑也给封存了起来，但此时他已经发表了上千首 Emmy 创作的作品。其中有些制作成了 CD，有些则可以通过互联网平台欣赏。有些听众嘲笑这些作品没有灵魂，有些则认为这些作品非常感人。但是除非事先被告知，不然许多人都无法识别出哪些作品是由 Emmy 创作的。这使得 Emmy 的作品成了著名的图灵测试的音乐版。图灵测试的目的是区分人工智能和人类智能，在 20 世纪 50 年代的原始版本中，测试至少需要三方参加：人类、人工智能和裁判。裁判看不见其他两位参与者，只能向他们提问题，而且只能收到书面回答。然后，针对每一项答案，裁判要辨别其到底是来自人类智能还是人工智能。如果裁判错了，那就说明人工智能通过了测试。

俄勒冈大学也开展了一次类似的测试，对象是 Emmy 创作的一部巴赫风格的作品。评委们分别倾听了一部 Emmy 的作品、一部巴赫的作品，还有一部由巴赫同时代的作曲家创作的作品（也是巴赫风格的），这三部作品均由同一位专业钢琴家演奏。当评委们被问到这些曲子分别由谁创作的时候，他们答错了。他们认为 Emmy 的作品属于真正的巴赫，而第三部作品（人类的作品）是由计算机谱写的。Emmy 通过了图灵测试！

尽管如此，一些评论家还是对 Emmy 的作品嗤之以鼻，斥之为「仿作」。为此，科普回应说，「所有的作曲家都会直接或间接地引用其他的音乐，包括他们自己的作品」，「我可以在莫扎特的交响乐中找到一段又一段引用或者演绎海顿类似段落的地方，我们还是非常尊崇两位作曲家」。科普将音乐创作视作「灵感的剽窃」，把 Emmy 的作品称为「重组的音乐」，而这丝毫没有贬低它们的原创性的意思。相反，它们复用、修改和重组了之前的内容，这跟大自然的做法如出一辙。

不过，尽管在 Emmy 的创作过程中，突变和重组都发挥了一定的作用，但她并没有执行遗传算法，即没有通过持续数代的突变和选择来进化出一部作品。也有其他一些算法做过类似的尝试，其中一个是「旋律体」（Melomics），其名字来自「Melody」（旋律）和「Genomics」（基因组学）两个单词的组合。2012 年，「旋律体」创作了一部由伦敦交响乐团及其顶级音乐家演奏和录音的作品。一些听众认为，该作品极具艺术性，令人愉快且富于表现力。但就跟大多数现代音乐一样，人们对此的看法并不一致。在其他音乐类型中，算法也可以从事创造性的工作，如爵士乐。其中一个叫作「继承者」（Continuator）的算法，是由来自巴黎索尼计算机科学实验室的弗朗索瓦·帕切特（Francois Pachet）发明的。「继承者」算法「倾听」了一位人类演奏者的即兴弹奏，并学着以同样的风格进行了创作。帕切特将这些即兴创作的作品送去参加图灵测试，同时参加测试的还有钢琴家阿尔伯特·范·维内达尔（Albert van Veenendaal）。帕切特聘请了两位音乐评论家进行评审。在听完一段即兴演奏后，他们必须判断这到底是来自维内达尔还是「继承者」算法。结果是，他们听不出来。下面的故事来自另一次图灵测试：

在周一举行的比赛中，主队 Friona 队尽管打出了 7 次安打和 8 次得分，但在 5 局的比赛中还是以 10:8 输给了客队 Boys Ranch 队。Friona 队表现完美，Hunter Sundre 在 Boys Ranch 队的投球局里打成 2:2，在第三局中上了一垒，在第四局中上了三垒……Friona 队多次成功盗垒，横扫 8 个垒包。这段文字是一场小联盟棒球赛的总结报道。这篇报道可不寻常，因为与小联盟有关的新闻报道并不多。而更不寻常的是，这篇报道是由计算机撰写的。位于芝加哥的 Narrative Science 是该算法的发明者。这家公司和其他一些合作者共同开发了专门针对体育赛事、公司收益或者房地产交易等各式报告的算法，只要有任何一家媒体客户订购，它们便可以根据现有的数据即时创建所需的文档。许多客户都倾向于匿名订购，因为记者们已经开始担心他们的饭碗不保了。订购者中也有一些实名的著名媒体，如《福布斯》杂志或美联社，它们会利用这些算法在每季度生产 3 000 份财务报告。很有可能，你正在阅读的一份杂志 —— 无论是在线的还是纸质的，里面就有那么几则自动生成的报道。2014 年的一项研究表明，人们根本分不清楚这类文本到底是人类撰写的还是计算机生成的。计算机已经开始涉足人类创造力的多个领域。虽然它们还无法成为贝多芬、贝克特或毕加索，但它们的产品早已不是我们脑海里的老古董了。像 Narrative Science 或 Jukedeck（Jukedeck 是一家英国初创公司，主要业务是根据人们对视频音轨的需求来销售算法创作的音乐）这样的公司已经在大众当中积累了相当的人气，它们也正在走向商业化。更重要的是，如果以人工智能的其他分支为参考的话，它们的创造力提升的速度远比我们想象的更快。只要想想棋类计算机的威力是如何爆炸性地增长的就够了：一开始，它们低声下气，但在不到 50 年的时间里，它们就击败了像加里·卡斯帕罗夫（Gary Kasparov）这样的世界冠军。

不管这些创造性的算法还需要多久才可以在所有领域全面超越人类，至少它们已经在两个方面给了我们重要启示。首先，正确地选择构件对创造性的工作至关重要。在电子、音乐等领域，构件很清晰；但在类似视觉艺术这样的领域，仍然是雾里看花。其次，创造力所要征服的是复杂的景观，比如进化的适合度景观、车辆路径问题的代价景观、巴基球的能量景观等。在这些景观里，任何创造性的活动都必须小心避开邻近的山丘或者浅显的山谷，一旦陷进去，所得到的解决方案要么了无新意，要么十分平庸。要想得到新颖的、理想的结果，这些死亡陷阱不得不防。

早在生命出现之前，无论是在恒星内锻造的巴基球，还是在空中飘落的雪花，创造它们的过程虽然形形色色，但借助热振动的力量，宇宙已经设法避开了无处不在的小山丘。生命出现后，大自然又别具匠心地增加了自己的门道：遗传漂变、基因重组。现在，计算机科学家也有了自己的算法。所有这一切，都是为了在创造性景观里找到最高的山峰或者最深的山谷。

阅读大自然这本书远比阅读我们的大脑要容易，这就是为什么我们直到现在，还是无法绘制出人类意识的景观。然而，我们可以肯定地说，景观一定是人类创造力的核心，正如景观在其他领域中的作用一样。因为创造性是用来解决复杂问题的，而 20 世纪计算机科学的一个重要发现是，问题的复杂度是封装在其解决方案景观里的。不管一个问题是由一个进化的生物体还是一台计算机来解决，或者是由一个人的头脑来解决，它们必须要做的都是征服这个问题的景观。更重要的是，我们的思维景观一定是层峦叠嶂的，内有大量的山峰和山谷 —— 平淡的故事、陈腐的诗歌、糟糕的作品，否则任何人都可以像托尔斯泰一样写作，像莫扎特一样作曲。但是，在开始探索人类的思维如何避免落入平庸的陷阱之前，我们还是先了解一下达尔文式的进化过程和思维的创造性过程这两者之间的关系吧，其相似度一定比你设想的要高得多。

